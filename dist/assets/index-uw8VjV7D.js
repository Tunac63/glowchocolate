(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function CI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e_={exports:{}},iu={},t_={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Do=Symbol.for("react.element"),RI=Symbol.for("react.portal"),bI=Symbol.for("react.fragment"),jI=Symbol.for("react.strict_mode"),DI=Symbol.for("react.profiler"),PI=Symbol.for("react.provider"),OI=Symbol.for("react.context"),MI=Symbol.for("react.forward_ref"),VI=Symbol.for("react.suspense"),LI=Symbol.for("react.memo"),FI=Symbol.for("react.lazy"),eg=Symbol.iterator;function UI(t){return t===null||typeof t!="object"?null:(t=eg&&t[eg]||t["@@iterator"],typeof t=="function"?t:null)}var n_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r_=Object.assign,s_={};function Xi(t,e,n){this.props=t,this.context=e,this.refs=s_,this.updater=n||n_}Xi.prototype.isReactComponent={};Xi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function i_(){}i_.prototype=Xi.prototype;function Ef(t,e,n){this.props=t,this.context=e,this.refs=s_,this.updater=n||n_}var Tf=Ef.prototype=new i_;Tf.constructor=Ef;r_(Tf,Xi.prototype);Tf.isPureReactComponent=!0;var tg=Array.isArray,a_=Object.prototype.hasOwnProperty,kf={current:null},o_={key:!0,ref:!0,__self:!0,__source:!0};function l_(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)a_.call(e,r)&&!o_.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Do,type:t,key:i,ref:a,props:s,_owner:kf.current}}function BI(t,e){return{$$typeof:Do,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function If(t){return typeof t=="object"&&t!==null&&t.$$typeof===Do}function zI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ng=/\/+/g;function dd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zI(""+t.key):e.toString(36)}function Kl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Do:case RI:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+dd(a,0):r,tg(s)?(n="",t!=null&&(n=t.replace(ng,"$&/")+"/"),Kl(s,e,n,"",function(d){return d})):s!=null&&(If(s)&&(s=BI(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(ng,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",tg(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+dd(i,l);a+=Kl(i,e,n,u,s)}else if(u=UI(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+dd(i,l++),a+=Kl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function vl(t,e,n){if(t==null)return t;var r=[],s=0;return Kl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function $I(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},ql={transition:null},GI={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:ql,ReactCurrentOwner:kf};function c_(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:vl,forEach:function(t,e,n){vl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vl(t,function(){e++}),e},toArray:function(t){return vl(t,function(e){return e})||[]},only:function(t){if(!If(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=Xi;he.Fragment=bI;he.Profiler=DI;he.PureComponent=Ef;he.StrictMode=jI;he.Suspense=VI;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GI;he.act=c_;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=r_({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=kf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)a_.call(e,u)&&!o_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Do,type:t.type,key:s,ref:i,props:r,_owner:a}};he.createContext=function(t){return t={$$typeof:OI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PI,_context:t},t.Consumer=t};he.createElement=l_;he.createFactory=function(t){var e=l_.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:MI,render:t}};he.isValidElement=If;he.lazy=function(t){return{$$typeof:FI,_payload:{_status:-1,_result:t},_init:$I}};he.memo=function(t,e){return{$$typeof:LI,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=ql.transition;ql.transition={};try{t()}finally{ql.transition=e}};he.unstable_act=c_;he.useCallback=function(t,e){return Gt.current.useCallback(t,e)};he.useContext=function(t){return Gt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};he.useEffect=function(t,e){return Gt.current.useEffect(t,e)};he.useId=function(){return Gt.current.useId()};he.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Gt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};he.useRef=function(t){return Gt.current.useRef(t)};he.useState=function(t){return Gt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return Gt.current.useTransition()};he.version="18.3.1";t_.exports=he;var M=t_.exports;const u_=CI(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KI=M,qI=Symbol.for("react.element"),HI=Symbol.for("react.fragment"),WI=Object.prototype.hasOwnProperty,QI=KI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YI={key:!0,ref:!0,__self:!0,__source:!0};function d_(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)WI.call(e,r)&&!YI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:qI,type:t,key:i,ref:a,props:s,_owner:QI.current}}iu.Fragment=HI;iu.jsx=d_;iu.jsxs=d_;e_.exports=iu;var c=e_.exports,eh={},h_={exports:{}},hn={},f_={exports:{}},m_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,K){var Y=$.length;$.push(K);e:for(;0<Y;){var ve=Y-1>>>1,ue=$[ve];if(0<s(ue,K))$[ve]=K,$[Y]=ue,Y=ve;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var K=$[0],Y=$.pop();if(Y!==K){$[0]=Y;e:for(var ve=0,ue=$.length,Ie=ue>>>1;ve<Ie;){var it=2*(ve+1)-1,Ae=$[it],Nt=it+1,Qe=$[Nt];if(0>s(Ae,Y))Nt<ue&&0>s(Qe,Ae)?($[ve]=Qe,$[Nt]=Y,ve=Nt):($[ve]=Ae,$[it]=Y,ve=it);else if(Nt<ue&&0>s(Qe,Y))$[ve]=Qe,$[Nt]=Y,ve=Nt;else break e}}return K}function s($,K){var Y=$.sortIndex-K.sortIndex;return Y!==0?Y:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],m=1,p=null,g=3,k=!1,C=!1,R=!1,j=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I($){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=$)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function P($){if(R=!1,I($),!C)if(n(u)!==null)C=!0,Ce(U);else{var K=n(d);K!==null&&Be(P,K.startTime-$)}}function U($,K){C=!1,R&&(R=!1,w(y),y=-1),k=!0;var Y=g;try{for(I(K),p=n(u);p!==null&&(!(p.expirationTime>K)||$&&!S());){var ve=p.callback;if(typeof ve=="function"){p.callback=null,g=p.priorityLevel;var ue=ve(p.expirationTime<=K);K=t.unstable_now(),typeof ue=="function"?p.callback=ue:p===n(u)&&r(u),I(K)}else r(u);p=n(u)}if(p!==null)var Ie=!0;else{var it=n(d);it!==null&&Be(P,it.startTime-K),Ie=!1}return Ie}finally{p=null,g=Y,k=!1}}var B=!1,A=null,y=-1,E=5,N=-1;function S(){return!(t.unstable_now()-N<E)}function b(){if(A!==null){var $=t.unstable_now();N=$;var K=!0;try{K=A(!0,$)}finally{K?x():(B=!1,A=null)}}else B=!1}var x;if(typeof v=="function")x=function(){v(b)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,Fe=ye.port2;ye.port1.onmessage=b,x=function(){Fe.postMessage(null)}}else x=function(){j(b,0)};function Ce($){A=$,B||(B=!0,x())}function Be($,K){y=j(function(){$(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){C||k||(C=!0,Ce(U))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var Y=g;g=K;try{return $()}finally{g=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Y=g;g=$;try{return K()}finally{g=Y}},t.unstable_scheduleCallback=function($,K,Y){var ve=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ve+Y:ve):Y=ve,$){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Y+ue,$={id:m++,callback:K,priorityLevel:$,startTime:Y,expirationTime:ue,sortIndex:-1},Y>ve?($.sortIndex=Y,e(d,$),n(u)===null&&$===n(d)&&(R?(w(y),y=-1):R=!0,Be(P,Y-ve))):($.sortIndex=ue,e(u,$),C||k||(C=!0,Ce(U))),$},t.unstable_shouldYield=S,t.unstable_wrapCallback=function($){var K=g;return function(){var Y=g;g=K;try{return $.apply(this,arguments)}finally{g=Y}}}})(m_);f_.exports=m_;var JI=f_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XI=M,dn=JI;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p_=new Set,io={};function Ws(t,e){Li(t,e),Li(t+"Capture",e)}function Li(t,e){for(io[t]=e,t=0;t<e.length;t++)p_.add(e[t])}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),th=Object.prototype.hasOwnProperty,ZI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rg={},sg={};function eS(t){return th.call(sg,t)?!0:th.call(rg,t)?!1:ZI.test(t)?sg[t]=!0:(rg[t]=!0,!1)}function tS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nS(t,e,n,r){if(e===null||typeof e>"u"||tS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sf=/[\-:]([a-z])/g;function Af(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sf,Af);St[e]=new Kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sf,Af);St[e]=new Kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sf,Af);St[e]=new Kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Kt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Nf(t,e,n,r){var s=St.hasOwnProperty(e)?St[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nS(e,n,s,r)&&(n=null),r||s===null?eS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sr=XI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_l=Symbol.for("react.element"),pi=Symbol.for("react.portal"),gi=Symbol.for("react.fragment"),xf=Symbol.for("react.strict_mode"),nh=Symbol.for("react.profiler"),g_=Symbol.for("react.provider"),y_=Symbol.for("react.context"),Cf=Symbol.for("react.forward_ref"),rh=Symbol.for("react.suspense"),sh=Symbol.for("react.suspense_list"),Rf=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),v_=Symbol.for("react.offscreen"),ig=Symbol.iterator;function Sa(t){return t===null||typeof t!="object"?null:(t=ig&&t[ig]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,hd;function Da(t){if(hd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hd=e&&e[1]||""}return`
`+hd+t}var fd=!1;function md(t,e){if(!t||fd)return"";fd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{fd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Da(t):""}function rS(t){switch(t.tag){case 5:return Da(t.type);case 16:return Da("Lazy");case 13:return Da("Suspense");case 19:return Da("SuspenseList");case 0:case 2:case 15:return t=md(t.type,!1),t;case 11:return t=md(t.type.render,!1),t;case 1:return t=md(t.type,!0),t;default:return""}}function ih(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gi:return"Fragment";case pi:return"Portal";case nh:return"Profiler";case xf:return"StrictMode";case rh:return"Suspense";case sh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case y_:return(t.displayName||"Context")+".Consumer";case g_:return(t._context.displayName||"Context")+".Provider";case Cf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rf:return e=t.displayName||null,e!==null?e:ih(t.type)||"Memo";case Dr:e=t._payload,t=t._init;try{return ih(t(e))}catch{}}return null}function sS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ih(e);case 8:return e===xf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ns(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function __(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iS(t){var e=__(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wl(t){t._valueTracker||(t._valueTracker=iS(t))}function w_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=__(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ah(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ag(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ns(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function E_(t,e){e=e.checked,e!=null&&Nf(t,"checked",e,!1)}function oh(t,e){E_(t,e);var n=ns(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lh(t,e.type,n):e.hasOwnProperty("defaultValue")&&lh(t,e.type,ns(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function og(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lh(t,e,n){(e!=="number"||fc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pa=Array.isArray;function xi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ns(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ch(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Pa(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ns(n)}}function T_(t,e){var n=ns(e.value),r=ns(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function k_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?k_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var El,I_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(El=El||document.createElement("div"),El.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=El.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ao(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $a={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aS=["Webkit","ms","Moz","O"];Object.keys($a).forEach(function(t){aS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$a[e]=$a[t]})});function S_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$a.hasOwnProperty(t)&&$a[t]?(""+e).trim():e+"px"}function A_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=S_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var oS=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dh(t,e){if(e){if(oS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function hh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fh=null;function bf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mh=null,Ci=null,Ri=null;function ug(t){if(t=Mo(t)){if(typeof mh!="function")throw Error(z(280));var e=t.stateNode;e&&(e=uu(e),mh(t.stateNode,t.type,e))}}function N_(t){Ci?Ri?Ri.push(t):Ri=[t]:Ci=t}function x_(){if(Ci){var t=Ci,e=Ri;if(Ri=Ci=null,ug(t),e)for(t=0;t<e.length;t++)ug(e[t])}}function C_(t,e){return t(e)}function R_(){}var pd=!1;function b_(t,e,n){if(pd)return t(e,n);pd=!0;try{return C_(t,e,n)}finally{pd=!1,(Ci!==null||Ri!==null)&&(R_(),x_())}}function oo(t,e){var n=t.stateNode;if(n===null)return null;var r=uu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var ph=!1;if(pr)try{var Aa={};Object.defineProperty(Aa,"passive",{get:function(){ph=!0}}),window.addEventListener("test",Aa,Aa),window.removeEventListener("test",Aa,Aa)}catch{ph=!1}function lS(t,e,n,r,s,i,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var Ga=!1,mc=null,pc=!1,gh=null,cS={onError:function(t){Ga=!0,mc=t}};function uS(t,e,n,r,s,i,a,l,u){Ga=!1,mc=null,lS.apply(cS,arguments)}function dS(t,e,n,r,s,i,a,l,u){if(uS.apply(this,arguments),Ga){if(Ga){var d=mc;Ga=!1,mc=null}else throw Error(z(198));pc||(pc=!0,gh=d)}}function Qs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function j_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dg(t){if(Qs(t)!==t)throw Error(z(188))}function hS(t){var e=t.alternate;if(!e){if(e=Qs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return dg(s),t;if(i===r)return dg(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function D_(t){return t=hS(t),t!==null?P_(t):null}function P_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=P_(t);if(e!==null)return e;t=t.sibling}return null}var O_=dn.unstable_scheduleCallback,hg=dn.unstable_cancelCallback,fS=dn.unstable_shouldYield,mS=dn.unstable_requestPaint,Ze=dn.unstable_now,pS=dn.unstable_getCurrentPriorityLevel,jf=dn.unstable_ImmediatePriority,M_=dn.unstable_UserBlockingPriority,gc=dn.unstable_NormalPriority,gS=dn.unstable_LowPriority,V_=dn.unstable_IdlePriority,au=null,Hn=null;function yS(t){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(au,t,void 0,(t.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:wS,vS=Math.log,_S=Math.LN2;function wS(t){return t>>>=0,t===0?32:31-(vS(t)/_S|0)|0}var Tl=64,kl=4194304;function Oa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Oa(l):(i&=a,i!==0&&(r=Oa(i)))}else a=n&~s,a!==0?r=Oa(a):i!==0&&(r=Oa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-jn(e),s=1<<n,r|=t[n],e&=~s;return r}function ES(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-jn(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=ES(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function yh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function L_(){var t=Tl;return Tl<<=1,!(Tl&4194240)&&(Tl=64),t}function gd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Po(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jn(e),t[e]=n}function kS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-jn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Df(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-jn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ne=0;function F_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var U_,Pf,B_,z_,$_,vh=!1,Il=[],Gr=null,Kr=null,qr=null,lo=new Map,co=new Map,Or=[],IS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fg(t,e){switch(t){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":lo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":co.delete(e.pointerId)}}function Na(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Mo(e),e!==null&&Pf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function SS(t,e,n,r,s){switch(e){case"focusin":return Gr=Na(Gr,t,e,n,r,s),!0;case"dragenter":return Kr=Na(Kr,t,e,n,r,s),!0;case"mouseover":return qr=Na(qr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return lo.set(i,Na(lo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,co.set(i,Na(co.get(i)||null,t,e,n,r,s)),!0}return!1}function G_(t){var e=xs(t.target);if(e!==null){var n=Qs(e);if(n!==null){if(e=n.tag,e===13){if(e=j_(n),e!==null){t.blockedOn=e,$_(t.priority,function(){B_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_h(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fh=r,n.target.dispatchEvent(r),fh=null}else return e=Mo(n),e!==null&&Pf(e),t.blockedOn=n,!1;e.shift()}return!0}function mg(t,e,n){Hl(t)&&n.delete(e)}function AS(){vh=!1,Gr!==null&&Hl(Gr)&&(Gr=null),Kr!==null&&Hl(Kr)&&(Kr=null),qr!==null&&Hl(qr)&&(qr=null),lo.forEach(mg),co.forEach(mg)}function xa(t,e){t.blockedOn===e&&(t.blockedOn=null,vh||(vh=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,AS)))}function uo(t){function e(s){return xa(s,t)}if(0<Il.length){xa(Il[0],t);for(var n=1;n<Il.length;n++){var r=Il[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gr!==null&&xa(Gr,t),Kr!==null&&xa(Kr,t),qr!==null&&xa(qr,t),lo.forEach(e),co.forEach(e),n=0;n<Or.length;n++)r=Or[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Or.length&&(n=Or[0],n.blockedOn===null);)G_(n),n.blockedOn===null&&Or.shift()}var bi=Sr.ReactCurrentBatchConfig,vc=!0;function NS(t,e,n,r){var s=Ne,i=bi.transition;bi.transition=null;try{Ne=1,Of(t,e,n,r)}finally{Ne=s,bi.transition=i}}function xS(t,e,n,r){var s=Ne,i=bi.transition;bi.transition=null;try{Ne=4,Of(t,e,n,r)}finally{Ne=s,bi.transition=i}}function Of(t,e,n,r){if(vc){var s=_h(t,e,n,r);if(s===null)Ad(t,e,r,_c,n),fg(t,r);else if(SS(s,t,e,n,r))r.stopPropagation();else if(fg(t,r),e&4&&-1<IS.indexOf(t)){for(;s!==null;){var i=Mo(s);if(i!==null&&U_(i),i=_h(t,e,n,r),i===null&&Ad(t,e,r,_c,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ad(t,e,r,null,n)}}var _c=null;function _h(t,e,n,r){if(_c=null,t=bf(r),t=xs(t),t!==null)if(e=Qs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=j_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _c=t,null}function K_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pS()){case jf:return 1;case M_:return 4;case gc:case gS:return 16;case V_:return 536870912;default:return 16}default:return 16}}var Br=null,Mf=null,Wl=null;function q_(){if(Wl)return Wl;var t,e=Mf,n=e.length,r,s="value"in Br?Br.value:Br.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Wl=s.slice(t,1<r?1-r:void 0)}function Ql(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sl(){return!0}function pg(){return!1}function fn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sl:pg,this.isPropagationStopped=pg,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),e}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vf=fn(Zi),Oo=Ge({},Zi,{view:0,detail:0}),CS=fn(Oo),yd,vd,Ca,ou=Ge({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ca&&(Ca&&t.type==="mousemove"?(yd=t.screenX-Ca.screenX,vd=t.screenY-Ca.screenY):vd=yd=0,Ca=t),yd)},movementY:function(t){return"movementY"in t?t.movementY:vd}}),gg=fn(ou),RS=Ge({},ou,{dataTransfer:0}),bS=fn(RS),jS=Ge({},Oo,{relatedTarget:0}),_d=fn(jS),DS=Ge({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),PS=fn(DS),OS=Ge({},Zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),MS=fn(OS),VS=Ge({},Zi,{data:0}),yg=fn(VS),LS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},US={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=US[t])?!!e[t]:!1}function Lf(){return BS}var zS=Ge({},Oo,{key:function(t){if(t.key){var e=LS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ql(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lf,charCode:function(t){return t.type==="keypress"?Ql(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ql(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$S=fn(zS),GS=Ge({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vg=fn(GS),KS=Ge({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lf}),qS=fn(KS),HS=Ge({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),WS=fn(HS),QS=Ge({},ou,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YS=fn(QS),JS=[9,13,27,32],Ff=pr&&"CompositionEvent"in window,Ka=null;pr&&"documentMode"in document&&(Ka=document.documentMode);var XS=pr&&"TextEvent"in window&&!Ka,H_=pr&&(!Ff||Ka&&8<Ka&&11>=Ka),_g=" ",wg=!1;function W_(t,e){switch(t){case"keyup":return JS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yi=!1;function ZS(t,e){switch(t){case"compositionend":return Q_(e);case"keypress":return e.which!==32?null:(wg=!0,_g);case"textInput":return t=e.data,t===_g&&wg?null:t;default:return null}}function e0(t,e){if(yi)return t==="compositionend"||!Ff&&W_(t,e)?(t=q_(),Wl=Mf=Br=null,yi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return H_&&e.locale!=="ko"?null:e.data;default:return null}}var t0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!t0[t.type]:e==="textarea"}function Y_(t,e,n,r){N_(r),e=wc(e,"onChange"),0<e.length&&(n=new Vf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qa=null,ho=null;function n0(t){ow(t,0)}function lu(t){var e=wi(t);if(w_(e))return t}function r0(t,e){if(t==="change")return e}var J_=!1;if(pr){var wd;if(pr){var Ed="oninput"in document;if(!Ed){var Tg=document.createElement("div");Tg.setAttribute("oninput","return;"),Ed=typeof Tg.oninput=="function"}wd=Ed}else wd=!1;J_=wd&&(!document.documentMode||9<document.documentMode)}function kg(){qa&&(qa.detachEvent("onpropertychange",X_),ho=qa=null)}function X_(t){if(t.propertyName==="value"&&lu(ho)){var e=[];Y_(e,ho,t,bf(t)),b_(n0,e)}}function s0(t,e,n){t==="focusin"?(kg(),qa=e,ho=n,qa.attachEvent("onpropertychange",X_)):t==="focusout"&&kg()}function i0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lu(ho)}function a0(t,e){if(t==="click")return lu(e)}function o0(t,e){if(t==="input"||t==="change")return lu(e)}function l0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pn=typeof Object.is=="function"?Object.is:l0;function fo(t,e){if(Pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!th.call(e,s)||!Pn(t[s],e[s]))return!1}return!0}function Ig(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sg(t,e){var n=Ig(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ig(n)}}function Z_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Z_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ew(){for(var t=window,e=fc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fc(t.document)}return e}function Uf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function c0(t){var e=ew(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Z_(n.ownerDocument.documentElement,n)){if(r!==null&&Uf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Sg(n,i);var a=Sg(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var u0=pr&&"documentMode"in document&&11>=document.documentMode,vi=null,wh=null,Ha=null,Eh=!1;function Ag(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Eh||vi==null||vi!==fc(r)||(r=vi,"selectionStart"in r&&Uf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ha&&fo(Ha,r)||(Ha=r,r=wc(wh,"onSelect"),0<r.length&&(e=new Vf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vi)))}function Al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _i={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},Td={},tw={};pr&&(tw=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);function cu(t){if(Td[t])return Td[t];if(!_i[t])return t;var e=_i[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tw)return Td[t]=e[n];return t}var nw=cu("animationend"),rw=cu("animationiteration"),sw=cu("animationstart"),iw=cu("transitionend"),aw=new Map,Ng="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(t,e){aw.set(t,e),Ws(e,[t])}for(var kd=0;kd<Ng.length;kd++){var Id=Ng[kd],d0=Id.toLowerCase(),h0=Id[0].toUpperCase()+Id.slice(1);us(d0,"on"+h0)}us(nw,"onAnimationEnd");us(rw,"onAnimationIteration");us(sw,"onAnimationStart");us("dblclick","onDoubleClick");us("focusin","onFocus");us("focusout","onBlur");us(iw,"onTransitionEnd");Li("onMouseEnter",["mouseout","mouseover"]);Li("onMouseLeave",["mouseout","mouseover"]);Li("onPointerEnter",["pointerout","pointerover"]);Li("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ma));function xg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dS(r,e,void 0,t),t.currentTarget=null}function ow(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;xg(s,l,d),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;xg(s,l,d),i=u}}}if(pc)throw t=gh,pc=!1,gh=null,t}function Me(t,e){var n=e[Ah];n===void 0&&(n=e[Ah]=new Set);var r=t+"__bubble";n.has(r)||(lw(e,t,2,!1),n.add(r))}function Sd(t,e,n){var r=0;e&&(r|=4),lw(n,t,r,e)}var Nl="_reactListening"+Math.random().toString(36).slice(2);function mo(t){if(!t[Nl]){t[Nl]=!0,p_.forEach(function(n){n!=="selectionchange"&&(f0.has(n)||Sd(n,!1,t),Sd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nl]||(e[Nl]=!0,Sd("selectionchange",!1,e))}}function lw(t,e,n,r){switch(K_(e)){case 1:var s=NS;break;case 4:s=xS;break;default:s=Of}n=s.bind(null,e,n,t),s=void 0,!ph||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ad(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=xs(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}b_(function(){var d=i,m=bf(n),p=[];e:{var g=aw.get(t);if(g!==void 0){var k=Vf,C=t;switch(t){case"keypress":if(Ql(n)===0)break e;case"keydown":case"keyup":k=$S;break;case"focusin":C="focus",k=_d;break;case"focusout":C="blur",k=_d;break;case"beforeblur":case"afterblur":k=_d;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=gg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=bS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=qS;break;case nw:case rw:case sw:k=PS;break;case iw:k=WS;break;case"scroll":k=CS;break;case"wheel":k=YS;break;case"copy":case"cut":case"paste":k=MS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=vg}var R=(e&4)!==0,j=!R&&t==="scroll",w=R?g!==null?g+"Capture":null:g;R=[];for(var v=d,I;v!==null;){I=v;var P=I.stateNode;if(I.tag===5&&P!==null&&(I=P,w!==null&&(P=oo(v,w),P!=null&&R.push(po(v,P,I)))),j)break;v=v.return}0<R.length&&(g=new k(g,C,null,n,m),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",g&&n!==fh&&(C=n.relatedTarget||n.fromElement)&&(xs(C)||C[gr]))break e;if((k||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,k?(C=n.relatedTarget||n.toElement,k=d,C=C?xs(C):null,C!==null&&(j=Qs(C),C!==j||C.tag!==5&&C.tag!==6)&&(C=null)):(k=null,C=d),k!==C)){if(R=gg,P="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(R=vg,P="onPointerLeave",w="onPointerEnter",v="pointer"),j=k==null?g:wi(k),I=C==null?g:wi(C),g=new R(P,v+"leave",k,n,m),g.target=j,g.relatedTarget=I,P=null,xs(m)===d&&(R=new R(w,v+"enter",C,n,m),R.target=I,R.relatedTarget=j,P=R),j=P,k&&C)t:{for(R=k,w=C,v=0,I=R;I;I=ci(I))v++;for(I=0,P=w;P;P=ci(P))I++;for(;0<v-I;)R=ci(R),v--;for(;0<I-v;)w=ci(w),I--;for(;v--;){if(R===w||w!==null&&R===w.alternate)break t;R=ci(R),w=ci(w)}R=null}else R=null;k!==null&&Cg(p,g,k,R,!1),C!==null&&j!==null&&Cg(p,j,C,R,!0)}}e:{if(g=d?wi(d):window,k=g.nodeName&&g.nodeName.toLowerCase(),k==="select"||k==="input"&&g.type==="file")var U=r0;else if(Eg(g))if(J_)U=o0;else{U=i0;var B=s0}else(k=g.nodeName)&&k.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(U=a0);if(U&&(U=U(t,d))){Y_(p,U,n,m);break e}B&&B(t,g,d),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&lh(g,"number",g.value)}switch(B=d?wi(d):window,t){case"focusin":(Eg(B)||B.contentEditable==="true")&&(vi=B,wh=d,Ha=null);break;case"focusout":Ha=wh=vi=null;break;case"mousedown":Eh=!0;break;case"contextmenu":case"mouseup":case"dragend":Eh=!1,Ag(p,n,m);break;case"selectionchange":if(u0)break;case"keydown":case"keyup":Ag(p,n,m)}var A;if(Ff)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else yi?W_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(H_&&n.locale!=="ko"&&(yi||y!=="onCompositionStart"?y==="onCompositionEnd"&&yi&&(A=q_()):(Br=m,Mf="value"in Br?Br.value:Br.textContent,yi=!0)),B=wc(d,y),0<B.length&&(y=new yg(y,t,null,n,m),p.push({event:y,listeners:B}),A?y.data=A:(A=Q_(n),A!==null&&(y.data=A)))),(A=XS?ZS(t,n):e0(t,n))&&(d=wc(d,"onBeforeInput"),0<d.length&&(m=new yg("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=A))}ow(p,e)})}function po(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=oo(t,n),i!=null&&r.unshift(po(t,i,s)),i=oo(t,e),i!=null&&r.push(po(t,i,s))),t=t.return}return r}function ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cg(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=oo(n,i),u!=null&&a.unshift(po(n,u,l))):s||(u=oo(n,i),u!=null&&a.push(po(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var m0=/\r\n?/g,p0=/\u0000|\uFFFD/g;function Rg(t){return(typeof t=="string"?t:""+t).replace(m0,`
`).replace(p0,"")}function xl(t,e,n){if(e=Rg(e),Rg(t)!==e&&n)throw Error(z(425))}function Ec(){}var Th=null,kh=null;function Ih(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sh=typeof setTimeout=="function"?setTimeout:void 0,g0=typeof clearTimeout=="function"?clearTimeout:void 0,bg=typeof Promise=="function"?Promise:void 0,y0=typeof queueMicrotask=="function"?queueMicrotask:typeof bg<"u"?function(t){return bg.resolve(null).then(t).catch(v0)}:Sh;function v0(t){setTimeout(function(){throw t})}function Nd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),uo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);uo(e)}function Hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ea=Math.random().toString(36).slice(2),qn="__reactFiber$"+ea,go="__reactProps$"+ea,gr="__reactContainer$"+ea,Ah="__reactEvents$"+ea,_0="__reactListeners$"+ea,w0="__reactHandles$"+ea;function xs(t){var e=t[qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gr]||n[qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jg(t);t!==null;){if(n=t[qn])return n;t=jg(t)}return e}t=n,n=t.parentNode}return null}function Mo(t){return t=t[qn]||t[gr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function uu(t){return t[go]||null}var Nh=[],Ei=-1;function ds(t){return{current:t}}function Le(t){0>Ei||(t.current=Nh[Ei],Nh[Ei]=null,Ei--)}function je(t,e){Ei++,Nh[Ei]=t.current,t.current=e}var rs={},Ft=ds(rs),Jt=ds(!1),Vs=rs;function Fi(t,e){var n=t.type.contextTypes;if(!n)return rs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Xt(t){return t=t.childContextTypes,t!=null}function Tc(){Le(Jt),Le(Ft)}function Dg(t,e,n){if(Ft.current!==rs)throw Error(z(168));je(Ft,e),je(Jt,n)}function cw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,sS(t)||"Unknown",s));return Ge({},n,r)}function kc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rs,Vs=Ft.current,je(Ft,t),je(Jt,Jt.current),!0}function Pg(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=cw(t,e,Vs),r.__reactInternalMemoizedMergedChildContext=t,Le(Jt),Le(Ft),je(Ft,t)):Le(Jt),je(Jt,n)}var or=null,du=!1,xd=!1;function uw(t){or===null?or=[t]:or.push(t)}function E0(t){du=!0,uw(t)}function hs(){if(!xd&&or!==null){xd=!0;var t=0,e=Ne;try{var n=or;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}or=null,du=!1}catch(s){throw or!==null&&(or=or.slice(t+1)),O_(jf,hs),s}finally{Ne=e,xd=!1}}return null}var Ti=[],ki=0,Ic=null,Sc=0,mn=[],pn=0,Ls=null,lr=1,cr="";function Ss(t,e){Ti[ki++]=Sc,Ti[ki++]=Ic,Ic=t,Sc=e}function dw(t,e,n){mn[pn++]=lr,mn[pn++]=cr,mn[pn++]=Ls,Ls=t;var r=lr;t=cr;var s=32-jn(r)-1;r&=~(1<<s),n+=1;var i=32-jn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,lr=1<<32-jn(e)+s|n<<s|r,cr=i+t}else lr=1<<i|n<<s|r,cr=t}function Bf(t){t.return!==null&&(Ss(t,1),dw(t,1,0))}function zf(t){for(;t===Ic;)Ic=Ti[--ki],Ti[ki]=null,Sc=Ti[--ki],Ti[ki]=null;for(;t===Ls;)Ls=mn[--pn],mn[pn]=null,cr=mn[--pn],mn[pn]=null,lr=mn[--pn],mn[pn]=null}var cn=null,on=null,Ue=!1,Rn=null;function hw(t,e){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Og(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,on=Hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ls!==null?{id:lr,overflow:cr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,on=null,!0):!1;default:return!1}}function xh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ch(t){if(Ue){var e=on;if(e){var n=e;if(!Og(t,e)){if(xh(t))throw Error(z(418));e=Hr(n.nextSibling);var r=cn;e&&Og(t,e)?hw(r,n):(t.flags=t.flags&-4097|2,Ue=!1,cn=t)}}else{if(xh(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ue=!1,cn=t}}}function Mg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function Cl(t){if(t!==cn)return!1;if(!Ue)return Mg(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ih(t.type,t.memoizedProps)),e&&(e=on)){if(xh(t))throw fw(),Error(z(418));for(;e;)hw(t,e),e=Hr(e.nextSibling)}if(Mg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=Hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=cn?Hr(t.stateNode.nextSibling):null;return!0}function fw(){for(var t=on;t;)t=Hr(t.nextSibling)}function Ui(){on=cn=null,Ue=!1}function $f(t){Rn===null?Rn=[t]:Rn.push(t)}var T0=Sr.ReactCurrentBatchConfig;function Ra(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Rl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vg(t){var e=t._init;return e(t._payload)}function mw(t){function e(w,v){if(t){var I=w.deletions;I===null?(w.deletions=[v],w.flags|=16):I.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=Jr(w,v),w.index=0,w.sibling=null,w}function i(w,v,I){return w.index=I,t?(I=w.alternate,I!==null?(I=I.index,I<v?(w.flags|=2,v):I):(w.flags|=2,v)):(w.flags|=1048576,v)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,v,I,P){return v===null||v.tag!==6?(v=Od(I,w.mode,P),v.return=w,v):(v=s(v,I),v.return=w,v)}function u(w,v,I,P){var U=I.type;return U===gi?m(w,v,I.props.children,P,I.key):v!==null&&(v.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Dr&&Vg(U)===v.type)?(P=s(v,I.props),P.ref=Ra(w,v,I),P.return=w,P):(P=nc(I.type,I.key,I.props,null,w.mode,P),P.ref=Ra(w,v,I),P.return=w,P)}function d(w,v,I,P){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=Md(I,w.mode,P),v.return=w,v):(v=s(v,I.children||[]),v.return=w,v)}function m(w,v,I,P,U){return v===null||v.tag!==7?(v=Ps(I,w.mode,P,U),v.return=w,v):(v=s(v,I),v.return=w,v)}function p(w,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Od(""+v,w.mode,I),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _l:return I=nc(v.type,v.key,v.props,null,w.mode,I),I.ref=Ra(w,null,v),I.return=w,I;case pi:return v=Md(v,w.mode,I),v.return=w,v;case Dr:var P=v._init;return p(w,P(v._payload),I)}if(Pa(v)||Sa(v))return v=Ps(v,w.mode,I,null),v.return=w,v;Rl(w,v)}return null}function g(w,v,I,P){var U=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return U!==null?null:l(w,v,""+I,P);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case _l:return I.key===U?u(w,v,I,P):null;case pi:return I.key===U?d(w,v,I,P):null;case Dr:return U=I._init,g(w,v,U(I._payload),P)}if(Pa(I)||Sa(I))return U!==null?null:m(w,v,I,P,null);Rl(w,I)}return null}function k(w,v,I,P,U){if(typeof P=="string"&&P!==""||typeof P=="number")return w=w.get(I)||null,l(v,w,""+P,U);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case _l:return w=w.get(P.key===null?I:P.key)||null,u(v,w,P,U);case pi:return w=w.get(P.key===null?I:P.key)||null,d(v,w,P,U);case Dr:var B=P._init;return k(w,v,I,B(P._payload),U)}if(Pa(P)||Sa(P))return w=w.get(I)||null,m(v,w,P,U,null);Rl(v,P)}return null}function C(w,v,I,P){for(var U=null,B=null,A=v,y=v=0,E=null;A!==null&&y<I.length;y++){A.index>y?(E=A,A=null):E=A.sibling;var N=g(w,A,I[y],P);if(N===null){A===null&&(A=E);break}t&&A&&N.alternate===null&&e(w,A),v=i(N,v,y),B===null?U=N:B.sibling=N,B=N,A=E}if(y===I.length)return n(w,A),Ue&&Ss(w,y),U;if(A===null){for(;y<I.length;y++)A=p(w,I[y],P),A!==null&&(v=i(A,v,y),B===null?U=A:B.sibling=A,B=A);return Ue&&Ss(w,y),U}for(A=r(w,A);y<I.length;y++)E=k(A,w,y,I[y],P),E!==null&&(t&&E.alternate!==null&&A.delete(E.key===null?y:E.key),v=i(E,v,y),B===null?U=E:B.sibling=E,B=E);return t&&A.forEach(function(S){return e(w,S)}),Ue&&Ss(w,y),U}function R(w,v,I,P){var U=Sa(I);if(typeof U!="function")throw Error(z(150));if(I=U.call(I),I==null)throw Error(z(151));for(var B=U=null,A=v,y=v=0,E=null,N=I.next();A!==null&&!N.done;y++,N=I.next()){A.index>y?(E=A,A=null):E=A.sibling;var S=g(w,A,N.value,P);if(S===null){A===null&&(A=E);break}t&&A&&S.alternate===null&&e(w,A),v=i(S,v,y),B===null?U=S:B.sibling=S,B=S,A=E}if(N.done)return n(w,A),Ue&&Ss(w,y),U;if(A===null){for(;!N.done;y++,N=I.next())N=p(w,N.value,P),N!==null&&(v=i(N,v,y),B===null?U=N:B.sibling=N,B=N);return Ue&&Ss(w,y),U}for(A=r(w,A);!N.done;y++,N=I.next())N=k(A,w,y,N.value,P),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?y:N.key),v=i(N,v,y),B===null?U=N:B.sibling=N,B=N);return t&&A.forEach(function(b){return e(w,b)}),Ue&&Ss(w,y),U}function j(w,v,I,P){if(typeof I=="object"&&I!==null&&I.type===gi&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case _l:e:{for(var U=I.key,B=v;B!==null;){if(B.key===U){if(U=I.type,U===gi){if(B.tag===7){n(w,B.sibling),v=s(B,I.props.children),v.return=w,w=v;break e}}else if(B.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Dr&&Vg(U)===B.type){n(w,B.sibling),v=s(B,I.props),v.ref=Ra(w,B,I),v.return=w,w=v;break e}n(w,B);break}else e(w,B);B=B.sibling}I.type===gi?(v=Ps(I.props.children,w.mode,P,I.key),v.return=w,w=v):(P=nc(I.type,I.key,I.props,null,w.mode,P),P.ref=Ra(w,v,I),P.return=w,w=P)}return a(w);case pi:e:{for(B=I.key;v!==null;){if(v.key===B)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(w,v.sibling),v=s(v,I.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=Md(I,w.mode,P),v.return=w,w=v}return a(w);case Dr:return B=I._init,j(w,v,B(I._payload),P)}if(Pa(I))return C(w,v,I,P);if(Sa(I))return R(w,v,I,P);Rl(w,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,I),v.return=w,w=v):(n(w,v),v=Od(I,w.mode,P),v.return=w,w=v),a(w)):n(w,v)}return j}var Bi=mw(!0),pw=mw(!1),Ac=ds(null),Nc=null,Ii=null,Gf=null;function Kf(){Gf=Ii=Nc=null}function qf(t){var e=Ac.current;Le(Ac),t._currentValue=e}function Rh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ji(t,e){Nc=t,Gf=Ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function Tn(t){var e=t._currentValue;if(Gf!==t)if(t={context:t,memoizedValue:e,next:null},Ii===null){if(Nc===null)throw Error(z(308));Ii=t,Nc.dependencies={lanes:0,firstContext:t}}else Ii=Ii.next=t;return e}var Cs=null;function Hf(t){Cs===null?Cs=[t]:Cs.push(t)}function gw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Hf(e)):(n.next=s.next,s.next=n),e.interleaved=n,yr(t,r)}function yr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pr=!1;function Wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,yr(t,n)}return s=r.interleaved,s===null?(e.next=e,Hf(r)):(e.next=s.next,s.next=e),r.interleaved=e,yr(t,n)}function Yl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Df(t,n)}}function Lg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xc(t,e,n,r){var s=t.updateQueue;Pr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;a=0,m=d=u=null,l=i;do{var g=l.lane,k=l.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:k,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,R=l;switch(g=e,k=n,R.tag){case 1:if(C=R.payload,typeof C=="function"){p=C.call(k,p,g);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=R.payload,g=typeof C=="function"?C.call(k,p,g):C,g==null)break e;p=Ge({},p,g);break e;case 2:Pr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else k={eventTime:k,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=k,u=p):m=m.next=k,a|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Us|=a,t.lanes=a,t.memoizedState=p}}function Fg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Vo={},Wn=ds(Vo),yo=ds(Vo),vo=ds(Vo);function Rs(t){if(t===Vo)throw Error(z(174));return t}function Qf(t,e){switch(je(vo,e),je(yo,t),je(Wn,Vo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uh(e,t)}Le(Wn),je(Wn,e)}function zi(){Le(Wn),Le(yo),Le(vo)}function vw(t){Rs(vo.current);var e=Rs(Wn.current),n=uh(e,t.type);e!==n&&(je(yo,t),je(Wn,n))}function Yf(t){yo.current===t&&(Le(Wn),Le(yo))}var ze=ds(0);function Cc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cd=[];function Jf(){for(var t=0;t<Cd.length;t++)Cd[t]._workInProgressVersionPrimary=null;Cd.length=0}var Jl=Sr.ReactCurrentDispatcher,Rd=Sr.ReactCurrentBatchConfig,Fs=0,$e=null,ot=null,ft=null,Rc=!1,Wa=!1,_o=0,k0=0;function Dt(){throw Error(z(321))}function Xf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pn(t[n],e[n]))return!1;return!0}function Zf(t,e,n,r,s,i){if(Fs=i,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jl.current=t===null||t.memoizedState===null?N0:x0,t=n(r,s),Wa){i=0;do{if(Wa=!1,_o=0,25<=i)throw Error(z(301));i+=1,ft=ot=null,e.updateQueue=null,Jl.current=C0,t=n(r,s)}while(Wa)}if(Jl.current=bc,e=ot!==null&&ot.next!==null,Fs=0,ft=ot=$e=null,Rc=!1,e)throw Error(z(300));return t}function em(){var t=_o!==0;return _o=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?$e.memoizedState=ft=t:ft=ft.next=t,ft}function kn(){if(ot===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=ft===null?$e.memoizedState:ft.next;if(e!==null)ft=e,ot=t;else{if(t===null)throw Error(z(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ft===null?$e.memoizedState=ft=t:ft=ft.next=t}return ft}function wo(t,e){return typeof e=="function"?e(t):e}function bd(t){var e=kn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,d=i;do{var m=d.lane;if((Fs&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,a=r):u=u.next=p,$e.lanes|=m,Us|=m}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=l,Pn(r,e.memoizedState)||(Yt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,$e.lanes|=i,Us|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jd(t){var e=kn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Pn(i,e.memoizedState)||(Yt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function _w(){}function ww(t,e){var n=$e,r=kn(),s=e(),i=!Pn(r.memoizedState,s);if(i&&(r.memoizedState=s,Yt=!0),r=r.queue,tm(kw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,Eo(9,Tw.bind(null,n,r,s,e),void 0,null),mt===null)throw Error(z(349));Fs&30||Ew(n,e,s)}return s}function Ew(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Tw(t,e,n,r){e.value=n,e.getSnapshot=r,Iw(e)&&Sw(t)}function kw(t,e,n){return n(function(){Iw(e)&&Sw(t)})}function Iw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pn(t,n)}catch{return!0}}function Sw(t){var e=yr(t,1);e!==null&&Dn(e,t,1,-1)}function Ug(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:t},e.queue=t,t=t.dispatch=A0.bind(null,$e,t),[e.memoizedState,t]}function Eo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Aw(){return kn().memoizedState}function Xl(t,e,n,r){var s=Gn();$e.flags|=t,s.memoizedState=Eo(1|e,n,void 0,r===void 0?null:r)}function hu(t,e,n,r){var s=kn();r=r===void 0?null:r;var i=void 0;if(ot!==null){var a=ot.memoizedState;if(i=a.destroy,r!==null&&Xf(r,a.deps)){s.memoizedState=Eo(e,n,i,r);return}}$e.flags|=t,s.memoizedState=Eo(1|e,n,i,r)}function Bg(t,e){return Xl(8390656,8,t,e)}function tm(t,e){return hu(2048,8,t,e)}function Nw(t,e){return hu(4,2,t,e)}function xw(t,e){return hu(4,4,t,e)}function Cw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Rw(t,e,n){return n=n!=null?n.concat([t]):null,hu(4,4,Cw.bind(null,e,t),n)}function nm(){}function bw(t,e){var n=kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jw(t,e){var n=kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Dw(t,e,n){return Fs&21?(Pn(n,e)||(n=L_(),$e.lanes|=n,Us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function I0(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=Rd.transition;Rd.transition={};try{t(!1),e()}finally{Ne=n,Rd.transition=r}}function Pw(){return kn().memoizedState}function S0(t,e,n){var r=Yr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ow(t))Mw(e,n);else if(n=gw(t,e,n,r),n!==null){var s=$t();Dn(n,t,r,s),Vw(n,e,r)}}function A0(t,e,n){var r=Yr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ow(t))Mw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Pn(l,a)){var u=e.interleaved;u===null?(s.next=s,Hf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=gw(t,e,s,r),n!==null&&(s=$t(),Dn(n,t,r,s),Vw(n,e,r))}}function Ow(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function Mw(t,e){Wa=Rc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Vw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Df(t,n)}}var bc={readContext:Tn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},N0={readContext:Tn,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:Tn,useEffect:Bg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xl(4194308,4,Cw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xl(4,2,t,e)},useMemo:function(t,e){var n=Gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=S0.bind(null,$e,t),[r.memoizedState,t]},useRef:function(t){var e=Gn();return t={current:t},e.memoizedState=t},useState:Ug,useDebugValue:nm,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=Ug(!1),e=t[0];return t=I0.bind(null,t[1]),Gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$e,s=Gn();if(Ue){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),mt===null)throw Error(z(349));Fs&30||Ew(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Bg(kw.bind(null,r,i,t),[t]),r.flags|=2048,Eo(9,Tw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Gn(),e=mt.identifierPrefix;if(Ue){var n=cr,r=lr;n=(r&~(1<<32-jn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_o++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=k0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},x0={readContext:Tn,useCallback:bw,useContext:Tn,useEffect:tm,useImperativeHandle:Rw,useInsertionEffect:Nw,useLayoutEffect:xw,useMemo:jw,useReducer:bd,useRef:Aw,useState:function(){return bd(wo)},useDebugValue:nm,useDeferredValue:function(t){var e=kn();return Dw(e,ot.memoizedState,t)},useTransition:function(){var t=bd(wo)[0],e=kn().memoizedState;return[t,e]},useMutableSource:_w,useSyncExternalStore:ww,useId:Pw,unstable_isNewReconciler:!1},C0={readContext:Tn,useCallback:bw,useContext:Tn,useEffect:tm,useImperativeHandle:Rw,useInsertionEffect:Nw,useLayoutEffect:xw,useMemo:jw,useReducer:jd,useRef:Aw,useState:function(){return jd(wo)},useDebugValue:nm,useDeferredValue:function(t){var e=kn();return ot===null?e.memoizedState=t:Dw(e,ot.memoizedState,t)},useTransition:function(){var t=jd(wo)[0],e=kn().memoizedState;return[t,e]},useMutableSource:_w,useSyncExternalStore:ww,useId:Pw,unstable_isNewReconciler:!1};function xn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fu={isMounted:function(t){return(t=t._reactInternals)?Qs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),s=Yr(t),i=hr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Wr(t,i,s),e!==null&&(Dn(e,t,s,r),Yl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),s=Yr(t),i=hr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Wr(t,i,s),e!==null&&(Dn(e,t,s,r),Yl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=Yr(t),s=hr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Wr(t,s,r),e!==null&&(Dn(e,t,r,n),Yl(e,t,r))}};function zg(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!fo(n,r)||!fo(s,i):!0}function Lw(t,e,n){var r=!1,s=rs,i=e.contextType;return typeof i=="object"&&i!==null?i=Tn(i):(s=Xt(e)?Vs:Ft.current,r=e.contextTypes,i=(r=r!=null)?Fi(t,s):rs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $g(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fu.enqueueReplaceState(e,e.state,null)}function jh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Wf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Tn(i):(i=Xt(e)?Vs:Ft.current,s.context=Fi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(bh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&fu.enqueueReplaceState(s,s.state,null),xc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function $i(t,e){try{var n="",r=e;do n+=rS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Dd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var R0=typeof WeakMap=="function"?WeakMap:Map;function Fw(t,e,n){n=hr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Dc||(Dc=!0,$h=r),Dh(t,e)},n}function Uw(t,e,n){n=hr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Dh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Dh(t,e),typeof r!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Gg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new R0;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=G0.bind(null,t,e,n),e.then(t,t))}function Kg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hr(-1,1),e.tag=2,Wr(n,e,1))),n.lanes|=1),t)}var b0=Sr.ReactCurrentOwner,Yt=!1;function zt(t,e,n,r){e.child=t===null?pw(e,null,n,r):Bi(e,t.child,n,r)}function Hg(t,e,n,r,s){n=n.render;var i=e.ref;return ji(e,s),r=Zf(t,e,n,r,i,s),n=em(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vr(t,e,s)):(Ue&&n&&Bf(e),e.flags|=1,zt(t,e,r,s),e.child)}function Wg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!um(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Bw(t,e,i,r,s)):(t=nc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:fo,n(a,r)&&t.ref===e.ref)return vr(t,e,s)}return e.flags|=1,t=Jr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Bw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(fo(i,r)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,vr(t,e,s)}return Ph(t,e,n,r,s)}function zw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Ai,an),an|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(Ai,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,je(Ai,an),an|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,je(Ai,an),an|=r;return zt(t,e,s,n),e.child}function $w(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ph(t,e,n,r,s){var i=Xt(n)?Vs:Ft.current;return i=Fi(e,i),ji(e,s),n=Zf(t,e,n,r,i,s),r=em(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vr(t,e,s)):(Ue&&r&&Bf(e),e.flags|=1,zt(t,e,n,s),e.child)}function Qg(t,e,n,r,s){if(Xt(n)){var i=!0;kc(e)}else i=!1;if(ji(e,s),e.stateNode===null)Zl(t,e),Lw(e,n,r),jh(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Tn(d):(d=Xt(n)?Vs:Ft.current,d=Fi(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==d)&&$g(e,a,r,d),Pr=!1;var g=e.memoizedState;a.state=g,xc(e,r,a,s),u=e.memoizedState,l!==r||g!==u||Jt.current||Pr?(typeof m=="function"&&(bh(e,n,m,r),u=e.memoizedState),(l=Pr||zg(e,n,l,r,g,u,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,yw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:xn(e.type,l),a.props=d,p=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Tn(u):(u=Xt(n)?Vs:Ft.current,u=Fi(e,u));var k=n.getDerivedStateFromProps;(m=typeof k=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||g!==u)&&$g(e,a,r,u),Pr=!1,g=e.memoizedState,a.state=g,xc(e,r,a,s);var C=e.memoizedState;l!==p||g!==C||Jt.current||Pr?(typeof k=="function"&&(bh(e,n,k,r),C=e.memoizedState),(d=Pr||zg(e,n,d,r,g,C,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),a.props=r,a.state=C,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Oh(t,e,n,r,i,s)}function Oh(t,e,n,r,s,i){$w(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Pg(e,n,!1),vr(t,e,i);r=e.stateNode,b0.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Bi(e,t.child,null,i),e.child=Bi(e,null,l,i)):zt(t,e,l,i),e.memoizedState=r.state,s&&Pg(e,n,!0),e.child}function Gw(t){var e=t.stateNode;e.pendingContext?Dg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Dg(t,e.context,!1),Qf(t,e.containerInfo)}function Yg(t,e,n,r,s){return Ui(),$f(s),e.flags|=256,zt(t,e,n,r),e.child}var Mh={dehydrated:null,treeContext:null,retryLane:0};function Vh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kw(t,e,n){var r=e.pendingProps,s=ze.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),je(ze,s&1),t===null)return Ch(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=gu(a,r,0,null),t=Ps(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Vh(n),e.memoizedState=Mh,t):rm(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return j0(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Jr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Jr(l,i):(i=Ps(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Vh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Mh,r}return i=t.child,t=i.sibling,r=Jr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rm(t,e){return e=gu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bl(t,e,n,r){return r!==null&&$f(r),Bi(e,t.child,null,n),t=rm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function j0(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Dd(Error(z(422))),bl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=gu({mode:"visible",children:r.children},s,0,null),i=Ps(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Bi(e,t.child,null,a),e.child.memoizedState=Vh(a),e.memoizedState=Mh,i);if(!(e.mode&1))return bl(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(z(419)),r=Dd(i,r,void 0),bl(t,e,a,r)}if(l=(a&t.childLanes)!==0,Yt||l){if(r=mt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,yr(t,s),Dn(r,t,s,-1))}return cm(),r=Dd(Error(z(421))),bl(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=K0.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,on=Hr(s.nextSibling),cn=e,Ue=!0,Rn=null,t!==null&&(mn[pn++]=lr,mn[pn++]=cr,mn[pn++]=Ls,lr=t.id,cr=t.overflow,Ls=e),e=rm(e,r.children),e.flags|=4096,e)}function Jg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rh(t.return,e,n)}function Pd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function qw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(zt(t,e,r.children,n),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jg(t,n,e);else if(t.tag===19)Jg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Cc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Pd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Cc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Pd(e,!0,n,null,i);break;case"together":Pd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Jr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function D0(t,e,n){switch(e.tag){case 3:Gw(e),Ui();break;case 5:vw(e);break;case 1:Xt(e.type)&&kc(e);break;case 4:Qf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;je(Ac,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?Kw(t,e,n):(je(ze,ze.current&1),t=vr(t,e,n),t!==null?t.sibling:null);je(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),je(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,zw(t,e,n)}return vr(t,e,n)}var Hw,Lh,Ww,Qw;Hw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lh=function(){};Ww=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Rs(Wn.current);var i=null;switch(n){case"input":s=ah(t,s),r=ah(t,r),i=[];break;case"select":s=Ge({},s,{value:void 0}),r=Ge({},r,{value:void 0}),i=[];break;case"textarea":s=ch(t,s),r=ch(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ec)}dh(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(io.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(io.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Me("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Qw=function(t,e,n,r){n!==r&&(e.flags|=4)};function ba(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function P0(t,e,n){var r=e.pendingProps;switch(zf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return Xt(e.type)&&Tc(),Pt(e),null;case 3:return r=e.stateNode,zi(),Le(Jt),Le(Ft),Jf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Cl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rn!==null&&(qh(Rn),Rn=null))),Lh(t,e),Pt(e),null;case 5:Yf(e);var s=Rs(vo.current);if(n=e.type,t!==null&&e.stateNode!=null)Ww(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Pt(e),null}if(t=Rs(Wn.current),Cl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[qn]=e,r[go]=i,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(s=0;s<Ma.length;s++)Me(Ma[s],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":ag(r,i),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Me("invalid",r);break;case"textarea":lg(r,i),Me("invalid",r)}dh(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&xl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&xl(r.textContent,l,t),s=["children",""+l]):io.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Me("scroll",r)}switch(n){case"input":wl(r),og(r,i,!0);break;case"textarea":wl(r),cg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ec)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=k_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[qn]=e,t[go]=r,Hw(t,e,!1,!1),e.stateNode=t;e:{switch(a=hh(n,r),n){case"dialog":Me("cancel",t),Me("close",t),s=r;break;case"iframe":case"object":case"embed":Me("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ma.length;s++)Me(Ma[s],t);s=r;break;case"source":Me("error",t),s=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),s=r;break;case"details":Me("toggle",t),s=r;break;case"input":ag(t,r),s=ah(t,r),Me("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ge({},r,{value:void 0}),Me("invalid",t);break;case"textarea":lg(t,r),s=ch(t,r),Me("invalid",t);break;default:s=r}dh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?A_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&I_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ao(t,u):typeof u=="number"&&ao(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(io.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Me("scroll",t):u!=null&&Nf(t,i,u,a))}switch(n){case"input":wl(t),og(t,r,!1);break;case"textarea":wl(t),cg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ns(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?xi(t,!!r.multiple,i,!1):r.defaultValue!=null&&xi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ec)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)Qw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Rs(vo.current),Rs(Wn.current),Cl(e)){if(r=e.stateNode,n=e.memoizedProps,r[qn]=e,(i=r.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:xl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qn]=e,e.stateNode=r}return Pt(e),null;case 13:if(Le(ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&on!==null&&e.mode&1&&!(e.flags&128))fw(),Ui(),e.flags|=98560,i=!1;else if(i=Cl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[qn]=e}else Ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),i=!1}else Rn!==null&&(qh(Rn),Rn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?lt===0&&(lt=3):cm())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return zi(),Lh(t,e),t===null&&mo(e.stateNode.containerInfo),Pt(e),null;case 10:return qf(e.type._context),Pt(e),null;case 17:return Xt(e.type)&&Tc(),Pt(e),null;case 19:if(Le(ze),i=e.memoizedState,i===null)return Pt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)ba(i,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Cc(t),a!==null){for(e.flags|=128,ba(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(ze,ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ze()>Gi&&(e.flags|=128,r=!0,ba(i,!1),e.lanes=4194304)}else{if(!r)if(t=Cc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ba(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ue)return Pt(e),null}else 2*Ze()-i.renderingStartTime>Gi&&n!==1073741824&&(e.flags|=128,r=!0,ba(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ze(),e.sibling=null,n=ze.current,je(ze,r?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return lm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?an&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function O0(t,e){switch(zf(e),e.tag){case 1:return Xt(e.type)&&Tc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zi(),Le(Jt),Le(Ft),Jf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yf(e),null;case 13:if(Le(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(ze),null;case 4:return zi(),null;case 10:return qf(e.type._context),null;case 22:case 23:return lm(),null;case 24:return null;default:return null}}var jl=!1,Vt=!1,M0=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Si(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function Fh(t,e,n){try{n()}catch(r){He(t,e,r)}}var Xg=!1;function V0(t,e){if(Th=vc,t=ew(),Uf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var k;p!==n||s!==0&&p.nodeType!==3||(l=a+s),p!==i||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(k=p.firstChild)!==null;)g=p,p=k;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=a),g===i&&++m===r&&(u=a),(k=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=k}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(kh={focusedElem:t,selectionRange:n},vc=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var R=C.memoizedProps,j=C.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?R:xn(e.type,R),j);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(P){He(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return C=Xg,Xg=!1,C}function Qa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fh(e,n,i)}s=s.next}while(s!==r)}}function mu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Uh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yw(t){var e=t.alternate;e!==null&&(t.alternate=null,Yw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qn],delete e[go],delete e[Ah],delete e[_0],delete e[w0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jw(t){return t.tag===5||t.tag===3||t.tag===4}function Zg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ec));else if(r!==4&&(t=t.child,t!==null))for(Bh(t,e,n),t=t.sibling;t!==null;)Bh(t,e,n),t=t.sibling}function zh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zh(t,e,n),t=t.sibling;t!==null;)zh(t,e,n),t=t.sibling}var wt=null,Cn=!1;function br(t,e,n){for(n=n.child;n!==null;)Xw(t,e,n),n=n.sibling}function Xw(t,e,n){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(au,n)}catch{}switch(n.tag){case 5:Vt||Si(n,e);case 6:var r=wt,s=Cn;wt=null,br(t,e,n),wt=r,Cn=s,wt!==null&&(Cn?(t=wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(Cn?(t=wt,n=n.stateNode,t.nodeType===8?Nd(t.parentNode,n):t.nodeType===1&&Nd(t,n),uo(t)):Nd(wt,n.stateNode));break;case 4:r=wt,s=Cn,wt=n.stateNode.containerInfo,Cn=!0,br(t,e,n),wt=r,Cn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Fh(n,e,a),s=s.next}while(s!==r)}br(t,e,n);break;case 1:if(!Vt&&(Si(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){He(n,e,l)}br(t,e,n);break;case 21:br(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,br(t,e,n),Vt=r):br(t,e,n);break;default:br(t,e,n)}}function ey(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new M0),e.forEach(function(r){var s=q0.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:wt=l.stateNode,Cn=!1;break e;case 3:wt=l.stateNode.containerInfo,Cn=!0;break e;case 4:wt=l.stateNode.containerInfo,Cn=!0;break e}l=l.return}if(wt===null)throw Error(z(160));Xw(i,a,s),wt=null,Cn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){He(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zw(e,t),e=e.sibling}function Zw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),$n(t),r&4){try{Qa(3,t,t.return),mu(3,t)}catch(R){He(t,t.return,R)}try{Qa(5,t,t.return)}catch(R){He(t,t.return,R)}}break;case 1:Nn(e,t),$n(t),r&512&&n!==null&&Si(n,n.return);break;case 5:if(Nn(e,t),$n(t),r&512&&n!==null&&Si(n,n.return),t.flags&32){var s=t.stateNode;try{ao(s,"")}catch(R){He(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&E_(s,i),hh(l,a);var d=hh(l,i);for(a=0;a<u.length;a+=2){var m=u[a],p=u[a+1];m==="style"?A_(s,p):m==="dangerouslySetInnerHTML"?I_(s,p):m==="children"?ao(s,p):Nf(s,m,p,d)}switch(l){case"input":oh(s,i);break;case"textarea":T_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var k=i.value;k!=null?xi(s,!!i.multiple,k,!1):g!==!!i.multiple&&(i.defaultValue!=null?xi(s,!!i.multiple,i.defaultValue,!0):xi(s,!!i.multiple,i.multiple?[]:"",!1))}s[go]=i}catch(R){He(t,t.return,R)}}break;case 6:if(Nn(e,t),$n(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){He(t,t.return,R)}}break;case 3:if(Nn(e,t),$n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{uo(e.containerInfo)}catch(R){He(t,t.return,R)}break;case 4:Nn(e,t),$n(t);break;case 13:Nn(e,t),$n(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(am=Ze())),r&4&&ey(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(d=Vt)||m,Nn(e,t),Vt=d):Nn(e,t),$n(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(Q=t,m=t.child;m!==null;){for(p=Q=m;Q!==null;){switch(g=Q,k=g.child,g.tag){case 0:case 11:case 14:case 15:Qa(4,g,g.return);break;case 1:Si(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(R){He(r,n,R)}}break;case 5:Si(g,g.return);break;case 22:if(g.memoizedState!==null){ny(p);continue}}k!==null?(k.return=g,Q=k):ny(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=S_("display",a))}catch(R){He(t,t.return,R)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(R){He(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Nn(e,t),$n(t),r&4&&ey(t);break;case 21:break;default:Nn(e,t),$n(t)}}function $n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jw(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ao(s,""),r.flags&=-33);var i=Zg(t);zh(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Zg(t);Bh(t,l,a);break;default:throw Error(z(161))}}catch(u){He(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function L0(t,e,n){Q=t,eE(t)}function eE(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||jl;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Vt;l=jl;var d=Vt;if(jl=a,(Vt=u)&&!d)for(Q=s;Q!==null;)a=Q,u=a.child,a.tag===22&&a.memoizedState!==null?ry(s):u!==null?(u.return=a,Q=u):ry(s);for(;i!==null;)Q=i,eE(i),i=i.sibling;Q=s,jl=l,Vt=d}ty(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):ty(t)}}function ty(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||mu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:xn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Fg(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Fg(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&uo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Vt||e.flags&512&&Uh(e)}catch(g){He(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function ny(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function ry(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mu(4,e)}catch(u){He(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){He(e,s,u)}}var i=e.return;try{Uh(e)}catch(u){He(e,i,u)}break;case 5:var a=e.return;try{Uh(e)}catch(u){He(e,a,u)}}}catch(u){He(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var F0=Math.ceil,jc=Sr.ReactCurrentDispatcher,sm=Sr.ReactCurrentOwner,_n=Sr.ReactCurrentBatchConfig,Ee=0,mt=null,nt=null,kt=0,an=0,Ai=ds(0),lt=0,To=null,Us=0,pu=0,im=0,Ya=null,Wt=null,am=0,Gi=1/0,ar=null,Dc=!1,$h=null,Qr=null,Dl=!1,zr=null,Pc=0,Ja=0,Gh=null,ec=-1,tc=0;function $t(){return Ee&6?Ze():ec!==-1?ec:ec=Ze()}function Yr(t){return t.mode&1?Ee&2&&kt!==0?kt&-kt:T0.transition!==null?(tc===0&&(tc=L_()),tc):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:K_(t.type)),t):1}function Dn(t,e,n,r){if(50<Ja)throw Ja=0,Gh=null,Error(z(185));Po(t,n,r),(!(Ee&2)||t!==mt)&&(t===mt&&(!(Ee&2)&&(pu|=n),lt===4&&Mr(t,kt)),Zt(t,r),n===1&&Ee===0&&!(e.mode&1)&&(Gi=Ze()+500,du&&hs()))}function Zt(t,e){var n=t.callbackNode;TS(t,e);var r=yc(t,t===mt?kt:0);if(r===0)n!==null&&hg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hg(n),e===1)t.tag===0?E0(sy.bind(null,t)):uw(sy.bind(null,t)),y0(function(){!(Ee&6)&&hs()}),n=null;else{switch(F_(r)){case 1:n=jf;break;case 4:n=M_;break;case 16:n=gc;break;case 536870912:n=V_;break;default:n=gc}n=lE(n,tE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tE(t,e){if(ec=-1,tc=0,Ee&6)throw Error(z(327));var n=t.callbackNode;if(Di()&&t.callbackNode!==n)return null;var r=yc(t,t===mt?kt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Oc(t,r);else{e=r;var s=Ee;Ee|=2;var i=rE();(mt!==t||kt!==e)&&(ar=null,Gi=Ze()+500,Ds(t,e));do try{z0();break}catch(l){nE(t,l)}while(!0);Kf(),jc.current=i,Ee=s,nt!==null?e=0:(mt=null,kt=0,e=lt)}if(e!==0){if(e===2&&(s=yh(t),s!==0&&(r=s,e=Kh(t,s))),e===1)throw n=To,Ds(t,0),Mr(t,r),Zt(t,Ze()),n;if(e===6)Mr(t,r);else{if(s=t.current.alternate,!(r&30)&&!U0(s)&&(e=Oc(t,r),e===2&&(i=yh(t),i!==0&&(r=i,e=Kh(t,i))),e===1))throw n=To,Ds(t,0),Mr(t,r),Zt(t,Ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:As(t,Wt,ar);break;case 3:if(Mr(t,r),(r&130023424)===r&&(e=am+500-Ze(),10<e)){if(yc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Sh(As.bind(null,t,Wt,ar),e);break}As(t,Wt,ar);break;case 4:if(Mr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-jn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*F0(r/1960))-r,10<r){t.timeoutHandle=Sh(As.bind(null,t,Wt,ar),r);break}As(t,Wt,ar);break;case 5:As(t,Wt,ar);break;default:throw Error(z(329))}}}return Zt(t,Ze()),t.callbackNode===n?tE.bind(null,t):null}function Kh(t,e){var n=Ya;return t.current.memoizedState.isDehydrated&&(Ds(t,e).flags|=256),t=Oc(t,e),t!==2&&(e=Wt,Wt=n,e!==null&&qh(e)),t}function qh(t){Wt===null?Wt=t:Wt.push.apply(Wt,t)}function U0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Pn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mr(t,e){for(e&=~im,e&=~pu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jn(e),r=1<<n;t[n]=-1,e&=~r}}function sy(t){if(Ee&6)throw Error(z(327));Di();var e=yc(t,0);if(!(e&1))return Zt(t,Ze()),null;var n=Oc(t,e);if(t.tag!==0&&n===2){var r=yh(t);r!==0&&(e=r,n=Kh(t,r))}if(n===1)throw n=To,Ds(t,0),Mr(t,e),Zt(t,Ze()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,As(t,Wt,ar),Zt(t,Ze()),null}function om(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(Gi=Ze()+500,du&&hs())}}function Bs(t){zr!==null&&zr.tag===0&&!(Ee&6)&&Di();var e=Ee;Ee|=1;var n=_n.transition,r=Ne;try{if(_n.transition=null,Ne=1,t)return t()}finally{Ne=r,_n.transition=n,Ee=e,!(Ee&6)&&hs()}}function lm(){an=Ai.current,Le(Ai)}function Ds(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,g0(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch(zf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tc();break;case 3:zi(),Le(Jt),Le(Ft),Jf();break;case 5:Yf(r);break;case 4:zi();break;case 13:Le(ze);break;case 19:Le(ze);break;case 10:qf(r.type._context);break;case 22:case 23:lm()}n=n.return}if(mt=t,nt=t=Jr(t.current,null),kt=an=e,lt=0,To=null,im=pu=Us=0,Wt=Ya=null,Cs!==null){for(e=0;e<Cs.length;e++)if(n=Cs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Cs=null}return t}function nE(t,e){do{var n=nt;try{if(Kf(),Jl.current=bc,Rc){for(var r=$e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Rc=!1}if(Fs=0,ft=ot=$e=null,Wa=!1,_o=0,sm.current=null,n===null||n.return===null){lt=1,To=e,nt=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=kt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=l,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var k=Kg(a);if(k!==null){k.flags&=-257,qg(k,a,l,i,e),k.mode&1&&Gg(i,d,e),e=k,u=d;var C=e.updateQueue;if(C===null){var R=new Set;R.add(u),e.updateQueue=R}else C.add(u);break e}else{if(!(e&1)){Gg(i,d,e),cm();break e}u=Error(z(426))}}else if(Ue&&l.mode&1){var j=Kg(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),qg(j,a,l,i,e),$f($i(u,l));break e}}i=u=$i(u,l),lt!==4&&(lt=2),Ya===null?Ya=[i]:Ya.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=Fw(i,u,e);Lg(i,w);break e;case 1:l=u;var v=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Qr===null||!Qr.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=Uw(i,l,e);Lg(i,P);break e}}i=i.return}while(i!==null)}iE(n)}catch(U){e=U,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function rE(){var t=jc.current;return jc.current=bc,t===null?bc:t}function cm(){(lt===0||lt===3||lt===2)&&(lt=4),mt===null||!(Us&268435455)&&!(pu&268435455)||Mr(mt,kt)}function Oc(t,e){var n=Ee;Ee|=2;var r=rE();(mt!==t||kt!==e)&&(ar=null,Ds(t,e));do try{B0();break}catch(s){nE(t,s)}while(!0);if(Kf(),Ee=n,jc.current=r,nt!==null)throw Error(z(261));return mt=null,kt=0,lt}function B0(){for(;nt!==null;)sE(nt)}function z0(){for(;nt!==null&&!fS();)sE(nt)}function sE(t){var e=oE(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?iE(t):nt=e,sm.current=null}function iE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=O0(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,nt=null;return}}else if(n=P0(n,e,an),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);lt===0&&(lt=5)}function As(t,e,n){var r=Ne,s=_n.transition;try{_n.transition=null,Ne=1,$0(t,e,n,r)}finally{_n.transition=s,Ne=r}return null}function $0(t,e,n,r){do Di();while(zr!==null);if(Ee&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(kS(t,i),t===mt&&(nt=mt=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dl||(Dl=!0,lE(gc,function(){return Di(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=_n.transition,_n.transition=null;var a=Ne;Ne=1;var l=Ee;Ee|=4,sm.current=null,V0(t,n),Zw(n,t),c0(kh),vc=!!Th,kh=Th=null,t.current=n,L0(n),mS(),Ee=l,Ne=a,_n.transition=i}else t.current=n;if(Dl&&(Dl=!1,zr=t,Pc=s),i=t.pendingLanes,i===0&&(Qr=null),yS(n.stateNode),Zt(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Dc)throw Dc=!1,t=$h,$h=null,t;return Pc&1&&t.tag!==0&&Di(),i=t.pendingLanes,i&1?t===Gh?Ja++:(Ja=0,Gh=t):Ja=0,hs(),null}function Di(){if(zr!==null){var t=F_(Pc),e=_n.transition,n=Ne;try{if(_n.transition=null,Ne=16>t?16:t,zr===null)var r=!1;else{if(t=zr,zr=null,Pc=0,Ee&6)throw Error(z(331));var s=Ee;for(Ee|=4,Q=t.current;Q!==null;){var i=Q,a=i.child;if(Q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Q=d;Q!==null;){var m=Q;switch(m.tag){case 0:case 11:case 15:Qa(8,m,i)}var p=m.child;if(p!==null)p.return=m,Q=p;else for(;Q!==null;){m=Q;var g=m.sibling,k=m.return;if(Yw(m),m===d){Q=null;break}if(g!==null){g.return=k,Q=g;break}Q=k}}}var C=i.alternate;if(C!==null){var R=C.child;if(R!==null){C.child=null;do{var j=R.sibling;R.sibling=null,R=j}while(R!==null)}}Q=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Q=a;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qa(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Q=w;break e}Q=i.return}}var v=t.current;for(Q=v;Q!==null;){a=Q;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,Q=I;else e:for(a=v;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:mu(9,l)}}catch(U){He(l,l.return,U)}if(l===a){Q=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,Q=P;break e}Q=l.return}}if(Ee=s,hs(),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(au,t)}catch{}r=!0}return r}finally{Ne=n,_n.transition=e}}return!1}function iy(t,e,n){e=$i(n,e),e=Fw(t,e,1),t=Wr(t,e,1),e=$t(),t!==null&&(Po(t,1,e),Zt(t,e))}function He(t,e,n){if(t.tag===3)iy(t,t,n);else for(;e!==null;){if(e.tag===3){iy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qr===null||!Qr.has(r))){t=$i(n,t),t=Uw(e,t,1),e=Wr(e,t,1),t=$t(),e!==null&&(Po(e,1,t),Zt(e,t));break}}e=e.return}}function G0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(kt&n)===n&&(lt===4||lt===3&&(kt&130023424)===kt&&500>Ze()-am?Ds(t,0):im|=n),Zt(t,e)}function aE(t,e){e===0&&(t.mode&1?(e=kl,kl<<=1,!(kl&130023424)&&(kl=4194304)):e=1);var n=$t();t=yr(t,e),t!==null&&(Po(t,e,n),Zt(t,n))}function K0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),aE(t,n)}function q0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),aE(t,n)}var oE;oE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jt.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,D0(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,Ue&&e.flags&1048576&&dw(e,Sc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zl(t,e),t=e.pendingProps;var s=Fi(e,Ft.current);ji(e,n),s=Zf(null,e,r,t,s,n);var i=em();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(r)?(i=!0,kc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Wf(e),s.updater=fu,e.stateNode=s,s._reactInternals=e,jh(e,r,t,n),e=Oh(null,e,r,!0,i,n)):(e.tag=0,Ue&&i&&Bf(e),zt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=W0(r),t=xn(r,t),s){case 0:e=Ph(null,e,r,t,n);break e;case 1:e=Qg(null,e,r,t,n);break e;case 11:e=Hg(null,e,r,t,n);break e;case 14:e=Wg(null,e,r,xn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Ph(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Qg(t,e,r,s,n);case 3:e:{if(Gw(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,yw(t,e),xc(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=$i(Error(z(423)),e),e=Yg(t,e,r,n,s);break e}else if(r!==s){s=$i(Error(z(424)),e),e=Yg(t,e,r,n,s);break e}else for(on=Hr(e.stateNode.containerInfo.firstChild),cn=e,Ue=!0,Rn=null,n=pw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ui(),r===s){e=vr(t,e,n);break e}zt(t,e,r,n)}e=e.child}return e;case 5:return vw(e),t===null&&Ch(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Ih(r,s)?a=null:i!==null&&Ih(r,i)&&(e.flags|=32),$w(t,e),zt(t,e,a,n),e.child;case 6:return t===null&&Ch(e),null;case 13:return Kw(t,e,n);case 4:return Qf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Bi(e,null,r,n):zt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Hg(t,e,r,s,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,je(Ac,r._currentValue),r._currentValue=a,i!==null)if(Pn(i.value,a)){if(i.children===s.children&&!Jt.current){e=vr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=hr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Rh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Rh(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}zt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ji(e,n),s=Tn(s),r=r(s),e.flags|=1,zt(t,e,r,n),e.child;case 14:return r=e.type,s=xn(r,e.pendingProps),s=xn(r.type,s),Wg(t,e,r,s,n);case 15:return Bw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Zl(t,e),e.tag=1,Xt(r)?(t=!0,kc(e)):t=!1,ji(e,n),Lw(e,r,s),jh(e,r,s,n),Oh(null,e,r,!0,t,n);case 19:return qw(t,e,n);case 22:return zw(t,e,n)}throw Error(z(156,e.tag))};function lE(t,e){return O_(t,e)}function H0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,e,n,r){return new H0(t,e,n,r)}function um(t){return t=t.prototype,!(!t||!t.isReactComponent)}function W0(t){if(typeof t=="function")return um(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cf)return 11;if(t===Rf)return 14}return 2}function Jr(t,e){var n=t.alternate;return n===null?(n=vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nc(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")um(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case gi:return Ps(n.children,s,i,e);case xf:a=8,s|=8;break;case nh:return t=vn(12,n,e,s|2),t.elementType=nh,t.lanes=i,t;case rh:return t=vn(13,n,e,s),t.elementType=rh,t.lanes=i,t;case sh:return t=vn(19,n,e,s),t.elementType=sh,t.lanes=i,t;case v_:return gu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case g_:a=10;break e;case y_:a=9;break e;case Cf:a=11;break e;case Rf:a=14;break e;case Dr:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=vn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ps(t,e,n,r){return t=vn(7,t,r,e),t.lanes=n,t}function gu(t,e,n,r){return t=vn(22,t,r,e),t.elementType=v_,t.lanes=n,t.stateNode={isHidden:!1},t}function Od(t,e,n){return t=vn(6,t,null,e),t.lanes=n,t}function Md(t,e,n){return e=vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Q0(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gd(0),this.expirationTimes=gd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dm(t,e,n,r,s,i,a,l,u){return t=new Q0(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=vn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wf(i),t}function Y0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cE(t){if(!t)return rs;t=t._reactInternals;e:{if(Qs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Xt(n))return cw(t,n,e)}return e}function uE(t,e,n,r,s,i,a,l,u){return t=dm(n,r,!0,t,s,i,a,l,u),t.context=cE(null),n=t.current,r=$t(),s=Yr(n),i=hr(r,s),i.callback=e??null,Wr(n,i,s),t.current.lanes=s,Po(t,s,r),Zt(t,r),t}function yu(t,e,n,r){var s=e.current,i=$t(),a=Yr(s);return n=cE(n),e.context===null?e.context=n:e.pendingContext=n,e=hr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wr(s,e,a),t!==null&&(Dn(t,s,a,i),Yl(t,s,a)),a}function Mc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ay(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hm(t,e){ay(t,e),(t=t.alternate)&&ay(t,e)}function J0(){return null}var dE=typeof reportError=="function"?reportError:function(t){console.error(t)};function fm(t){this._internalRoot=t}vu.prototype.render=fm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));yu(t,e,null,null)};vu.prototype.unmount=fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bs(function(){yu(null,t,null,null)}),e[gr]=null}};function vu(t){this._internalRoot=t}vu.prototype.unstable_scheduleHydration=function(t){if(t){var e=z_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Or.length&&e!==0&&e<Or[n].priority;n++);Or.splice(n,0,t),n===0&&G_(t)}};function mm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oy(){}function X0(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Mc(a);i.call(d)}}var a=uE(e,r,t,0,null,!1,!1,"",oy);return t._reactRootContainer=a,t[gr]=a.current,mo(t.nodeType===8?t.parentNode:t),Bs(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Mc(u);l.call(d)}}var u=dm(t,0,!1,null,null,!1,!1,"",oy);return t._reactRootContainer=u,t[gr]=u.current,mo(t.nodeType===8?t.parentNode:t),Bs(function(){yu(e,u,n,r)}),u}function wu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=Mc(a);l.call(u)}}yu(e,a,t,s)}else a=X0(n,e,t,s,r);return Mc(a)}U_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Oa(e.pendingLanes);n!==0&&(Df(e,n|1),Zt(e,Ze()),!(Ee&6)&&(Gi=Ze()+500,hs()))}break;case 13:Bs(function(){var r=yr(t,1);if(r!==null){var s=$t();Dn(r,t,1,s)}}),hm(t,1)}};Pf=function(t){if(t.tag===13){var e=yr(t,134217728);if(e!==null){var n=$t();Dn(e,t,134217728,n)}hm(t,134217728)}};B_=function(t){if(t.tag===13){var e=Yr(t),n=yr(t,e);if(n!==null){var r=$t();Dn(n,t,e,r)}hm(t,e)}};z_=function(){return Ne};$_=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};mh=function(t,e,n){switch(e){case"input":if(oh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=uu(r);if(!s)throw Error(z(90));w_(r),oh(r,s)}}}break;case"textarea":T_(t,n);break;case"select":e=n.value,e!=null&&xi(t,!!n.multiple,e,!1)}};C_=om;R_=Bs;var Z0={usingClientEntryPoint:!1,Events:[Mo,wi,uu,N_,x_,om]},ja={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eA={bundleType:ja.bundleType,version:ja.version,rendererPackageName:ja.rendererPackageName,rendererConfig:ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=D_(t),t===null?null:t.stateNode},findFiberByHostInstance:ja.findFiberByHostInstance||J0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pl.isDisabled&&Pl.supportsFiber)try{au=Pl.inject(eA),Hn=Pl}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z0;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mm(e))throw Error(z(200));return Y0(t,e,null,n)};hn.createRoot=function(t,e){if(!mm(t))throw Error(z(299));var n=!1,r="",s=dE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=dm(t,1,!1,null,null,n,!1,r,s),t[gr]=e.current,mo(t.nodeType===8?t.parentNode:t),new fm(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=D_(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return Bs(t)};hn.hydrate=function(t,e,n){if(!_u(e))throw Error(z(200));return wu(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!mm(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=dE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=uE(e,null,t,1,n??null,s,!1,i,a),t[gr]=e.current,mo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new vu(e)};hn.render=function(t,e,n){if(!_u(e))throw Error(z(200));return wu(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!_u(t))throw Error(z(40));return t._reactRootContainer?(Bs(function(){wu(null,null,t,!1,function(){t._reactRootContainer=null,t[gr]=null})}),!0):!1};hn.unstable_batchedUpdates=om;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_u(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return wu(t,e,n,!1,r)};hn.version="18.3.1-next-f1338f8080-20240426";function hE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hE)}catch(t){console.error(t)}}hE(),h_.exports=hn;var tA=h_.exports,ly=tA;eh.createRoot=ly.createRoot,eh.hydrateRoot=ly.hydrateRoot;const nA=()=>{};var cy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},rA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},mE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,k=d&63;u||(k=64,a||(g=64)),r.push(n[m],n[p],n[g],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new sA;const g=i<<2|l>>4;if(r.push(g),d!==64){const k=l<<4&240|d>>2;if(r.push(k),p!==64){const C=d<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iA=function(t){const e=fE(t);return mE.encodeByteArray(e,!0)},Vc=function(t){return iA(t).replace(/\./g,"")},pE=function(t){try{return mE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=()=>aA().__FIREBASE_DEFAULTS__,lA=()=>{if(typeof process>"u"||typeof cy>"u")return;const t=cy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pE(t[1]);return e&&JSON.parse(e)},Eu=()=>{try{return nA()||oA()||lA()||cA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gE=t=>{var e,n;return(n=(e=Eu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},uA=t=>{const e=gE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yE=()=>{var t;return(t=Eu())==null?void 0:t.config},vE=t=>{var e;return(e=Eu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _E(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Vc(JSON.stringify(n)),Vc(JSON.stringify(a)),""].join(".")}const Xa={};function fA(){const t={prod:[],emulator:[]};for(const e of Object.keys(Xa))Xa[e]?t.emulator.push(e):t.prod.push(e);return t}function mA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let uy=!1;function wE(t,e){if(typeof window>"u"||typeof document>"u"||!ta(window.location.host)||Xa[t]===e||Xa[t]||uy)return;Xa[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=fA().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,k){g.setAttribute("width","24"),g.setAttribute("id",k),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{uy=!0,a()},g}function m(g,k){g.setAttribute("id",k),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=mA(r),k=n("text"),C=document.getElementById(k)||document.createElement("span"),R=n("learnmore"),j=document.getElementById(R)||document.createElement("a"),w=n("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;l(I),m(j,R);const P=d();u(v,w),I.append(v,C,j,P),document.body.appendChild(I)}i?(C.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function gA(){var e;const t=(e=Eu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pm(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _A(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wA(){return!gA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gm(){try{return typeof indexedDB=="object"}catch{return!1}}function ym(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function EE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="FirebaseError";class Fn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EA,Object.setPrototypeOf(this,Fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ys.prototype.create)}}class Ys{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?TA(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Fn(s,l,r)}}function TA(t,e){return t.replace(kA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const kA=/\{\$([^}]+)}/g;function IA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _r(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(dy(i)&&dy(a)){if(!_r(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function dy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Va(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function La(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SA(t,e){const n=new AA(t,e);return n.subscribe.bind(n)}class AA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");NA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Vd),s.error===void 0&&(s.error=Vd),s.complete===void 0&&(s.complete=Vd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=1e3,CA=2,RA=4*60*60*1e3,bA=.5;function hy(t,e=xA,n=CA){const r=e*Math.pow(n,t),s=Math.round(bA*r*(Math.random()-.5)*2);return Math.min(RA,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t){return t&&t._delegate?t._delegate:t}class On{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PA(e))try{this.getOrInitializeService({instanceIdentifier:Ns})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ns){return this.instances.has(e)}getOptions(e=Ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:DA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ns){return this.component?this.component.multipleInstances?e:Ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DA(t){return t===Ns?void 0:t}function PA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const MA={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},VA=me.INFO,LA={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},FA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=LA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tu{constructor(e){this.name=e,this._logLevel=VA,this._logHandler=FA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const UA=(t,e)=>e.some(n=>t instanceof n);let fy,my;function BA(){return fy||(fy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zA(){return my||(my=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TE=new WeakMap,Hh=new WeakMap,kE=new WeakMap,Ld=new WeakMap,vm=new WeakMap;function $A(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Xr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&TE.set(n,t)}).catch(()=>{}),vm.set(e,t),e}function GA(t){if(Hh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Hh.set(t,e)}let Wh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KA(t){Wh=t(Wh)}function qA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fd(this),e,...n);return kE.set(r,e.sort?e.sort():[e]),Xr(r)}:zA().includes(t)?function(...e){return t.apply(Fd(this),e),Xr(TE.get(this))}:function(...e){return Xr(t.apply(Fd(this),e))}}function HA(t){return typeof t=="function"?qA(t):(t instanceof IDBTransaction&&GA(t),UA(t,BA())?new Proxy(t,Wh):t)}function Xr(t){if(t instanceof IDBRequest)return $A(t);if(Ld.has(t))return Ld.get(t);const e=HA(t);return e!==t&&(Ld.set(t,e),vm.set(e,t)),e}const Fd=t=>vm.get(t);function IE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Xr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Xr(a.result),u.oldVersion,u.newVersion,Xr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const WA=["get","getKey","getAll","getAllKeys","count"],QA=["put","add","delete","clear"],Ud=new Map;function py(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ud.get(e))return Ud.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=QA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||WA.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Ud.set(e,i),i}KA(t=>({...t,get:(e,n,r)=>py(e,n)||t.get(e,n,r),has:(e,n)=>!!py(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function JA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qh="@firebase/app",gy="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new Tu("@firebase/app"),XA="@firebase/app-compat",ZA="@firebase/analytics-compat",eN="@firebase/analytics",tN="@firebase/app-check-compat",nN="@firebase/app-check",rN="@firebase/auth",sN="@firebase/auth-compat",iN="@firebase/database",aN="@firebase/data-connect",oN="@firebase/database-compat",lN="@firebase/functions",cN="@firebase/functions-compat",uN="@firebase/installations",dN="@firebase/installations-compat",hN="@firebase/messaging",fN="@firebase/messaging-compat",mN="@firebase/performance",pN="@firebase/performance-compat",gN="@firebase/remote-config",yN="@firebase/remote-config-compat",vN="@firebase/storage",_N="@firebase/storage-compat",wN="@firebase/firestore",EN="@firebase/ai",TN="@firebase/firestore-compat",kN="firebase",IN="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh="[DEFAULT]",SN={[Qh]:"fire-core",[XA]:"fire-core-compat",[eN]:"fire-analytics",[ZA]:"fire-analytics-compat",[nN]:"fire-app-check",[tN]:"fire-app-check-compat",[rN]:"fire-auth",[sN]:"fire-auth-compat",[iN]:"fire-rtdb",[aN]:"fire-data-connect",[oN]:"fire-rtdb-compat",[lN]:"fire-fn",[cN]:"fire-fn-compat",[uN]:"fire-iid",[dN]:"fire-iid-compat",[hN]:"fire-fcm",[fN]:"fire-fcm-compat",[mN]:"fire-perf",[pN]:"fire-perf-compat",[gN]:"fire-rc",[yN]:"fire-rc-compat",[vN]:"fire-gcs",[_N]:"fire-gcs-compat",[wN]:"fire-fst",[TN]:"fire-fst-compat",[EN]:"fire-vertex","fire-js":"fire-js",[kN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new Map,AN=new Map,Jh=new Map;function yy(t,e){try{t.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tr(t){const e=t.name;if(Jh.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;Jh.set(e,t);for(const n of Lc.values())yy(n,t);for(const n of AN.values())yy(n,t);return!0}function Js(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new Ys("app","Firebase",NN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new On("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=IN;function SE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Yh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Zr.create("bad-app-name",{appName:String(s)});if(n||(n=yE()),!n)throw Zr.create("no-options");const i=Lc.get(s);if(i){if(_r(n,i.options)&&_r(r,i.config))return i;throw Zr.create("duplicate-app",{appName:s})}const a=new OA(s);for(const u of Jh.values())a.addComponent(u);const l=new xN(n,r,a);return Lc.set(s,l),l}function _m(t=Yh){const e=Lc.get(t);if(!e&&t===Yh&&yE())return SE();if(!e)throw Zr.create("no-app",{appName:t});return e}function wn(t,e,n){let r=SN[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(a.join(" "));return}tr(new On(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="firebase-heartbeat-database",RN=1,ko="firebase-heartbeat-store";let Bd=null;function AE(){return Bd||(Bd=IE(CN,RN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ko)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),Bd}async function bN(t){try{const n=(await AE()).transaction(ko),r=await n.objectStore(ko).get(NE(t));return await n.done,r}catch(e){if(e instanceof Fn)wr.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function vy(t,e){try{const r=(await AE()).transaction(ko,"readwrite");await r.objectStore(ko).put(e,NE(t)),await r.done}catch(n){if(n instanceof Fn)wr.warn(n.message);else{const r=Zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(r.message)}}}function NE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=1024,DN=30;class PN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=_y();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>DN){const a=VN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_y(),{heartbeatsToSend:r,unsentEntries:s}=ON(this._heartbeatsCache.heartbeats),i=Vc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return wr.warn(n),""}}}function _y(){return new Date().toISOString().substring(0,10)}function ON(t,e=jN){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),wy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),wy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class MN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gm()?ym().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function wy(t){return Vc(JSON.stringify({version:2,heartbeats:t})).length}function VN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){tr(new On("platform-logger",e=>new YA(e),"PRIVATE")),tr(new On("heartbeat",e=>new PN(e),"PRIVATE")),wn(Qh,gy,t),wn(Qh,gy,"esm2020"),wn("fire-js","")}LN("");function xE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FN=xE,CE=new Ys("auth","Firebase",xE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new Tu("@firebase/auth");function UN(t,...e){Fc.logLevel<=me.WARN&&Fc.warn(`Auth (${na}): ${t}`,...e)}function rc(t,...e){Fc.logLevel<=me.ERROR&&Fc.error(`Auth (${na}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,...e){throw wm(t,...e)}function Qn(t,...e){return wm(t,...e)}function RE(t,e,n){const r={...FN(),[e]:n};return new Ys("auth","Firebase",r).create(e,{appName:t.name})}function fr(t){return RE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return CE.create(t,...e)}function re(t,e,...n){if(!t)throw wm(e,...n)}function ur(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rc(e),new Error(e)}function Er(t,e){t||ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function BN(){return Ey()==="http:"||Ey()==="https:"}function Ey(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BN()||pm()||"connection"in navigator)?navigator.onLine:!0}function $N(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Er(n>e,"Short delay should be less than long delay!"),this.isMobile=pA()||vA()}get(){return zN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e){Er(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qN=new Fo(3e4,6e4);function fs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ms(t,e,n,r,s={}){return jE(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=Lo({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return yA()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&ta(t.emulatorConfig.host)&&(d.credentials="include"),bE.fetch()(await DE(t,t.config.apiHost,n,l),d)})}async function jE(t,e,n){t._canInitEmulator=!1;const r={...GN,...e};try{const s=new WN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Ol(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ol(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Ol(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Ol(t,"user-disabled",a);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw RE(t,m,d);Mn(t,m)}}catch(s){if(s instanceof Fn)throw s;Mn(t,"network-request-failed",{message:String(s)})}}async function Uo(t,e,n,r,s={}){const i=await ms(t,e,n,r,s);return"mfaPendingCredential"in i&&Mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function DE(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?Em(t.config,s):`${t.config.apiScheme}://${s}`;return KN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function HN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qn(this.auth,"network-request-failed")),qN.get())})}}function Ol(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Qn(t,e,r);return s.customData._tokenResponse=n,s}function Ty(t){return t!==void 0&&t.enterprise!==void 0}class QN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YN(t,e){return ms(t,"GET","/v2/recaptchaConfig",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t,e){return ms(t,"POST","/v1/accounts:delete",e)}async function Uc(t,e){return ms(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XN(t,e=!1){const n=et(t),r=await n.getIdToken(e),s=Tm(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Za(zd(s.auth_time)),issuedAtTime:Za(zd(s.iat)),expirationTime:Za(zd(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function zd(t){return Number(t)*1e3}function Tm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rc("JWT malformed, contained fewer than 3 sections"),null;try{const s=pE(n);return s?JSON.parse(s):(rc("Failed to decode base64 JWT payload"),null)}catch(s){return rc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ky(t){const e=Tm(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fn&&ZN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ZN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Za(this.lastLoginAt),this.creationTime=Za(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Io(t,Uc(e,{idToken:n}));re(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?PE(s.providerUserInfo):[],a=nx(t.providerData,i),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Zh(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function tx(t){const e=et(t);await Bc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nx(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function PE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(t,e){const n=await jE(t,{},async()=>{const r=Lo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await DE(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&ta(t.emulatorConfig.host)&&(u.credentials="include"),bE.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sx(t,e){return ms(t,"POST","/v2/accounts:revokeToken",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ky(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=ky(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await rx(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Pi;return r&&(re(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pi,this.toJSON())}_performRefresh(){return ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class bn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new ex(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Zh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Io(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XN(this,e)}reload(){return tx(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gn(this.auth.app))return Promise.reject(fr(this.auth));const e=await this.getIdToken();return await Io(this,JN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:k,providerData:C,stsTokenManager:R}=n;re(p&&R,e,"internal-error");const j=Pi.fromJSON(this.name,R);re(typeof p=="string",e,"internal-error"),jr(r,e.name),jr(s,e.name),re(typeof g=="boolean",e,"internal-error"),re(typeof k=="boolean",e,"internal-error"),jr(i,e.name),jr(a,e.name),jr(l,e.name),jr(u,e.name),jr(d,e.name),jr(m,e.name);const w=new bn({uid:p,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:k,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:j,createdAt:d,lastLoginAt:m});return C&&Array.isArray(C)&&(w.providerData=C.map(v=>({...v}))),u&&(w._redirectEventId=u),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new Pi;s.updateFromServerResponse(n);const i=new bn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Bc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];re(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?PE(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Pi;l.updateFromIdToken(r);const u=new bn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Zh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=new Map;function dr(t){Er(t instanceof Function,"Expected a class definition");let e=Iy.get(t);return e?(Er(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Iy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OE.type="NONE";const Sy=OE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t,e,n){return`firebase:${t}:${e}:${n}`}class Oi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=sc(this.userKey,s.apiKey,i),this.fullPersistenceKey=sc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Uc(this.auth,{idToken:e}).catch(()=>{});return n?bn._fromGetAccountInfoResponse(this.auth,n,e):null}return bn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Oi(dr(Sy),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||dr(Sy);const a=sc(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const m=await d._get(a);if(m){let p;if(typeof m=="string"){const g=await Uc(e,{idToken:m}).catch(()=>{});if(!g)break;p=await bn._fromGetAccountInfoResponse(e,g,m)}else p=bn._fromJSON(e,m);d!==i&&(l=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Oi(i,e,r):(i=u[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new Oi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ME(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BE(e))return"Blackberry";if(zE(e))return"Webos";if(VE(e))return"Safari";if((e.includes("chrome/")||LE(e))&&!e.includes("edge/"))return"Chrome";if(UE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ME(t=Ut()){return/firefox\//i.test(t)}function VE(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LE(t=Ut()){return/crios\//i.test(t)}function FE(t=Ut()){return/iemobile/i.test(t)}function UE(t=Ut()){return/android/i.test(t)}function BE(t=Ut()){return/blackberry/i.test(t)}function zE(t=Ut()){return/webos/i.test(t)}function km(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ix(t=Ut()){var e;return km(t)&&!!((e=window.navigator)!=null&&e.standalone)}function ax(){return _A()&&document.documentMode===10}function $E(t=Ut()){return km(t)||UE(t)||zE(t)||BE(t)||/windows phone/i.test(t)||FE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t,e=[]){let n;switch(t){case"Browser":n=Ay(Ut());break;case"Worker":n=`${Ay(Ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${na}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const u=e(i);a(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lx(t,e={}){return ms(t,"GET","/v2/passwordPolicy",fs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=6;class ux{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??cx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ny(this),this.idTokenSubscription=new Ny(this),this.beforeStateQueue=new ox(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Oi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Uc(this,{idToken:e}),r=await bn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(gn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$N()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gn(this.app))return Promise.reject(fr(this));const n=e?et(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gn(this.app)?Promise.reject(fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gn(this.app)?Promise.reject(fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lx(this),n=new ux(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ys("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&dr(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await Oi.create(this,[dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&UN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Xs(t){return et(t)}class Ny{constructor(e){this.auth=e,this.observer=null,this.addObserver=SA(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ku={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hx(t){ku=t}function KE(t){return ku.loadJS(t)}function fx(){return ku.recaptchaEnterpriseScript}function mx(){return ku.gapiScript}function px(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class gx{constructor(){this.enterprise=new yx}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class yx{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const vx="recaptcha-enterprise",qE="NO_RECAPTCHA";class _x{constructor(e){this.type=vx,this.auth=Xs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{YN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new QN(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,a,l){const u=window.grecaptcha;Ty(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(qE)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gx().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&Ty(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=fx();u.length!==0&&(u+=l),KE(u).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function xy(t,e,n,r=!1,s=!1){const i=new _x(t);let a;if(s)a=qE;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ef(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await xy(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await xy(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t,e){const n=Js(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(_r(i,e??{}))return s;Mn(s,"already-initialized")}return n.initialize({options:e})}function Ex(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(dr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Tx(t,e,n){const r=Xs(t);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=HE(e),{host:a,port:l}=kx(e),u=l===null?"":`:${l}`,d={url:`${i}//${a}${u}/`},m=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(_r(d,r.config.emulator)&&_r(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,ta(a)?(_E(`${i}//${a}${u}`),wE("Auth",!0)):Ix()}function HE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kx(t){const e=HE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Cy(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Cy(a)}}}function Cy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Ix(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ur("not implemented")}_getIdTokenResponse(e){return ur("not implemented")}_linkToIdToken(e,n){return ur("not implemented")}_getReauthenticationResolver(e){return ur("not implemented")}}async function Sx(t,e){return ms(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(t,e){return Uo(t,"POST","/v1/accounts:signInWithPassword",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(t,e){return Uo(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}async function xx(t,e){return Uo(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends Im{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new So(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new So(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ef(e,n,"signInWithPassword",Ax);case"emailLink":return Nx(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ef(e,r,"signUpPassword",Sx);case"emailLink":return xx(e,{idToken:n,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mi(t,e){return Uo(t,"POST","/v1/accounts:signInWithIdp",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="http://localhost";class zs extends Im{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new zs(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Mi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Mi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Mi(e,n)}buildRequest(){const e={requestUri:Cx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Lo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bx(t){const e=Va(La(t)).link,n=e?Va(La(e)).deep_link_id:null,r=Va(La(t)).deep_link_id;return(r?Va(La(r)).link:null)||r||n||e||t}class Sm{constructor(e){const n=Va(La(e)),r=n.apiKey??null,s=n.oobCode??null,i=Rx(n.mode??null);re(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=bx(e);try{return new Sm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.providerId=ra.PROVIDER_ID}static credential(e,n){return So._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Sm.parseLink(n);return re(r,"argument-error"),So._fromEmailAndCode(e,r.code,r.tenantId)}}ra.PROVIDER_ID="password";ra.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ra.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends WE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Bo{constructor(){super("facebook.com")}static credential(e){return zs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Bo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zs._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Lr.credential(n,r)}catch{return null}}}Lr.GOOGLE_SIGN_IN_METHOD="google.com";Lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends Bo{constructor(){super("github.com")}static credential(e){return zs._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fr.credential(e.oauthAccessToken)}catch{return null}}}Fr.GITHUB_SIGN_IN_METHOD="github.com";Fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Bo{constructor(){super("twitter.com")}static credential(e,n){return zs._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ur.credential(n,r)}catch{return null}}}Ur.TWITTER_SIGN_IN_METHOD="twitter.com";Ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(t,e){return Uo(t,"POST","/v1/accounts:signUp",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await bn._fromIdTokenResponse(e,r,s),a=Ry(r);return new $s({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Ry(r);return new $s({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Ry(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Fn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,zc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new zc(e,n,r,s)}}function QE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?zc._fromErrorAndOperation(t,i,e,r):i})}async function Dx(t,e,n=!1){const r=await Io(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return $s._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Px(t,e,n=!1){const{auth:r}=t;if(gn(r.app))return Promise.reject(fr(r));const s="reauthenticate";try{const i=await Io(t,QE(r,s,e,t),n);re(i.idToken,r,"internal-error");const a=Tm(i.idToken);re(a,r,"internal-error");const{sub:l}=a;return re(t.uid===l,r,"user-mismatch"),$s._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Mn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YE(t,e,n=!1){if(gn(t.app))return Promise.reject(fr(t));const r="signIn",s=await QE(t,r,e),i=await $s._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Ox(t,e){return YE(Xs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JE(t){const e=Xs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Mx(t,e,n){if(gn(t.app))return Promise.reject(fr(t));const r=Xs(t),a=await ef(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jx).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&JE(t),u}),l=await $s._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function Vx(t,e,n){return gn(t.app)?Promise.reject(fr(t)):Ox(et(t),ra.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&JE(t),r})}function Lx(t,e,n,r){return et(t).onIdTokenChanged(e,n,r)}function Fx(t,e,n){return et(t).beforeAuthStateChanged(e,n)}function Ux(t,e,n,r){return et(t).onAuthStateChanged(e,n,r)}function Bx(t){return et(t).signOut()}const $c="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($c,"1"),this.storage.removeItem($c),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=1e3,$x=10;class ZE extends XE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$E(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);ax()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,$x):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZE.type="LOCAL";const Gx=ZE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends XE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}eT.type="SESSION";const tT=eT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Iu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),u=await Kx(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Iu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,u)=>{const d=Am("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(m),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return window}function Hx(t){Yn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(){return typeof Yn().WorkerGlobalScope<"u"&&typeof Yn().importScripts=="function"}async function Wx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Qx(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Yx(){return nT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firebaseLocalStorageDb",Jx=1,Gc="firebaseLocalStorage",sT="fbase_key";class zo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Su(t,e){return t.transaction([Gc],e?"readwrite":"readonly").objectStore(Gc)}function Xx(){const t=indexedDB.deleteDatabase(rT);return new zo(t).toPromise()}function tf(){const t=indexedDB.open(rT,Jx);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gc,{keyPath:sT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gc)?e(r):(r.close(),await Xx(),e(await tf()))})})}async function by(t,e,n){const r=Su(t,!0).put({[sT]:e,value:n});return new zo(r).toPromise()}async function Zx(t,e){const n=Su(t,!1).get(e),r=await new zo(n).toPromise();return r===void 0?null:r.value}function jy(t,e){const n=Su(t,!0).delete(e);return new zo(n).toPromise()}const eC=800,tC=3;class iT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>tC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Iu._getInstance(Yx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Wx(),!this.activeServiceWorker)return;this.sender=new qx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Qx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tf();return await by(e,$c,"1"),await jy(e,$c),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>by(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Zx(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Su(s,!1).getAll();return new zo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iT.type="LOCAL";const nC=iT;new Fo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t,e){return e?dr(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm extends Im{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Mi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Mi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sC(t){return YE(t.auth,new Nm(t),t.bypassAuthState)}function iC(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),Px(n,new Nm(t),t.bypassAuthState)}async function aC(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),Dx(n,new Nm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sC;case"linkViaPopup":case"linkViaRedirect":return aC;case"reauthViaPopup":case"reauthViaRedirect":return iC;default:Mn(this.auth,"internal-error")}}resolve(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=new Fo(2e3,1e4);class Ni extends aT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ni.currentPopupAction&&Ni.currentPopupAction.cancel(),Ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Er(this.filter.length===1,"Popup operations only handle one event");const e=Am();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oC.get())};e()}}Ni.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="pendingRedirect",ic=new Map;class cC extends aT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ic.get(this.auth._key());if(!e){try{const r=await uC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ic.set(this.auth._key(),e)}return this.bypassAuthState||ic.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uC(t,e){const n=fC(e),r=hC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function dC(t,e){ic.set(t._key(),e)}function hC(t){return dr(t._redirectPersistence)}function fC(t){return sc(lC,t.config.apiKey,t.name)}async function mC(t,e,n=!1){if(gn(t.app))return Promise.reject(fr(t));const r=Xs(t),s=rC(r,e),a=await new cC(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=10*60*1e3;class gC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!oT(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dy(e))}saveEventToCache(e){this.cachedEventUids.add(Dy(e)),this.lastProcessedEventTime=Date.now()}}function Dy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(t,e={}){return ms(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wC=/^https?/;async function EC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vC(t);for(const n of e)try{if(TC(n))return}catch{}Mn(t,"unauthorized-domain")}function TC(t){const e=Xh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!wC.test(n))return!1;if(_C.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new Fo(3e4,6e4);function Py(){const t=Yn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IC(t){return new Promise((e,n)=>{var s,i,a;function r(){Py(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Py(),n(Qn(t,"network-request-failed"))},timeout:kC.get()})}if((i=(s=Yn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=Yn().gapi)!=null&&a.load)r();else{const l=px("iframefcb");return Yn()[l]=()=>{gapi.load?r():n(Qn(t,"network-request-failed"))},KE(`${mx()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw ac=null,e})}let ac=null;function SC(t){return ac=ac||IC(t),ac}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=new Fo(5e3,15e3),NC="__/auth/iframe",xC="emulator/auth/iframe",CC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bC(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Em(e,xC):`https://${t.config.authDomain}/${NC}`,r={apiKey:e.apiKey,appName:t.name,v:na},s=RC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Lo(r).slice(1)}`}async function jC(t){const e=await SC(t),n=Yn().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:bC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Qn(t,"network-request-failed"),l=Yn().setTimeout(()=>{i(a)},AC.get());function u(){Yn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PC=500,OC=600,MC="_blank",VC="http://localhost";class Oy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LC(t,e,n,r=PC,s=OC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...DC,width:r.toString(),height:s.toString(),top:i,left:a},d=Ut().toLowerCase();n&&(l=LE(d)?MC:n),ME(d)&&(e=e||VC,u.scrollbars="yes");const m=Object.entries(u).reduce((g,[k,C])=>`${g}${k}=${C},`,"");if(ix(d)&&l!=="_self")return FC(e||"",l),new Oy(null);const p=window.open(e||"",l,m);re(p,t,"popup-blocked");try{p.focus()}catch{}return new Oy(p)}function FC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="__/auth/handler",BC="emulator/auth/handler",zC=encodeURIComponent("fac");async function My(t,e,n,r,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:na,eventId:s};if(e instanceof WE){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",IA(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))a[m]=p}if(e instanceof Bo){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const u=await t._getAppCheckToken(),d=u?`#${zC}=${encodeURIComponent(u)}`:"";return`${$C(t)}?${Lo(l).slice(1)}${d}`}function $C({config:t}){return t.emulator?Em(t,BC):`https://${t.authDomain}/${UC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="webStorageSupport";class GC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tT,this._completeRedirectFn=mC,this._overrideRedirectResult=dC}async _openPopup(e,n,r,s){var a;Er((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await My(e,n,r,Xh(),s);return LC(e,i,Am())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await My(e,n,r,Xh(),s);return Hx(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Er(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await jC(e),r=new gC(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($d,{type:$d},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[$d];i!==void 0&&n(!!i),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $E()||VE()||km()}}const KC=GC;var Vy="@firebase/auth",Ly="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WC(t){tr(new On("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;re(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GE(t)},d=new dx(r,s,i,u);return Ex(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),tr(new On("auth-internal",e=>{const n=Xs(e.getProvider("auth").getImmediate());return(r=>new qC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wn(Vy,Ly,HC(t)),wn(Vy,Ly,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=5*60,YC=vE("authIdTokenMaxAge")||QC;let Fy=null;const JC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YC)return;const s=n==null?void 0:n.token;Fy!==s&&(Fy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function XC(t=_m()){const e=Js(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wx(t,{popupRedirectResolver:KC,persistence:[nC,Gx,tT]}),r=vE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=JC(i.toString());Fx(n,a,()=>a(n.currentUser)),Lx(n,l=>a(l))}}const s=gE("auth");return s&&Tx(n,`http://${s}`),n}function ZC(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}hx({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Qn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",ZC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WC("Browser");var e1="firebase",t1="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn(e1,t1,"app");var Uy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var es,lT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,y){function E(){}E.prototype=y.prototype,A.D=y.prototype,A.prototype=new E,A.prototype.constructor=A,A.C=function(N,S,b){for(var x=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)x[ye-2]=arguments[ye];return y.prototype[S].apply(N,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,y,E){E||(E=0);var N=Array(16);if(typeof y=="string")for(var S=0;16>S;++S)N[S]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(S=0;16>S;++S)N[S]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=A.g[0],E=A.g[1],S=A.g[2];var b=A.g[3],x=y+(b^E&(S^b))+N[0]+3614090360&4294967295;y=E+(x<<7&4294967295|x>>>25),x=b+(S^y&(E^S))+N[1]+3905402710&4294967295,b=y+(x<<12&4294967295|x>>>20),x=S+(E^b&(y^E))+N[2]+606105819&4294967295,S=b+(x<<17&4294967295|x>>>15),x=E+(y^S&(b^y))+N[3]+3250441966&4294967295,E=S+(x<<22&4294967295|x>>>10),x=y+(b^E&(S^b))+N[4]+4118548399&4294967295,y=E+(x<<7&4294967295|x>>>25),x=b+(S^y&(E^S))+N[5]+1200080426&4294967295,b=y+(x<<12&4294967295|x>>>20),x=S+(E^b&(y^E))+N[6]+2821735955&4294967295,S=b+(x<<17&4294967295|x>>>15),x=E+(y^S&(b^y))+N[7]+4249261313&4294967295,E=S+(x<<22&4294967295|x>>>10),x=y+(b^E&(S^b))+N[8]+1770035416&4294967295,y=E+(x<<7&4294967295|x>>>25),x=b+(S^y&(E^S))+N[9]+2336552879&4294967295,b=y+(x<<12&4294967295|x>>>20),x=S+(E^b&(y^E))+N[10]+4294925233&4294967295,S=b+(x<<17&4294967295|x>>>15),x=E+(y^S&(b^y))+N[11]+2304563134&4294967295,E=S+(x<<22&4294967295|x>>>10),x=y+(b^E&(S^b))+N[12]+1804603682&4294967295,y=E+(x<<7&4294967295|x>>>25),x=b+(S^y&(E^S))+N[13]+4254626195&4294967295,b=y+(x<<12&4294967295|x>>>20),x=S+(E^b&(y^E))+N[14]+2792965006&4294967295,S=b+(x<<17&4294967295|x>>>15),x=E+(y^S&(b^y))+N[15]+1236535329&4294967295,E=S+(x<<22&4294967295|x>>>10),x=y+(S^b&(E^S))+N[1]+4129170786&4294967295,y=E+(x<<5&4294967295|x>>>27),x=b+(E^S&(y^E))+N[6]+3225465664&4294967295,b=y+(x<<9&4294967295|x>>>23),x=S+(y^E&(b^y))+N[11]+643717713&4294967295,S=b+(x<<14&4294967295|x>>>18),x=E+(b^y&(S^b))+N[0]+3921069994&4294967295,E=S+(x<<20&4294967295|x>>>12),x=y+(S^b&(E^S))+N[5]+3593408605&4294967295,y=E+(x<<5&4294967295|x>>>27),x=b+(E^S&(y^E))+N[10]+38016083&4294967295,b=y+(x<<9&4294967295|x>>>23),x=S+(y^E&(b^y))+N[15]+3634488961&4294967295,S=b+(x<<14&4294967295|x>>>18),x=E+(b^y&(S^b))+N[4]+3889429448&4294967295,E=S+(x<<20&4294967295|x>>>12),x=y+(S^b&(E^S))+N[9]+568446438&4294967295,y=E+(x<<5&4294967295|x>>>27),x=b+(E^S&(y^E))+N[14]+3275163606&4294967295,b=y+(x<<9&4294967295|x>>>23),x=S+(y^E&(b^y))+N[3]+4107603335&4294967295,S=b+(x<<14&4294967295|x>>>18),x=E+(b^y&(S^b))+N[8]+1163531501&4294967295,E=S+(x<<20&4294967295|x>>>12),x=y+(S^b&(E^S))+N[13]+2850285829&4294967295,y=E+(x<<5&4294967295|x>>>27),x=b+(E^S&(y^E))+N[2]+4243563512&4294967295,b=y+(x<<9&4294967295|x>>>23),x=S+(y^E&(b^y))+N[7]+1735328473&4294967295,S=b+(x<<14&4294967295|x>>>18),x=E+(b^y&(S^b))+N[12]+2368359562&4294967295,E=S+(x<<20&4294967295|x>>>12),x=y+(E^S^b)+N[5]+4294588738&4294967295,y=E+(x<<4&4294967295|x>>>28),x=b+(y^E^S)+N[8]+2272392833&4294967295,b=y+(x<<11&4294967295|x>>>21),x=S+(b^y^E)+N[11]+1839030562&4294967295,S=b+(x<<16&4294967295|x>>>16),x=E+(S^b^y)+N[14]+4259657740&4294967295,E=S+(x<<23&4294967295|x>>>9),x=y+(E^S^b)+N[1]+2763975236&4294967295,y=E+(x<<4&4294967295|x>>>28),x=b+(y^E^S)+N[4]+1272893353&4294967295,b=y+(x<<11&4294967295|x>>>21),x=S+(b^y^E)+N[7]+4139469664&4294967295,S=b+(x<<16&4294967295|x>>>16),x=E+(S^b^y)+N[10]+3200236656&4294967295,E=S+(x<<23&4294967295|x>>>9),x=y+(E^S^b)+N[13]+681279174&4294967295,y=E+(x<<4&4294967295|x>>>28),x=b+(y^E^S)+N[0]+3936430074&4294967295,b=y+(x<<11&4294967295|x>>>21),x=S+(b^y^E)+N[3]+3572445317&4294967295,S=b+(x<<16&4294967295|x>>>16),x=E+(S^b^y)+N[6]+76029189&4294967295,E=S+(x<<23&4294967295|x>>>9),x=y+(E^S^b)+N[9]+3654602809&4294967295,y=E+(x<<4&4294967295|x>>>28),x=b+(y^E^S)+N[12]+3873151461&4294967295,b=y+(x<<11&4294967295|x>>>21),x=S+(b^y^E)+N[15]+530742520&4294967295,S=b+(x<<16&4294967295|x>>>16),x=E+(S^b^y)+N[2]+3299628645&4294967295,E=S+(x<<23&4294967295|x>>>9),x=y+(S^(E|~b))+N[0]+4096336452&4294967295,y=E+(x<<6&4294967295|x>>>26),x=b+(E^(y|~S))+N[7]+1126891415&4294967295,b=y+(x<<10&4294967295|x>>>22),x=S+(y^(b|~E))+N[14]+2878612391&4294967295,S=b+(x<<15&4294967295|x>>>17),x=E+(b^(S|~y))+N[5]+4237533241&4294967295,E=S+(x<<21&4294967295|x>>>11),x=y+(S^(E|~b))+N[12]+1700485571&4294967295,y=E+(x<<6&4294967295|x>>>26),x=b+(E^(y|~S))+N[3]+2399980690&4294967295,b=y+(x<<10&4294967295|x>>>22),x=S+(y^(b|~E))+N[10]+4293915773&4294967295,S=b+(x<<15&4294967295|x>>>17),x=E+(b^(S|~y))+N[1]+2240044497&4294967295,E=S+(x<<21&4294967295|x>>>11),x=y+(S^(E|~b))+N[8]+1873313359&4294967295,y=E+(x<<6&4294967295|x>>>26),x=b+(E^(y|~S))+N[15]+4264355552&4294967295,b=y+(x<<10&4294967295|x>>>22),x=S+(y^(b|~E))+N[6]+2734768916&4294967295,S=b+(x<<15&4294967295|x>>>17),x=E+(b^(S|~y))+N[13]+1309151649&4294967295,E=S+(x<<21&4294967295|x>>>11),x=y+(S^(E|~b))+N[4]+4149444226&4294967295,y=E+(x<<6&4294967295|x>>>26),x=b+(E^(y|~S))+N[11]+3174756917&4294967295,b=y+(x<<10&4294967295|x>>>22),x=S+(y^(b|~E))+N[2]+718787259&4294967295,S=b+(x<<15&4294967295|x>>>17),x=E+(b^(S|~y))+N[9]+3951481745&4294967295,A.g[0]=A.g[0]+y&4294967295,A.g[1]=A.g[1]+(S+(x<<21&4294967295|x>>>11))&4294967295,A.g[2]=A.g[2]+S&4294967295,A.g[3]=A.g[3]+b&4294967295}r.prototype.u=function(A,y){y===void 0&&(y=A.length);for(var E=y-this.blockSize,N=this.B,S=this.h,b=0;b<y;){if(S==0)for(;b<=E;)s(this,A,b),b+=this.blockSize;if(typeof A=="string"){for(;b<y;)if(N[S++]=A.charCodeAt(b++),S==this.blockSize){s(this,N),S=0;break}}else for(;b<y;)if(N[S++]=A[b++],S==this.blockSize){s(this,N),S=0;break}}this.h=S,this.o+=y},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var y=1;y<A.length-8;++y)A[y]=0;var E=8*this.o;for(y=A.length-8;y<A.length;++y)A[y]=E&255,E/=256;for(this.u(A),A=Array(16),y=E=0;4>y;++y)for(var N=0;32>N;N+=8)A[E++]=this.g[y]>>>N&255;return A};function i(A,y){var E=l;return Object.prototype.hasOwnProperty.call(E,A)?E[A]:E[A]=y(A)}function a(A,y){this.h=y;for(var E=[],N=!0,S=A.length-1;0<=S;S--){var b=A[S]|0;N&&b==y||(E[S]=b,N=!1)}this.g=E}var l={};function u(A){return-128<=A&&128>A?i(A,function(y){return new a([y|0],0>y?-1:0)}):new a([A|0],0>A?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return j(d(-A));for(var y=[],E=1,N=0;A>=E;N++)y[N]=A/E|0,E*=4294967296;return new a(y,0)}function m(A,y){if(A.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(A.charAt(0)=="-")return j(m(A.substring(1),y));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(y,8)),N=p,S=0;S<A.length;S+=8){var b=Math.min(8,A.length-S),x=parseInt(A.substring(S,S+b),y);8>b?(b=d(Math.pow(y,b)),N=N.j(b).add(d(x))):(N=N.j(E),N=N.add(d(x)))}return N}var p=u(0),g=u(1),k=u(16777216);t=a.prototype,t.m=function(){if(R(this))return-j(this).m();for(var A=0,y=1,E=0;E<this.g.length;E++){var N=this.i(E);A+=(0<=N?N:4294967296+N)*y,y*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C(this))return"0";if(R(this))return"-"+j(this).toString(A);for(var y=d(Math.pow(A,6)),E=this,N="";;){var S=P(E,y).g;E=w(E,S.j(y));var b=((0<E.g.length?E.g[0]:E.h)>>>0).toString(A);if(E=S,C(E))return b+N;for(;6>b.length;)b="0"+b;N=b+N}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function C(A){if(A.h!=0)return!1;for(var y=0;y<A.g.length;y++)if(A.g[y]!=0)return!1;return!0}function R(A){return A.h==-1}t.l=function(A){return A=w(this,A),R(A)?-1:C(A)?0:1};function j(A){for(var y=A.g.length,E=[],N=0;N<y;N++)E[N]=~A.g[N];return new a(E,~A.h).add(g)}t.abs=function(){return R(this)?j(this):this},t.add=function(A){for(var y=Math.max(this.g.length,A.g.length),E=[],N=0,S=0;S<=y;S++){var b=N+(this.i(S)&65535)+(A.i(S)&65535),x=(b>>>16)+(this.i(S)>>>16)+(A.i(S)>>>16);N=x>>>16,b&=65535,x&=65535,E[S]=x<<16|b}return new a(E,E[E.length-1]&-2147483648?-1:0)};function w(A,y){return A.add(j(y))}t.j=function(A){if(C(this)||C(A))return p;if(R(this))return R(A)?j(this).j(j(A)):j(j(this).j(A));if(R(A))return j(this.j(j(A)));if(0>this.l(k)&&0>A.l(k))return d(this.m()*A.m());for(var y=this.g.length+A.g.length,E=[],N=0;N<2*y;N++)E[N]=0;for(N=0;N<this.g.length;N++)for(var S=0;S<A.g.length;S++){var b=this.i(N)>>>16,x=this.i(N)&65535,ye=A.i(S)>>>16,Fe=A.i(S)&65535;E[2*N+2*S]+=x*Fe,v(E,2*N+2*S),E[2*N+2*S+1]+=b*Fe,v(E,2*N+2*S+1),E[2*N+2*S+1]+=x*ye,v(E,2*N+2*S+1),E[2*N+2*S+2]+=b*ye,v(E,2*N+2*S+2)}for(N=0;N<y;N++)E[N]=E[2*N+1]<<16|E[2*N];for(N=y;N<2*y;N++)E[N]=0;return new a(E,0)};function v(A,y){for(;(A[y]&65535)!=A[y];)A[y+1]+=A[y]>>>16,A[y]&=65535,y++}function I(A,y){this.g=A,this.h=y}function P(A,y){if(C(y))throw Error("division by zero");if(C(A))return new I(p,p);if(R(A))return y=P(j(A),y),new I(j(y.g),j(y.h));if(R(y))return y=P(A,j(y)),new I(j(y.g),y.h);if(30<A.g.length){if(R(A)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var E=g,N=y;0>=N.l(A);)E=U(E),N=U(N);var S=B(E,1),b=B(N,1);for(N=B(N,2),E=B(E,2);!C(N);){var x=b.add(N);0>=x.l(A)&&(S=S.add(E),b=x),N=B(N,1),E=B(E,1)}return y=w(A,S.j(y)),new I(S,y)}for(S=p;0<=A.l(y);){for(E=Math.max(1,Math.floor(A.m()/y.m())),N=Math.ceil(Math.log(E)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),b=d(E),x=b.j(y);R(x)||0<x.l(A);)E-=N,b=d(E),x=b.j(y);C(b)&&(b=g),S=S.add(b),A=w(A,x)}return new I(S,A)}t.A=function(A){return P(this,A).h},t.and=function(A){for(var y=Math.max(this.g.length,A.g.length),E=[],N=0;N<y;N++)E[N]=this.i(N)&A.i(N);return new a(E,this.h&A.h)},t.or=function(A){for(var y=Math.max(this.g.length,A.g.length),E=[],N=0;N<y;N++)E[N]=this.i(N)|A.i(N);return new a(E,this.h|A.h)},t.xor=function(A){for(var y=Math.max(this.g.length,A.g.length),E=[],N=0;N<y;N++)E[N]=this.i(N)^A.i(N);return new a(E,this.h^A.h)};function U(A){for(var y=A.g.length+1,E=[],N=0;N<y;N++)E[N]=A.i(N)<<1|A.i(N-1)>>>31;return new a(E,A.h)}function B(A,y){var E=y>>5;y%=32;for(var N=A.g.length-E,S=[],b=0;b<N;b++)S[b]=0<y?A.i(b+E)>>>y|A.i(b+E+1)<<32-y:A.i(b+E);return new a(S,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lT=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=m,es=a}).apply(typeof Uy<"u"?Uy:typeof self<"u"?self:typeof window<"u"?window:{});var Ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cT,Fa,uT,oc,nf,dT,hT,fT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,h,f){return o==Array.prototype||o==Object.prototype||(o[h]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ml=="object"&&Ml];for(var h=0;h<o.length;++h){var f=o[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,h){if(h)e:{var f=r;o=o.split(".");for(var _=0;_<o.length-1;_++){var D=o[_];if(!(D in f))break e;f=f[D]}o=o[o.length-1],_=f[o],h=h(_),h!=_&&h!=null&&e(f,o,{configurable:!0,writable:!0,value:h})}}function i(o,h){o instanceof String&&(o+="");var f=0,_=!1,D={next:function(){if(!_&&f<o.length){var O=f++;return{value:h(O,o[O]),done:!1}}return _=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(o){return o||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var h=typeof o;return h=h!="object"?h:o?Array.isArray(o)?"array":h:"null",h=="array"||h=="object"&&typeof o.length=="number"}function d(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function m(o,h,f){return o.call.apply(o.bind,arguments)}function p(o,h,f){if(!o)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,_),o.apply(h,D)}}return function(){return o.apply(h,arguments)}}function g(o,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,g.apply(null,arguments)}function k(o,h){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),o.apply(this,_)}}function C(o,h){function f(){}f.prototype=h.prototype,o.aa=h.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(_,D,O){for(var G=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)G[xe-2]=arguments[xe];return h.prototype[D].apply(_,G)}}function R(o){const h=o.length;if(0<h){const f=Array(h);for(let _=0;_<h;_++)f[_]=o[_];return f}return[]}function j(o,h){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(u(_)){const D=o.length||0,O=_.length||0;o.length=D+O;for(let G=0;G<O;G++)o[D+G]=_[G]}else o.push(_)}}class w{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(o){return/^[\s\xa0]*$/.test(o)}function I(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function P(o){return P[" "](o),o}P[" "]=function(){};var U=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function B(o,h,f){for(const _ in o)h.call(f,o[_],_,o)}function A(o,h){for(const f in o)h.call(void 0,o[f],f,o)}function y(o){const h={};for(const f in o)h[f]=o[f];return h}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(o,h){let f,_;for(let D=1;D<arguments.length;D++){_=arguments[D];for(f in _)o[f]=_[f];for(let O=0;O<E.length;O++)f=E[O],Object.prototype.hasOwnProperty.call(_,f)&&(o[f]=_[f])}}function S(o){var h=1;o=o.split(":");const f=[];for(;0<h&&o.length;)f.push(o.shift()),h--;return o.length&&f.push(o.join(":")),f}function b(o){l.setTimeout(()=>{throw o},0)}function x(){var o=K;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class ye{constructor(){this.h=this.g=null}add(h,f){const _=Fe.get();_.set(h,f),this.h?this.h.next=_:this.g=_,this.h=_}}var Fe=new w(()=>new Ce,o=>o.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,$=!1,K=new ye,Y=()=>{const o=l.Promise.resolve(void 0);Be=()=>{o.then(ve)}};var ve=()=>{for(var o;o=x();){try{o.h.call(o.g)}catch(f){b(f)}var h=Fe;h.j(o),100>h.h&&(h.h++,o.next=h.g,h.g=o)}$=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var it=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,h),l.removeEventListener("test",f,h)}catch{}return o}();function Ae(o,h){if(Ie.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,_=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget){if(U){e:{try{P(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else f=="mouseover"?h=o.fromElement:f=="mouseout"&&(h=o.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Nt[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Ae.aa.h.call(this)}}C(Ae,Ie);var Nt={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Qe="closure_listenable_"+(1e6*Math.random()|0),yt=0;function Un(o,h,f,_,D){this.listener=o,this.proxy=null,this.src=h,this.type=f,this.capture=!!_,this.ha=D,this.key=++yt,this.da=this.fa=!1}function nn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ne(o){this.src=o,this.g={},this.h=0}ne.prototype.add=function(o,h,f,_,D){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var G=de(o,h,_,D);return-1<G?(h=o[G],f||(h.fa=!1)):(h=new Un(h,this.src,O,!!_,D),h.fa=f,o.push(h)),h};function _e(o,h){var f=h.type;if(f in o.g){var _=o.g[f],D=Array.prototype.indexOf.call(_,h,void 0),O;(O=0<=D)&&Array.prototype.splice.call(_,D,1),O&&(nn(h),o.g[f].length==0&&(delete o.g[f],o.h--))}}function de(o,h,f,_){for(var D=0;D<o.length;++D){var O=o[D];if(!O.da&&O.listener==h&&O.capture==!!f&&O.ha==_)return D}return-1}var ie="closure_lm_"+(1e6*Math.random()|0),Te={};function X(o,h,f,_,D){if(Array.isArray(h)){for(var O=0;O<h.length;O++)X(o,h[O],f,_,D);return null}return f=Rt(f),o&&o[Qe]?o.K(h,f,d(_)?!!_.capture:!1,D):ce(o,h,f,!1,_,D)}function ce(o,h,f,_,D,O){if(!h)throw Error("Invalid event type");var G=d(D)?!!D.capture:!!D,xe=xt(o);if(xe||(o[ie]=xe=new ne(o)),f=xe.add(h,f,_,G,O),f.proxy)return f;if(_=fe(),f.proxy=_,_.src=o,_.listener=f,o.addEventListener)it||(D=G),D===void 0&&(D=!1),o.addEventListener(h.toString(),_,D);else if(o.attachEvent)o.attachEvent(Re(h.toString()),_);else if(o.addListener&&o.removeListener)o.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function fe(){function o(f){return h.call(o.src,o.listener,f)}const h=rn;return o}function Ye(o,h,f,_,D){if(Array.isArray(h))for(var O=0;O<h.length;O++)Ye(o,h[O],f,_,D);else _=d(_)?!!_.capture:!!_,f=Rt(f),o&&o[Qe]?(o=o.i,h=String(h).toString(),h in o.g&&(O=o.g[h],f=de(O,f,_,D),-1<f&&(nn(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete o.g[h],o.h--)))):o&&(o=xt(o))&&(h=o.g[h.toString()],o=-1,h&&(o=de(h,f,_,D)),(f=-1<o?h[o]:null)&&at(f))}function at(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[Qe])_e(h.i,o);else{var f=o.type,_=o.proxy;h.removeEventListener?h.removeEventListener(f,_,o.capture):h.detachEvent?h.detachEvent(Re(f),_):h.addListener&&h.removeListener&&h.removeListener(_),(f=xt(h))?(_e(f,o),f.h==0&&(f.src=null,h[ie]=null)):nn(o)}}}function Re(o){return o in Te?Te[o]:Te[o]="on"+o}function rn(o,h){if(o.da)o=!0;else{h=new Ae(h,this);var f=o.listener,_=o.ha||o.src;o.fa&&at(o),o=f.call(_,h)}return o}function xt(o){return o=o[ie],o instanceof ne?o:null}var Ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(o){return typeof o=="function"?o:(o[Ct]||(o[Ct]=function(h){return o.handleEvent(h)}),o[Ct])}function Pe(){ue.call(this),this.i=new ne(this),this.M=this,this.F=null}C(Pe,ue),Pe.prototype[Qe]=!0,Pe.prototype.removeEventListener=function(o,h,f,_){Ye(this,o,h,f,_)};function Je(o,h){var f,_=o.F;if(_)for(f=[];_;_=_.F)f.push(_);if(o=o.M,_=h.type||h,typeof h=="string")h=new Ie(h,o);else if(h instanceof Ie)h.target=h.target||o;else{var D=h;h=new Ie(_,o),N(h,D)}if(D=!0,f)for(var O=f.length-1;0<=O;O--){var G=h.g=f[O];D=Bn(G,_,!0,h)&&D}if(G=h.g=o,D=Bn(G,_,!0,h)&&D,D=Bn(G,_,!1,h)&&D,f)for(O=0;O<f.length;O++)G=h.g=f[O],D=Bn(G,_,!1,h)&&D}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var o=this.i,h;for(h in o.g){for(var f=o.g[h],_=0;_<f.length;_++)nn(f[_]);delete o.g[h],o.h--}}this.F=null},Pe.prototype.K=function(o,h,f,_){return this.i.add(String(o),h,!1,f,_)},Pe.prototype.L=function(o,h,f,_){return this.i.add(String(o),h,!0,f,_)};function Bn(o,h,f,_){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,O=0;O<h.length;++O){var G=h[O];if(G&&!G.da&&G.capture==f){var xe=G.listener,_t=G.ha||G.src;G.fa&&_e(o.i,G),D=xe.call(_t,_)!==!1&&D}}return D&&!_.defaultPrevented}function Yo(o,h,f){if(typeof o=="function")f&&(o=g(o,f));else if(o&&typeof o.handleEvent=="function")o=g(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(o,h||0)}function Jo(o){o.g=Yo(()=>{o.g=null,o.i&&(o.i=!1,Jo(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class Xu extends ue{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Jo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vs(o){ue.call(this),this.h=o,this.g={}}C(vs,ue);var ha=[];function Xo(o){B(o.g,function(h,f){this.g.hasOwnProperty(f)&&at(h)},o),o.g={}}vs.prototype.N=function(){vs.aa.N.call(this),Xo(this)},vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fa=l.JSON.stringify,ma=l.JSON.parse,Zo=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function pa(){}pa.prototype.h=null;function el(o){return o.h||(o.h=o.i())}function tl(){}var Nr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ni(){Ie.call(this,"d")}C(ni,Ie);function _s(){Ie.call(this,"c")}C(_s,Ie);var qt={},xr=null;function ri(){return xr=xr||new Pe}qt.La="serverreachability";function si(o){Ie.call(this,qt.La,o)}C(si,Ie);function rr(o){const h=ri();Je(h,new si(h))}qt.STAT_EVENT="statevent";function nl(o,h){Ie.call(this,qt.STAT_EVENT,o),this.stat=h}C(nl,Ie);function vt(o){const h=ri();Je(h,new nl(h,o))}qt.Ma="timingevent";function rl(o,h){Ie.call(this,qt.Ma,o),this.size=h}C(rl,Ie);function ws(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},h)}function Es(){this.g=!0}Es.prototype.xa=function(){this.g=!1};function Zu(o,h,f,_,D,O){o.info(function(){if(o.g)if(O)for(var G="",xe=O.split("&"),_t=0;_t<xe.length;_t++){var ke=xe[_t].split("=");if(1<ke.length){var bt=ke[0];ke=ke[1];var jt=bt.split("_");G=2<=jt.length&&jt[1]=="type"?G+(bt+"="+ke+"&"):G+(bt+"=redacted&")}}else G=null;else G=O;return"XMLHTTP REQ ("+_+") [attempt "+D+"]: "+h+`
`+f+`
`+G})}function ed(o,h,f,_,D,O,G){o.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+D+"]: "+h+`
`+f+`
`+O+" "+G})}function In(o,h,f,_){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+td(o,f)+(_?" "+_:"")})}function sl(o,h){o.info(function(){return"TIMEOUT: "+h})}Es.prototype.info=function(){};function td(o,h){if(!o.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var _=f[o];if(!(2>_.length)){var D=_[1];if(Array.isArray(D)&&!(1>D.length)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(var G=1;G<D.length;G++)D[G]=""}}}}return fa(f)}catch{return h}}var zn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ga={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ii;function T(){}C(T,pa),T.prototype.g=function(){return new XMLHttpRequest},T.prototype.i=function(){return{}},ii=new T;function F(o,h,f,_){this.j=o,this.i=h,this.l=f,this.R=_||1,this.U=new vs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new J}function J(){this.i=null,this.g="",this.h=!1}var Z={},q={};function ee(o,h,f){o.L=1,o.v=cl(sr(h)),o.m=f,o.P=!0,dt(o,null)}function dt(o,h){o.F=Date.now(),al(o),o.A=sr(o.v);var f=o.A,_=o.R;Array.isArray(_)||(_=[String(_)]),jp(f.i,"t",_),o.C=0,f=o.j.J,o.h=new J,o.g=Yp(o.j,f?h:null,!o.m),0<o.O&&(o.M=new Xu(g(o.Y,o,o.g),o.O)),h=o.U,f=o.g,_=o.ca;var D="readystatechange";Array.isArray(D)||(D&&(ha[0]=D.toString()),D=ha);for(var O=0;O<D.length;O++){var G=X(f,D[O],_||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,h)):(o.u="GET",o.g.ea(o.A,o.u,null,h)),rr(),Zu(o.i,o.u,o.A,o.l,o.R,o.m)}F.prototype.ca=function(o){o=o.target;const h=this.M;h&&ir(o)==3?h.j():this.Y(o)},F.prototype.Y=function(o){try{if(o==this.g)e:{const jt=ir(this.g);var h=this.g.Ba();const li=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||Fp(this.g)))){this.J||jt!=4||h==7||(h==8||0>=li?rr(3):rr(2)),nd(this);var f=this.g.Z();this.X=f;t:if(Sn(this)){var _=Fp(this.g);o="";var D=_.length,O=ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ts(this),ya(this);var G="";break t}this.h.i=new l.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,o+=this.h.i.decode(_[h],{stream:!(O&&h==D-1)});_.length=0,this.h.g+=o,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=f==200,ed(this.i,this.u,this.A,this.l,this.R,jt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,_t=this.g;if((xe=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(xe)){var ke=xe;break t}}ke=null}if(f=ke)In(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rd(this,f);else{this.o=!1,this.s=3,vt(12),Ts(this),ya(this);break e}}if(this.P){f=!0;let An;for(;!this.J&&this.C<G.length;)if(An=il(this,G),An==q){jt==4&&(this.s=4,vt(14),f=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(An==Z){this.s=4,vt(15),In(this.i,this.l,G,"[Invalid Chunk]"),f=!1;break}else In(this.i,this.l,An,null),rd(this,An);if(Sn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||G.length!=0||this.h.h||(this.s=1,vt(16),f=!1),this.o=this.o&&f,!f)In(this.i,this.l,G,"[Invalid Chunked Response]"),Ts(this),ya(this);else if(0<G.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),cd(bt),bt.M=!0,vt(11))}}else In(this.i,this.l,G,null),rd(this,G);jt==4&&Ts(this),this.o&&!this.J&&(jt==4?qp(this.j,this):(this.o=!1,al(this)))}else NI(this.g),f==400&&0<G.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),Ts(this),ya(this)}}}catch{}finally{}};function Sn(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function il(o,h){var f=o.C,_=h.indexOf(`
`,f);return _==-1?q:(f=Number(h.substring(f,_)),isNaN(f)?Z:(_+=1,_+f>h.length?q:(h=h.slice(_,_+f),o.C=_+f,h)))}F.prototype.cancel=function(){this.J=!0,Ts(this)};function al(o){o.S=Date.now()+o.I,wp(o,o.I)}function wp(o,h){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ws(g(o.ba,o),h)}function nd(o){o.B&&(l.clearTimeout(o.B),o.B=null)}F.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(sl(this.i,this.A),this.L!=2&&(rr(),vt(17)),Ts(this),this.s=2,ya(this)):wp(this,this.S-o)};function ya(o){o.j.G==0||o.J||qp(o.j,o)}function Ts(o){nd(o);var h=o.M;h&&typeof h.ma=="function"&&h.ma(),o.M=null,Xo(o.U),o.g&&(h=o.g,o.g=null,h.abort(),h.ma())}function rd(o,h){try{var f=o.j;if(f.G!=0&&(f.g==o||sd(f.h,o))){if(!o.K&&sd(f.h,o)&&f.G==3){try{var _=f.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var D=_;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)pl(f),fl(f);else break e;ld(f),vt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=ws(g(f.Za,f),6e3));if(1>=kp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Is(f,11)}else if((o.K||f.g==o)&&pl(f),!v(h))for(D=f.Da.g.parse(h),h=0;h<D.length;h++){let ke=D[h];if(f.T=ke[0],ke=ke[1],f.G==2)if(ke[0]=="c"){f.K=ke[1],f.ia=ke[2];const bt=ke[3];bt!=null&&(f.la=bt,f.j.info("VER="+f.la));const jt=ke[4];jt!=null&&(f.Aa=jt,f.j.info("SVER="+f.Aa));const li=ke[5];li!=null&&typeof li=="number"&&0<li&&(_=1.5*li,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const An=o.g;if(An){const yl=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yl){var O=_.h;O.g||yl.indexOf("spdy")==-1&&yl.indexOf("quic")==-1&&yl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(id(O,O.h),O.h=null))}if(_.D){const ud=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;ud&&(_.ya=ud,Oe(_.I,_.D,ud))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var G=o;if(_.qa=Qp(_,_.J?_.ia:null,_.W),G.K){Ip(_.h,G);var xe=G,_t=_.L;_t&&(xe.I=_t),xe.B&&(nd(xe),al(xe)),_.g=G}else Gp(_);0<f.i.length&&ml(f)}else ke[0]!="stop"&&ke[0]!="close"||Is(f,7);else f.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Is(f,7):od(f):ke[0]!="noop"&&f.l&&f.l.ta(ke),f.v=0)}}rr(4)}catch{}}var dI=class{constructor(o,h){this.g=o,this.map=h}};function Ep(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tp(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function kp(o){return o.h?1:o.g?o.g.size:0}function sd(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function id(o,h){o.g?o.g.add(h):o.h=h}function Ip(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Ep.prototype.cancel=function(){if(this.i=Sp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Sp(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const f of o.g.values())h=h.concat(f.D);return h}return R(o.i)}function hI(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var h=[],f=o.length,_=0;_<f;_++)h.push(o[_]);return h}h=[],f=0;for(_ in o)h[f++]=o[_];return h}function fI(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var h=[];o=o.length;for(var f=0;f<o;f++)h.push(f);return h}h=[],f=0;for(const _ in o)h[f++]=_;return h}}}function Ap(o,h){if(o.forEach&&typeof o.forEach=="function")o.forEach(h,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,h,void 0);else for(var f=fI(o),_=hI(o),D=_.length,O=0;O<D;O++)h.call(void 0,_[O],f&&f[O],o)}var Np=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mI(o,h){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var _=o[f].indexOf("="),D=null;if(0<=_){var O=o[f].substring(0,_);D=o[f].substring(_+1)}else O=o[f];h(O,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ks(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof ks){this.h=o.h,ol(this,o.j),this.o=o.o,this.g=o.g,ll(this,o.s),this.l=o.l;var h=o.i,f=new wa;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),xp(this,f),this.m=o.m}else o&&(h=String(o).match(Np))?(this.h=!1,ol(this,h[1]||"",!0),this.o=va(h[2]||""),this.g=va(h[3]||"",!0),ll(this,h[4]),this.l=va(h[5]||"",!0),xp(this,h[6]||"",!0),this.m=va(h[7]||"")):(this.h=!1,this.i=new wa(null,this.h))}ks.prototype.toString=function(){var o=[],h=this.j;h&&o.push(_a(h,Cp,!0),":");var f=this.g;return(f||h=="file")&&(o.push("//"),(h=this.o)&&o.push(_a(h,Cp,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(_a(f,f.charAt(0)=="/"?yI:gI,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",_a(f,_I)),o.join("")};function sr(o){return new ks(o)}function ol(o,h,f){o.j=f?va(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function ll(o,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);o.s=h}else o.s=null}function xp(o,h,f){h instanceof wa?(o.i=h,wI(o.i,o.h)):(f||(h=_a(h,vI)),o.i=new wa(h,o.h))}function Oe(o,h,f){o.i.set(h,f)}function cl(o){return Oe(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function va(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function _a(o,h,f){return typeof o=="string"?(o=encodeURI(o).replace(h,pI),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function pI(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Cp=/[#\/\?@]/g,gI=/[#\?:]/g,yI=/[#\?]/g,vI=/[#\?@]/g,_I=/#/g;function wa(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function Cr(o){o.g||(o.g=new Map,o.h=0,o.i&&mI(o.i,function(h,f){o.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=wa.prototype,t.add=function(o,h){Cr(this),this.i=null,o=ai(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(h),this.h+=1,this};function Rp(o,h){Cr(o),h=ai(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function bp(o,h){return Cr(o),h=ai(o,h),o.g.has(h)}t.forEach=function(o,h){Cr(this),this.g.forEach(function(f,_){f.forEach(function(D){o.call(h,D,_,this)},this)},this)},t.na=function(){Cr(this);const o=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let _=0;_<h.length;_++){const D=o[_];for(let O=0;O<D.length;O++)f.push(h[_])}return f},t.V=function(o){Cr(this);let h=[];if(typeof o=="string")bp(this,o)&&(h=h.concat(this.g.get(ai(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)h=h.concat(o[f])}return h},t.set=function(o,h){return Cr(this),this.i=null,o=ai(this,o),bp(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=this.V(o),0<o.length?String(o[0]):h):h};function jp(o,h,f){Rp(o,h),0<f.length&&(o.i=null,o.g.set(ai(o,h),R(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var _=h[f];const O=encodeURIComponent(String(_)),G=this.V(_);for(_=0;_<G.length;_++){var D=O;G[_]!==""&&(D+="="+encodeURIComponent(String(G[_]))),o.push(D)}}return this.i=o.join("&")};function ai(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function wI(o,h){h&&!o.j&&(Cr(o),o.i=null,o.g.forEach(function(f,_){var D=_.toLowerCase();_!=D&&(Rp(this,_),jp(this,D,f))},o)),o.j=h}function EI(o,h){const f=new Es;if(l.Image){const _=new Image;_.onload=k(Rr,f,"TestLoadImage: loaded",!0,h,_),_.onerror=k(Rr,f,"TestLoadImage: error",!1,h,_),_.onabort=k(Rr,f,"TestLoadImage: abort",!1,h,_),_.ontimeout=k(Rr,f,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=o}else h(!1)}function TI(o,h){const f=new Es,_=new AbortController,D=setTimeout(()=>{_.abort(),Rr(f,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:_.signal}).then(O=>{clearTimeout(D),O.ok?Rr(f,"TestPingServer: ok",!0,h):Rr(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),Rr(f,"TestPingServer: error",!1,h)})}function Rr(o,h,f,_,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),_(f)}catch{}}function kI(){this.g=new Zo}function II(o,h,f){const _=f||"";try{Ap(o,function(D,O){let G=D;d(D)&&(G=fa(D)),h.push(_+O+"="+encodeURIComponent(G))})}catch(D){throw h.push(_+"type="+encodeURIComponent("_badmap")),D}}function ul(o){this.l=o.Ub||null,this.j=o.eb||!1}C(ul,pa),ul.prototype.g=function(){return new dl(this.l,this.j)},ul.prototype.i=function(o){return function(){return o}}({});function dl(o,h){Pe.call(this),this.D=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(dl,Pe),t=dl.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=h,this.readyState=1,Ta(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(h.body=o),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ta(this)),this.g&&(this.readyState=3,Ta(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?Ea(this):Ta(this),this.readyState==3&&Dp(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Ea(this))},t.Qa=function(o){this.g&&(this.response=o,Ea(this))},t.ga=function(){this.g&&Ea(this)};function Ea(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ta(o)}t.setRequestHeader=function(o,h){this.u.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=h.next();return o.join(`\r
`)};function Ta(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(dl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Pp(o){let h="";return B(o,function(f,_){h+=_,h+=":",h+=f,h+=`\r
`}),h}function ad(o,h,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=Pp(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Oe(o,h,f))}function qe(o){Pe.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(qe,Pe);var SI=/^https?$/i,AI=["POST","PUT"];t=qe.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,h,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ii.g(),this.v=this.o?el(this.o):el(ii),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(O){Op(this,O);return}if(o=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var D in _)f.set(D,_[D]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const O of _.keys())f.set(O,_.get(O));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),D=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(AI,h,void 0))||_||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,G]of f)this.g.setRequestHeader(O,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lp(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){Op(this,O)}};function Op(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.m=5,Mp(o),hl(o)}function Mp(o){o.A||(o.A=!0,Je(o,"complete"),Je(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Je(this,"complete"),Je(this,"abort"),hl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hl(this,!0)),qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vp(this):this.bb())},t.bb=function(){Vp(this)};function Vp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||ir(o)!=4||o.Z()!=2)){if(o.u&&ir(o)==4)Yo(o.Ea,0,o);else if(Je(o,"readystatechange"),ir(o)==4){o.h=!1;try{const G=o.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var _;if(_=G===0){var D=String(o.D).match(Np)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),_=!SI.test(D?D.toLowerCase():"")}f=_}if(f)Je(o,"complete"),Je(o,"success");else{o.m=6;try{var O=2<ir(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",Mp(o)}}finally{hl(o)}}}}function hl(o,h){if(o.g){Lp(o);const f=o.g,_=o.v[0]?()=>{}:null;o.g=null,o.v=null,h||Je(o,"ready");try{f.onreadystatechange=_}catch{}}}function Lp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function ir(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<ir(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),ma(h)}};function Fp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function NI(o){const h={};o=(o.g&&2<=ir(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<o.length;_++){if(v(o[_]))continue;var f=S(o[_]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=h[D]||[];h[D]=O,O.push(f)}A(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ka(o,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||h}function Up(o){this.Aa=0,this.i=[],this.j=new Es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ka("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ka("baseRetryDelayMs",5e3,o),this.cb=ka("retryDelaySeedMs",1e4,o),this.Wa=ka("forwardChannelMaxRetries",2,o),this.wa=ka("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Ep(o&&o.concurrentRequestLimit),this.Da=new kI,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Up.prototype,t.la=8,t.G=1,t.connect=function(o,h,f,_){vt(0),this.W=o,this.H=h||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=Qp(this,null,this.W),ml(this)};function od(o){if(Bp(o),o.G==3){var h=o.U++,f=sr(o.I);if(Oe(f,"SID",o.K),Oe(f,"RID",h),Oe(f,"TYPE","terminate"),Ia(o,f),h=new F(o,o.j,h),h.L=2,h.v=cl(sr(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=h.v,f=!0),f||(h.g=Yp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),al(h)}Wp(o)}function fl(o){o.g&&(cd(o),o.g.cancel(),o.g=null)}function Bp(o){fl(o),o.u&&(l.clearTimeout(o.u),o.u=null),pl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function ml(o){if(!Tp(o.h)&&!o.s){o.s=!0;var h=o.Ga;Be||Y(),$||(Be(),$=!0),K.add(h,o),o.B=0}}function xI(o,h){return kp(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=h.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ws(g(o.Ga,o,h),Hp(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const D=new F(this,this.j,o);let O=this.o;if(this.S&&(O?(O=y(O),N(O,this.S)):O=this.S),this.m!==null||this.O||(D.H=O,O=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=$p(this,D,h),f=sr(this.I),Oe(f,"RID",o),Oe(f,"CVER",22),this.D&&Oe(f,"X-HTTP-Session-Id",this.D),Ia(this,f),O&&(this.O?h="headers="+encodeURIComponent(String(Pp(O)))+"&"+h:this.m&&ad(f,this.m,O)),id(this.h,D),this.Ua&&Oe(f,"TYPE","init"),this.P?(Oe(f,"$req",h),Oe(f,"SID","null"),D.T=!0,ee(D,f,null)):ee(D,f,h),this.G=2}}else this.G==3&&(o?zp(this,o):this.i.length==0||Tp(this.h)||zp(this))};function zp(o,h){var f;h?f=h.l:f=o.U++;const _=sr(o.I);Oe(_,"SID",o.K),Oe(_,"RID",f),Oe(_,"AID",o.T),Ia(o,_),o.m&&o.o&&ad(_,o.m,o.o),f=new F(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),h&&(o.i=h.D.concat(o.i)),h=$p(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),id(o.h,f),ee(f,_,h)}function Ia(o,h){o.H&&B(o.H,function(f,_){Oe(h,_,f)}),o.l&&Ap({},function(f,_){Oe(h,_,f)})}function $p(o,h,f){f=Math.min(o.i.length,f);var _=o.l?g(o.l.Na,o.l,o):null;e:{var D=o.i;let O=-1;for(;;){const G=["count="+f];O==-1?0<f?(O=D[0].g,G.push("ofs="+O)):O=0:G.push("ofs="+O);let xe=!0;for(let _t=0;_t<f;_t++){let ke=D[_t].g;const bt=D[_t].map;if(ke-=O,0>ke)O=Math.max(0,D[_t].g-100),xe=!1;else try{II(bt,G,"req"+ke+"_")}catch{_&&_(bt)}}if(xe){_=G.join("&");break e}}}return o=o.i.splice(0,f),h.D=o,_}function Gp(o){if(!o.g&&!o.u){o.Y=1;var h=o.Fa;Be||Y(),$||(Be(),$=!0),K.add(h,o),o.v=0}}function ld(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ws(g(o.Fa,o),Hp(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Kp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ws(g(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),fl(this),Kp(this))};function cd(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Kp(o){o.g=new F(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var h=sr(o.qa);Oe(h,"RID","rpc"),Oe(h,"SID",o.K),Oe(h,"AID",o.T),Oe(h,"CI",o.F?"0":"1"),!o.F&&o.ja&&Oe(h,"TO",o.ja),Oe(h,"TYPE","xmlhttp"),Ia(o,h),o.m&&o.o&&ad(h,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=cl(sr(h)),f.m=null,f.P=!0,dt(f,o)}t.Za=function(){this.C!=null&&(this.C=null,fl(this),ld(this),vt(19))};function pl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function qp(o,h){var f=null;if(o.g==h){pl(o),cd(o),o.g=null;var _=2}else if(sd(o.h,h))f=h.D,Ip(o.h,h),_=1;else return;if(o.G!=0){if(h.o)if(_==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var D=o.B;_=ri(),Je(_,new rl(_,f)),ml(o)}else Gp(o);else if(D=h.s,D==3||D==0&&0<h.X||!(_==1&&xI(o,h)||_==2&&ld(o)))switch(f&&0<f.length&&(h=o.h,h.i=h.i.concat(f)),D){case 1:Is(o,5);break;case 4:Is(o,10);break;case 3:Is(o,6);break;default:Is(o,2)}}}function Hp(o,h){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*h}function Is(o,h){if(o.j.info("Error code "+h),h==2){var f=g(o.fb,o),_=o.Xa;const D=!_;_=new ks(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ol(_,"https"),cl(_),D?EI(_.toString(),f):TI(_.toString(),f)}else vt(2);o.G=0,o.l&&o.l.sa(h),Wp(o),Bp(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Wp(o){if(o.G=0,o.ka=[],o.l){const h=Sp(o.h);(h.length!=0||o.i.length!=0)&&(j(o.ka,h),j(o.ka,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.ra()}}function Qp(o,h,f){var _=f instanceof ks?sr(f):new ks(f);if(_.g!="")h&&(_.g=h+"."+_.g),ll(_,_.s);else{var D=l.location;_=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var O=new ks(null);_&&ol(O,_),h&&(O.g=h),D&&ll(O,D),f&&(O.l=f),_=O}return f=o.D,h=o.ya,f&&h&&Oe(_,f,h),Oe(_,"VER",o.la),Ia(o,_),_}function Yp(o,h,f){if(h&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Ca&&!o.pa?new qe(new ul({eb:f})):new qe(o.pa),h.Ha(o.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jp(){}t=Jp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function gl(){}gl.prototype.g=function(o,h){return new sn(o,h)};function sn(o,h){Pe.call(this),this.g=new Up(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(o?o["X-WebChannel-Client-Profile"]=h.va:o={"X-WebChannel-Client-Profile":h.va}),this.g.S=o,(o=h&&h.Sb)&&!v(o)&&(this.g.m=o),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new oi(this)}C(sn,Pe),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){od(this.g)},sn.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=fa(o),o=f);h.i.push(new dI(h.Ya++,o)),h.G==3&&ml(h)},sn.prototype.N=function(){this.g.l=null,delete this.j,od(this.g),delete this.g,sn.aa.N.call(this)};function Xp(o){ni.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const f in h){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}C(Xp,ni);function Zp(){_s.call(this),this.status=1}C(Zp,_s);function oi(o){this.g=o}C(oi,Jp),oi.prototype.ua=function(){Je(this.g,"a")},oi.prototype.ta=function(o){Je(this.g,new Xp(o))},oi.prototype.sa=function(o){Je(this.g,new Zp)},oi.prototype.ra=function(){Je(this.g,"b")},gl.prototype.createWebChannel=gl.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,fT=function(){return new gl},hT=function(){return ri()},dT=qt,nf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zn.NO_ERROR=0,zn.TIMEOUT=8,zn.HTTP_ERROR=6,oc=zn,ga.COMPLETE="complete",uT=ga,tl.EventType=Nr,Nr.OPEN="a",Nr.CLOSE="b",Nr.ERROR="c",Nr.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,Fa=tl,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,cT=qe}).apply(typeof Ml<"u"?Ml:typeof self<"u"?self:typeof window<"u"?window:{});const By="@firebase/firestore",zy="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new Tu("@firebase/firestore");function ui(){return Gs.logLevel}function W(t,...e){if(Gs.logLevel<=me.DEBUG){const n=e.map(xm);Gs.debug(`Firestore (${sa}): ${t}`,...n)}}function Tr(t,...e){if(Gs.logLevel<=me.ERROR){const n=e.map(xm);Gs.error(`Firestore (${sa}): ${t}`,...n)}}function Ki(t,...e){if(Gs.logLevel<=me.WARN){const n=e.map(xm);Gs.warn(`Firestore (${sa}): ${t}`,...n)}}function xm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,mT(t,r,n)}function mT(t,e,n){let r=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Tr(r),new Error(r)}function Se(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||mT(e,s,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Fn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class n1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class r1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class s1{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new mr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new mr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string",31837,{l:r}),new pT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new Mt(e)}}class i1{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class a1{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new i1(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $y{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class o1{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Se(this.o===void 0,3512);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,W("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $y(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $y(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=l1(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function rf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Gd(s)===Gd(i)?pe(s,i):Gd(s)?1:-1}return pe(t.length,e.length)}const c1=55296,u1=57343;function Gd(t){const e=t.charCodeAt(0);return e>=c1&&e<=u1}function qi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="__name__";class Kn{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Kn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Kn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return pe(e.length,n.length)}static compareSegments(e,n){const r=Kn.isNumericId(e),s=Kn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Kn.extractNumericId(e).compare(Kn.extractNumericId(n)):rf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return es.fromString(e.substring(4,e.length-2))}}class be extends Kn{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new be(n)}static emptyPath(){return new be([])}}const d1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends Kn{construct(e,n,r){return new Tt(e,n,r)}static isValidIdentifier(e){return d1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gy}static keyField(){return new Tt([Gy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new H(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new H(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(be.fromString(e))}static fromName(e){return new te(be.fromString(e).popFirst(5))}static empty(){return new te(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t,e,n){if(!n)throw new H(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function h1(t,e,n,r){if(e===!0&&r===!0)throw new H(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ky(t){if(!te.isDocumentKey(t))throw new H(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qy(t){if(te.isDocumentKey(t))throw new H(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Au(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se(12329,{type:typeof t})}function en(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Au(t);throw new H(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t,e){const n={typeString:t};return e&&(n.value=e),n}function $o(t,e){if(!yT(t))throw new H(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new H(V.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=-62135596800,Wy=1e6;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Wy);return new Ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Hy)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wy}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($o(e,Ve._jsonSchema))return new Ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:st("string",Ve._jsonSchemaVersion),seconds:st("number"),nanoseconds:st("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ve(0,0))}static max(){return new ae(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=-1;function f1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new ss(s,te.empty(),e)}function m1(t){return new ss(t.readTime,t.key,Ao)}class ss{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ss(ae.min(),te.empty(),Ao)}static max(){return new ss(ae.max(),te.empty(),Ao)}}function p1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==g1)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(m=>{a[d]=m,++l,l===i&&r(a)},m=>s(m))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function v1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function aa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm=-1;function xu(t){return t==null}function Kc(t){return t===0&&1/t==-1/0}function _1(t){return typeof t=="number"&&Number.isInteger(t)&&!Kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="";function w1(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Qy(e)),e=E1(t.get(n),e);return Qy(e)}function E1(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case vT:n+="";break;default:n+=i}}return n}function Qy(t){return t+vT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ps(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _T(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vl(this.root,e,this.comparator,!0)}}class Vl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Et.RED,this.left=s??Et.EMPTY,this.right=i??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jy(this.data.getIterator())}getIteratorFrom(e){return new Jy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class Jy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new ln([])}unionWith(e){let n=new ct(Tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new wT("Invalid base64 string: "+i):i}}(e);return new At(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new At(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}At.EMPTY_BYTE_STRING=new At("");const T1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const n=T1.exec(t);if(Se(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function as(t){return typeof t=="string"?At.fromBase64String(t):At.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="server_timestamp",TT="__type__",kT="__previous_value__",IT="__local_write_time__";function bm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[TT])==null?void 0:r.stringValue)===ET}function Cu(t){const e=t.mapValue.fields[kT];return bm(e)?Cu(e):e}function No(t){const e=is(t.mapValue.fields[IT].timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n,r,s,i,a,l,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const qc="(default)";class xo{constructor(e,n){this.projectId=e,this.database=n||qc}static empty(){return new xo("","")}get isDefaultDatabase(){return this.database===qc}isEqual(e){return e instanceof xo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="__type__",I1="__max__",Ll={mapValue:{}},AT="__vector__",Hc="value";function os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bm(t)?4:A1(t)?9007199254740991:S1(t)?10:11:se(28295,{value:t})}function nr(t,e){if(t===e)return!0;const n=os(t);if(n!==os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return No(t).isEqual(No(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=is(s.timestampValue),l=is(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return as(s.bytesValue).isEqual(as(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Xe(s.geoPointValue.latitude)===Xe(i.geoPointValue.latitude)&&Xe(s.geoPointValue.longitude)===Xe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Xe(s.integerValue)===Xe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Xe(s.doubleValue),l=Xe(i.doubleValue);return a===l?Kc(a)===Kc(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return qi(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Yy(a)!==Yy(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!nr(a[u],l[u])))return!1;return!0}(t,e);default:return se(52216,{left:t})}}function Co(t,e){return(t.values||[]).find(n=>nr(n,e))!==void 0}function Hi(t,e){if(t===e)return 0;const n=os(t),r=os(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Xe(i.integerValue||i.doubleValue),u=Xe(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Xy(t.timestampValue,e.timestampValue);case 4:return Xy(No(t),No(e));case 5:return rf(t.stringValue,e.stringValue);case 6:return function(i,a){const l=as(i),u=as(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const m=pe(l[d],u[d]);if(m!==0)return m}return pe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=pe(Xe(i.latitude),Xe(a.latitude));return l!==0?l:pe(Xe(i.longitude),Xe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zy(t.arrayValue,e.arrayValue);case 10:return function(i,a){var g,k,C,R;const l=i.fields||{},u=a.fields||{},d=(g=l[Hc])==null?void 0:g.arrayValue,m=(k=u[Hc])==null?void 0:k.arrayValue,p=pe(((C=d==null?void 0:d.values)==null?void 0:C.length)||0,((R=m==null?void 0:m.values)==null?void 0:R.length)||0);return p!==0?p:Zy(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Ll.mapValue&&a===Ll.mapValue)return 0;if(i===Ll.mapValue)return 1;if(a===Ll.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=a.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const g=rf(u[p],m[p]);if(g!==0)return g;const k=Hi(l[u[p]],d[m[p]]);if(k!==0)return k}return pe(u.length,m.length)}(t.mapValue,e.mapValue);default:throw se(23264,{he:n})}}function Xy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=is(t),r=is(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function Zy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Hi(n[s],r[s]);if(i)return i}return pe(n.length,r.length)}function Wi(t){return sf(t)}function sf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=is(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return as(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=sf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${sf(n.fields[a])}`;return s+"}"}(t.mapValue):se(61005,{value:t})}function lc(t){switch(os(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cu(t);return e?16+lc(e):16;case 5:return 2*t.stringValue.length;case 6:return as(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+lc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ps(r.fields,(i,a)=>{s+=i.length+lc(a)}),s}(t.mapValue);default:throw se(13486,{value:t})}}function ev(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function af(t){return!!t&&"integerValue"in t}function jm(t){return!!t&&"arrayValue"in t}function tv(t){return!!t&&"nullValue"in t}function nv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cc(t){return!!t&&"mapValue"in t}function S1(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ST])==null?void 0:r.stringValue)===AT}function eo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ps(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=eo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eo(t.arrayValue.values[n]);return e}return{...t}}function A1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===I1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eo(n)}setAll(e){let n=Tt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=eo(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());cc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];cc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ps(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Qt(eo(this.value))}}function NT(t){const e=[];return ps(t.fields,(n,r)=>{const s=new Tt([n]);if(cc(r)){const i=NT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Lt(e,0,ae.min(),ae.min(),ae.min(),Qt.empty(),0)}static newFoundDocument(e,n,r,s){return new Lt(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new Lt(e,2,n,ae.min(),ae.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new Lt(e,3,n,ae.min(),ae.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n){this.position=e,this.inclusive=n}}function rv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(a.referenceValue),n.key):r=Hi(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function sv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n="asc"){this.field=e,this.dir=n}}function N1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{}class rt extends xT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new C1(e,n,r):n==="array-contains"?new j1(e,r):n==="in"?new D1(e,r):n==="not-in"?new P1(e,r):n==="array-contains-any"?new O1(e,r):new rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new R1(e,r):new b1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hi(n,this.value)):n!==null&&os(this.value)===os(n)&&this.matchesComparison(Hi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends xT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Vn(e,n)}matches(e){return CT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function CT(t){return t.op==="and"}function RT(t){return x1(t)&&CT(t)}function x1(t){for(const e of t.filters)if(e instanceof Vn)return!1;return!0}function of(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+Wi(t.value);if(RT(t))return t.filters.map(e=>of(e)).join(",");{const e=t.filters.map(n=>of(n)).join(",");return`${t.op}(${e})`}}function bT(t,e){return t instanceof rt?function(r,s){return s instanceof rt&&r.op===s.op&&r.field.isEqual(s.field)&&nr(r.value,s.value)}(t,e):t instanceof Vn?function(r,s){return s instanceof Vn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&bT(a,s.filters[l]),!0):!1}(t,e):void se(19439)}function jT(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${Wi(n.value)}`}(t):t instanceof Vn?function(n){return n.op.toString()+" {"+n.getFilters().map(jT).join(" ,")+"}"}(t):"Filter"}class C1 extends rt{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class R1 extends rt{constructor(e,n){super(e,"in",n),this.keys=DT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class b1 extends rt{constructor(e,n){super(e,"not-in",n),this.keys=DT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function DT(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class j1 extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jm(n)&&Co(n.arrayValue,this.value)}}class D1 extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Co(this.value.arrayValue,n)}}class P1 extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Co(this.value.arrayValue,n)}}class O1 extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Co(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function iv(t,e=null,n=[],r=[],s=null,i=null,a=null){return new M1(t,e,n,r,s,i,a)}function Dm(t){const e=oe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>of(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),xu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wi(r)).join(",")),e.Te=n}return e.Te}function Pm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!N1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sv(t.startAt,e.startAt)&&sv(t.endAt,e.endAt)}function lf(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function V1(t,e,n,r,s,i,a,l){return new oa(t,e,n,r,s,i,a,l)}function Ru(t){return new oa(t)}function av(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PT(t){return t.collectionGroup!==null}function to(t){const e=oe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ct(Tt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ro(i,r))}),n.has(Tt.keyField().canonicalString())||e.Ie.push(new Ro(Tt.keyField(),r))}return e.Ie}function Jn(t){const e=oe(t);return e.Ee||(e.Ee=L1(e,to(t))),e.Ee}function L1(t,e){if(t.limitType==="F")return iv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ro(s.field,i)});const n=t.endAt?new Wc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wc(t.startAt.position,t.startAt.inclusive):null;return iv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cf(t,e){const n=t.filters.concat([e]);return new oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qc(t,e,n){return new oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bu(t,e){return Pm(Jn(t),Jn(e))&&t.limitType===e.limitType}function OT(t){return`${Dm(Jn(t))}|lt:${t.limitType}`}function di(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>jT(s)).join(", ")}]`),xu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Wi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Wi(s)).join(",")),`Target(${r})`}(Jn(t))}; limitType=${t.limitType})`}function ju(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of to(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const d=rv(a,l,u);return a.inclusive?d<=0:d<0}(r.startAt,to(r),s)||r.endAt&&!function(a,l,u){const d=rv(a,l,u);return a.inclusive?d>=0:d>0}(r.endAt,to(r),s))}(t,e)}function F1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function MT(t){return(e,n)=>{let r=!1;for(const s of to(t)){const i=U1(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function U1(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Hi(u,d):se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return _T(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new Ke(te.comparator);function kr(){return B1}const VT=new Ke(te.comparator);function Ua(...t){let e=VT;for(const n of t)e=e.insert(n.key,n);return e}function LT(t){let e=VT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bs(){return no()}function FT(){return no()}function no(){return new Zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const z1=new Ke(te.comparator),$1=new ct(te.comparator);function ge(...t){let e=$1;for(const n of t)e=e.add(n);return e}const G1=new ct(pe);function K1(){return G1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function UT(t){return{integerValue:""+t}}function q1(t,e){return _1(e)?UT(e):Om(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(){this._=void 0}}function H1(t,e,n){return t instanceof bo?function(s,i){const a={fields:{[TT]:{stringValue:ET},[IT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&bm(i)&&(i=Cu(i)),i&&(a.fields[kT]=i),{mapValue:a}}(n,e):t instanceof Qi?zT(t,e):t instanceof jo?$T(t,e):function(s,i){const a=BT(s,i),l=ov(a)+ov(s.Ae);return af(a)&&af(s.Ae)?UT(l):Om(s.serializer,l)}(t,e)}function W1(t,e,n){return t instanceof Qi?zT(t,e):t instanceof jo?$T(t,e):n}function BT(t,e){return t instanceof Yc?function(r){return af(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class bo extends Du{}class Qi extends Du{constructor(e){super(),this.elements=e}}function zT(t,e){const n=GT(e);for(const r of t.elements)n.some(s=>nr(s,r))||n.push(r);return{arrayValue:{values:n}}}class jo extends Du{constructor(e){super(),this.elements=e}}function $T(t,e){let n=GT(e);for(const r of t.elements)n=n.filter(s=>!nr(s,r));return{arrayValue:{values:n}}}class Yc extends Du{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ov(t){return Xe(t.integerValue||t.doubleValue)}function GT(t){return jm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n){this.field=e,this.transform=n}}function Q1(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Qi&&s instanceof Qi||r instanceof jo&&s instanceof jo?qi(r.elements,s.elements,nr):r instanceof Yc&&s instanceof Yc?nr(r.Ae,s.Ae):r instanceof bo&&s instanceof bo}(t.transform,e.transform)}class Y1{constructor(e,n){this.version=e,this.transformResults=n}}class En{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pu{}function qT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mm(t.key,En.none()):new Go(t.key,t.data,En.none());{const n=t.data,r=Qt.empty();let s=new ct(Tt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new gs(t.key,r,new ln(s.toArray()),En.none())}}function J1(t,e,n){t instanceof Go?function(s,i,a){const l=s.value.clone(),u=cv(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof gs?function(s,i,a){if(!uc(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=cv(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(HT(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ro(t,e,n,r){return t instanceof Go?function(i,a,l,u){if(!uc(i.precondition,a))return l;const d=i.value.clone(),m=uv(i.fieldTransforms,u,a);return d.setAll(m),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof gs?function(i,a,l,u){if(!uc(i.precondition,a))return l;const d=uv(i.fieldTransforms,u,a),m=a.data;return m.setAll(HT(i)),m.setAll(d),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,a,l){return uc(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function X1(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=BT(r.transform,s||null);i!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,i))}return n||null}function lv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&qi(r,s,(i,a)=>Q1(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Go extends Pu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class gs extends Pu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function HT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function cv(t,e,n){const r=new Map;Se(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,W1(a,l,n[s]))}return r}function uv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,H1(i,a,e))}return r}class Mm extends Pu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z1 extends Pu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&J1(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ro(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ro(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FT();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=qT(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&qi(this.mutations,e.mutations,(n,r)=>lv(n,r))&&qi(this.baseMutations,e.baseMutations,(n,r)=>lv(n,r))}}class Vm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Se(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return z1}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Vm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,we;function rR(t){switch(t){case V.OK:return se(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return se(15467,{code:t})}}function WT(t){if(t===void 0)return Tr("GRPC error has no .code"),V.UNKNOWN;switch(t){case tt.OK:return V.OK;case tt.CANCELLED:return V.CANCELLED;case tt.UNKNOWN:return V.UNKNOWN;case tt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case tt.INTERNAL:return V.INTERNAL;case tt.UNAVAILABLE:return V.UNAVAILABLE;case tt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case tt.NOT_FOUND:return V.NOT_FOUND;case tt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case tt.ABORTED:return V.ABORTED;case tt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case tt.DATA_LOSS:return V.DATA_LOSS;default:return se(39323,{code:t})}}(we=tt||(tt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=new es([4294967295,4294967295],0);function dv(t){const e=sR().encode(t),n=new lT;return n.update(e),new Uint8Array(n.digest())}function hv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new es([n,r],0),new es([s,i],0)]}class Lm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ba(`Invalid padding: ${n}`);if(r<0)throw new Ba(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ba(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ba(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=es.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(es.fromNumber(r)));return s.compare(iR)===1&&(s=new es([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=dv(e),[r,s]=hv(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Lm(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=dv(e),[r,s]=hv(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ko.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ou(ae.min(),s,new Ke(pe),kr(),ge())}}class Ko{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ko(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class QT{constructor(e,n){this.targetId=e,this.Ce=n}}class YT{constructor(e,n,r=At.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class fv{constructor(){this.ve=0,this.Fe=mv(),this.Me=At.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),r=ge();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se(38017,{changeType:i})}}),new Ko(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=mv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class aR{constructor(e){this.Ge=e,this.ze=new Map,this.je=kr(),this.Je=Fl(),this.He=Fl(),this.Ye=new Ke(pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(lf(i))if(r===0){const a=new te(i.path);this.et(n,a,Lt.newNoDocument(a,ae.min()))}else Se(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=as(r).toUint8Array()}catch(u){if(u instanceof wT)return Ki("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Lm(a,s,i)}catch(u){return Ki(u instanceof Ba?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&lf(l.target)){const u=new te(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Lt.newNoDocument(u,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=ge();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Ou(e,n,this.Ye,this.je,r);return this.je=kr(),this.Je=Fl(),this.He=Fl(),this.Ye=new Ke(pe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new fv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ct(pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ct(pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Fl(){return new Ke(te.comparator)}function mv(){return new Ke(te.comparator)}const oR={asc:"ASCENDING",desc:"DESCENDING"},lR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cR={and:"AND",or:"OR"};class uR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uf(t,e){return t.useProto3Json||xu(e)?e:{value:e}}function Jc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dR(t,e){return Jc(t,e.toTimestamp())}function Xn(t){return Se(!!t,49232),ae.fromTimestamp(function(n){const r=is(n);return new Ve(r.seconds,r.nanos)}(t))}function Fm(t,e){return df(t,e).canonicalString()}function df(t,e){const n=function(s){return new be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function XT(t){const e=be.fromString(t);return Se(rk(e),10190,{key:e.toString()}),e}function hf(t,e){return Fm(t.databaseId,e.path)}function Kd(t,e){const n=XT(e);if(n.get(1)!==t.databaseId.projectId)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(ek(n))}function ZT(t,e){return Fm(t.databaseId,e)}function hR(t){const e=XT(t);return e.length===4?be.emptyPath():ek(e)}function ff(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ek(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function pv(t,e,n){return{name:hf(t,e),fields:n.value.mapValue.fields}}function fR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:se(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(Se(m===void 0||typeof m=="string",58123),At.fromBase64String(m||"")):(Se(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),At.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const m=d.code===void 0?V.UNKNOWN:WT(d.code);return new H(m,d.message||"")}(a);n=new YT(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Kd(t,r.document.name),i=Xn(r.document.updateTime),a=r.document.createTime?Xn(r.document.createTime):ae.min(),l=new Qt({mapValue:{fields:r.document.fields}}),u=Lt.newFoundDocument(s,i,a,l),d=r.targetIds||[],m=r.removedTargetIds||[];n=new dc(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Kd(t,r.document),i=r.readTime?Xn(r.readTime):ae.min(),a=Lt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new dc([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Kd(t,r.document),i=r.removedTargetIds||[];n=new dc([],i,s,null)}else{if(!("filter"in e))return se(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new nR(s,i),l=r.targetId;n=new QT(l,a)}}return n}function mR(t,e){let n;if(e instanceof Go)n={update:pv(t,e.key,e.value)};else if(e instanceof Mm)n={delete:hf(t,e.key)};else if(e instanceof gs)n={update:pv(t,e.key,e.data),updateMask:kR(e.fieldMask)};else{if(!(e instanceof Z1))return se(16599,{Vt:e.type});n={verify:hf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof bo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Qi)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof jo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Yc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw se(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:dR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se(27497)}(t,e.precondition)),n}function pR(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?Xn(s.updateTime):Xn(i);return a.isEqual(ae.min())&&(a=Xn(i)),new Y1(a,s.transformResults||[])}(n,e))):[]}function gR(t,e){return{documents:[ZT(t,e.path)]}}function yR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ZT(t,s);const i=function(d){if(d.length!==0)return nk(Vn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:hi(g.field),direction:wR(g.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=uf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function vR(t){let e=hR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Se(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=tk(p);return g instanceof Vn&&RT(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(g=>function(C){return new Ro(fi(C.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,xu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,k=p.values||[];return new Wc(k,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,k=p.values||[];return new Wc(k,g)}(n.endAt)),V1(e,s,a,i,l,"F",u,d)}function _R(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fi(n.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=fi(n.unaryFilter.field);return rt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=fi(n.unaryFilter.field);return rt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=fi(n.unaryFilter.field);return rt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}}(t):t.fieldFilter!==void 0?function(n){return rt.create(fi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vn.create(n.compositeFilter.filters.map(r=>tk(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se(1026)}}(n.compositeFilter.op))}(t):se(30097,{filter:t})}function wR(t){return oR[t]}function ER(t){return lR[t]}function TR(t){return cR[t]}function hi(t){return{fieldPath:t.canonicalString()}}function fi(t){return Tt.fromServerFormat(t.fieldPath)}function nk(t){return t instanceof rt?function(n){if(n.op==="=="){if(nv(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NAN"}};if(tv(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nv(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NOT_NAN"}};if(tv(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hi(n.field),op:ER(n.op),value:n.value}}}(t):t instanceof Vn?function(n){const r=n.getFilters().map(s=>nk(s));return r.length===1?r[0]:{compositeFilter:{op:TR(n.op),filters:r}}}(t):se(54877,{filter:t})}function kR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n,r,s,i=ae.min(),a=ae.min(),l=At.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new $r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.yt=e}}function SR(t){const e=vR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.Cn=new NR}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(ss.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class NR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ct(be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ct(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sk=41943040;class Ht{static withCacheSize(e){return new Ht(e,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ht.DEFAULT_COLLECTION_PERCENTILE=10,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ht.DEFAULT=new Ht(sk,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ht.DISABLED=new Ht(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yi(0)}static cr(){return new Yi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="LruGarbageCollector",xR=1048576;function vv([t,e],[n,r]){const s=pe(t,n);return s===0?pe(e,r):s}class CR{constructor(e){this.Ir=e,this.buffer=new ct(vv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();vv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(yv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){aa(n)?W(yv,"Ignoring IndexedDB error during garbage collection: ",n):await ia(n)}await this.Vr(3e5)})}}class bR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Nu.ce);const r=new CR(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(gv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),ui()<=me.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function jR(t,e){return new bR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.changes=new Zs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ro(r.mutation,s,ln.empty(),Ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=bs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Ua();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=bs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=kr();const a=no(),l=function(){return no()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof gs)?i=i.insert(d.key,d):m!==void 0?(a.set(d.key,m.mutation.getFieldMask()),ro(m.mutation,d,m.mutation.getFieldMask(),Ve.now())):a.set(d.key,ln.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,m)=>a.set(d,m)),n.forEach((d,m)=>l.set(d,new PR(m,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=no();let s=new Ke((a,l)=>a-l),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||ln.empty();m=l.applyToLocalView(d,m),r.set(u,m);const p=(s.get(l.batchId)||ge()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,m=u.value,p=FT();m.forEach(g=>{if(!i.has(g)){const k=qT(n.get(g),r.get(g));k!==null&&p.set(g,k),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return L.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(bs());let l=Ao,u=i;return a.next(d=>L.forEach(d,(m,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(m)?L.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ge())).next(m=>({batchId:l,changes:LT(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Ua();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Ua();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const d=function(p,g){return new oa(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const m=d.getKey();a.get(m)===null&&(a=a.insert(m,Lt.newInvalidDocument(m)))});let l=Ua();return a.forEach((u,d)=>{const m=i.get(u);m!==void 0&&ro(m.mutation,d,ln.empty(),Ve.now()),ju(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Xn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:SR(s.bundledQuery),readTime:Xn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.overlays=new Ke(te.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bs();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=bs(),i=n.length+1,a=new te(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ke((d,m)=>d-m);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=bs(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const l=bs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>l.set(d,m)),!(l.size()>=s)););return L.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new tR(n,r));let i=this.qr.get(n);i===void 0&&(i=ge(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(){this.Qr=new ct(ht.$r),this.Ur=new ct(ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ht(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ht(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new te(new be([])),r=new ht(n,e),s=new ht(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new te(new be([])),r=new ht(n,e),s=new ht(n,e+1);let i=ge();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new ht(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ht{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return te.comparator(e.key,n.key)||pe(e.Yr,n.Yr)}static Kr(e,n){return pe(e.Yr,n.Yr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ct(ht.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new eR(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new ht(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Rm:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ht(n,0),s=new ht(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(pe);return n.forEach(s=>{const i=new ht(s,0),a=new ht(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const a=new ht(new te(i),0);let l=new ct(pe);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Yr)),!0)},a),L.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Se(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new ht(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new ht(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.ri=e,this.docs=function(){return new Ke(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let r=kr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Lt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=kr();const a=n.path,l=new te(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||p1(m1(m),r)<=0||(s.has(m.key)||ju(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new BR(this)}getSize(e){return L.resolve(this.size)}}class BR extends DR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.persistence=e,this.si=new Zs(n=>Dm(n),Pm),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Um,this.targetCount=0,this.ai=Yi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Yi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n){this.ui={},this.overlays={},this.ci=new Nu(0),this.li=!1,this.li=!0,this.hi=new LR,this.referenceDelegate=e(this),this.Pi=new zR(this),this.indexManager=new AR,this.remoteDocumentCache=function(s){return new UR(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new IR(n),this.Ii=new MR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new FR(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new $R(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class $R extends y1{constructor(e){super(),this.currentSequenceNumber=e}}class Bm{constructor(e){this.persistence=e,this.Ri=new Um,this.Vi=null}static mi(e){return new Bm(e)}get fi(){if(this.Vi)return this.Vi;throw se(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=te.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Xc{constructor(e,n){this.persistence=e,this.pi=new Zs(r=>w1(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=jR(this,n)}static mi(e,n){return new Xc(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,ae.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=lc(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new zm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return wA()?8:v1(Ut())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new GR;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ui()<=me.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",di(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(ui()<=me.DEBUG&&W("QueryEngine","Query:",di(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ui()<=me.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",di(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):L.resolve())}ys(e,n){if(av(n))return L.resolve(null);let r=Jn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Qc(n,null,"F"),r=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ge(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,l);return this.Cs(n,d,a,u.readTime)?this.ys(e,Qc(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return av(n)||s.isEqual(ae.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?L.resolve(null):(ui()<=me.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),di(n)),this.vs(e,a,n,f1(s,Ao)).next(l=>l))})}Ds(e,n){let r=new ct(MT(e));return n.forEach((s,i)=>{ju(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ui()<=me.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",di(n)),this.ps.getDocumentsMatchingQuery(e,n,ss.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="LocalStore",qR=3e8;class HR{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ke(pe),this.xs=new Zs(i=>Dm(i),Pm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function WR(t,e,n,r){return new HR(t,e,n,r)}async function ak(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=ge();for(const d of s){a.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of i){l.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function QR(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,d,m){const p=d.batch,g=p.keys();let k=L.resolve();return g.forEach(C=>{k=k.next(()=>m.getEntry(u,C)).next(R=>{const j=d.docVersions.get(C);Se(j!==null,48541),R.version.compareTo(j)<0&&(p.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),m.addEntry(R)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ge();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ok(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function YR(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let k=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?k=k.withResumeToken(At.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):m.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(m.resumeToken,r)),s=s.insert(p,k),function(R,j,w){return R.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=qR?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,k,m)&&l.push(n.Pi.updateTargetData(i,k))});let u=kr(),d=ge();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),l.push(JR(i,a,e.documentUpdates).next(m=>{u=m.ks,d=m.qs})),!r.isEqual(ae.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(m)}return L.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function JR(t,e,n){let r=ge(),s=ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=kr();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):W($m,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{ks:a,qs:s}})}function XR(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Rm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ZR(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new $r(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function mf(t,e,n){const r=oe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!aa(a))throw a;W($m,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function _v(t,e,n){const r=oe(t);let s=ae.min(),i=ge();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,m){const p=oe(u),g=p.xs.get(m);return g!==void 0?L.resolve(p.Ms.get(g)):p.Pi.getTargetData(d,m)}(r,a,Jn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:ae.min(),n?i:ge())).next(l=>(eb(r,F1(e),l),{documents:l,Qs:i})))}function eb(t,e,n){let r=t.Os.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class wv{constructor(){this.activeTargetIds=K1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tb{constructor(){this.Mo=new wv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="ConnectivityMonitor";class Tv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(Ev,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){W(Ev,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul=null;function pf(){return Ul===null?Ul=function(){return 268435456+Math.round(2147483648*Math.random())}():Ul++,"0x"+Ul.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="RestConnection",rb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===qc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=pf(),l=this.zo(e,n.toUriEncodedString());W(qd,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(l),m=ta(d);return this.Jo(e,l,u,r,m).then(p=>(W(qd,`Received RPC '${e}' ${a}: `,p),p),p=>{throw Ki(qd,`RPC '${e}' ${a} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=rb[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class ab extends sb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=pf();return new Promise((l,u)=>{const d=new cT;d.setWithCredentials(!0),d.listenOnce(uT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case oc.NO_ERROR:const p=d.getResponseJson();W(Ot,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),l(p);break;case oc.TIMEOUT:W(Ot,`RPC '${e}' ${a} timed out`),u(new H(V.DEADLINE_EXCEEDED,"Request time out"));break;case oc.HTTP_ERROR:const g=d.getStatus();if(W(Ot,`RPC '${e}' ${a} failed with status:`,g,"response text:",d.getResponseText()),g>0){let k=d.getResponseJson();Array.isArray(k)&&(k=k[0]);const C=k==null?void 0:k.error;if(C&&C.status&&C.message){const R=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(v)>=0?v:V.UNKNOWN}(C.status);u(new H(R,C.message))}else u(new H(V.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new H(V.UNAVAILABLE,"Connection failed."));break;default:se(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{W(Ot,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);W(Ot,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",m,r,15)})}T_(e,n,r){const s=pf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=fT(),l=hT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");W(Ot,`Creating RPC '${e}' stream ${s}: ${m}`,u);const p=a.createWebChannel(m,u);this.I_(p);let g=!1,k=!1;const C=new ib({Yo:j=>{k?W(Ot,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(g||(W(Ot,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),W(Ot,`RPC '${e}' stream ${s} sending:`,j),p.send(j))},Zo:()=>p.close()}),R=(j,w,v)=>{j.listen(w,I=>{try{v(I)}catch(P){setTimeout(()=>{throw P},0)}})};return R(p,Fa.EventType.OPEN,()=>{k||(W(Ot,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),R(p,Fa.EventType.CLOSE,()=>{k||(k=!0,W(Ot,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(p))}),R(p,Fa.EventType.ERROR,j=>{k||(k=!0,Ki(Ot,`RPC '${e}' stream ${s} transport errored. Name:`,j.name,"Message:",j.message),C.a_(new H(V.UNAVAILABLE,"The operation could not be completed")))}),R(p,Fa.EventType.MESSAGE,j=>{var w;if(!k){const v=j.data[0];Se(!!v,16349);const I=v,P=(I==null?void 0:I.error)||((w=I[0])==null?void 0:w.error);if(P){W(Ot,`RPC '${e}' stream ${s} received error:`,P);const U=P.status;let B=function(E){const N=tt[E];if(N!==void 0)return WT(N)}(U),A=P.message;B===void 0&&(B=V.INTERNAL,A="Unknown error status: "+U+" with message "+P.message),k=!0,C.a_(new H(B,A)),p.close()}else W(Ot,`RPC '${e}' stream ${s} received:`,v),C.u_(v)}}),R(l,dT.STAT_EVENT,j=>{j.stat===nf.PROXY?W(Ot,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===nf.NOPROXY&&W(Ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Hd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t){return new uR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="PersistentStream";class ck{constructor(e,n,r,s,i,a,l,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Tr(n.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new H(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(kv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(W(kv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ob extends ck{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=fR(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ae.min():a.readTime?Xn(a.readTime):ae.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ff(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=lf(u)?{documents:gR(i,u)}:{query:yR(i,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=JT(i,a.resumeToken);const d=uf(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(ae.min())>0){l.readTime=Jc(i,a.snapshotVersion.toTimestamp());const d=uf(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=_R(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ff(this.serializer),n.removeTarget=e,this.q_(n)}}class lb extends ck{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=pR(e.writeResults,e.commitTime),r=Xn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ff(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mR(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{}class ub extends cb{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,df(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(V.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,df(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new H(V.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class db{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Tr(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="RemoteStore";class hb{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{ei(this)&&(W(Ks,"Restarting streams for network reachability change."),await async function(u){const d=oe(u);d.Ea.add(4),await qo(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Vu(d)}(this))})}),this.Ra=new db(r,s)}}async function Vu(t){if(ei(t))for(const e of t.da)await e(!0)}async function qo(t){for(const e of t.da)await e(!1)}function uk(t,e){const n=oe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Hm(n)?qm(n):la(n).O_()&&Km(n,e))}function Gm(t,e){const n=oe(t),r=la(n);n.Ia.delete(e),r.O_()&&dk(n,e),n.Ia.size===0&&(r.O_()?r.L_():ei(n)&&n.Ra.set("Unknown"))}function Km(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}la(t).Y_(e)}function dk(t,e){t.Va.Ue(e),la(t).Z_(e)}function qm(t){t.Va=new aR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),la(t).start(),t.Ra.ua()}function Hm(t){return ei(t)&&!la(t).x_()&&t.Ia.size>0}function ei(t){return oe(t).Ea.size===0}function hk(t){t.Va=void 0}async function fb(t){t.Ra.set("Online")}async function mb(t){t.Ia.forEach((e,n)=>{Km(t,e)})}async function pb(t,e){hk(t),Hm(t)?(t.Ra.ha(e),qm(t)):t.Ra.set("Unknown")}async function gb(t,e,n){if(t.Ra.set("Online"),e instanceof YT&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){W(Ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zc(t,r)}else if(e instanceof dc?t.Va.Ze(e):e instanceof QT?t.Va.st(e):t.Va.tt(e),!n.isEqual(ae.min()))try{const r=await ok(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const m=i.Ia.get(u);if(!m)return;i.Ia.set(u,m.withResumeToken(At.EMPTY_BYTE_STRING,m.snapshotVersion)),dk(i,u);const p=new $r(m.target,u,d,m.sequenceNumber);Km(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W(Ks,"Failed to raise snapshot:",r),await Zc(t,r)}}async function Zc(t,e,n){if(!aa(e))throw e;t.Ea.add(1),await qo(t),t.Ra.set("Offline"),n||(n=()=>ok(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(Ks,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Vu(t)})}function fk(t,e){return e().catch(n=>Zc(t,n,e))}async function Lu(t){const e=oe(t),n=ls(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Rm;for(;yb(e);)try{const s=await XR(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,vb(e,s)}catch(s){await Zc(e,s)}mk(e)&&pk(e)}function yb(t){return ei(t)&&t.Ta.length<10}function vb(t,e){t.Ta.push(e);const n=ls(t);n.O_()&&n.X_&&n.ea(e.mutations)}function mk(t){return ei(t)&&!ls(t).x_()&&t.Ta.length>0}function pk(t){ls(t).start()}async function _b(t){ls(t).ra()}async function wb(t){const e=ls(t);for(const n of t.Ta)e.ea(n.mutations)}async function Eb(t,e,n){const r=t.Ta.shift(),s=Vm.from(r,e,n);await fk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lu(t)}async function Tb(t,e){e&&ls(t).X_&&await async function(r,s){if(function(a){return rR(a)&&a!==V.ABORTED}(s.code)){const i=r.Ta.shift();ls(r).B_(),await fk(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Lu(r)}}(t,e),mk(t)&&pk(t)}async function Iv(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),W(Ks,"RemoteStore received new credentials");const r=ei(n);n.Ea.add(3),await qo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vu(n)}async function kb(t,e){const n=oe(t);e?(n.Ea.delete(2),await Vu(n)):e||(n.Ea.add(2),await qo(n),n.Ra.set("Unknown"))}function la(t){return t.ma||(t.ma=function(n,r,s){const i=oe(n);return i.sa(),new ob(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:fb.bind(null,t),t_:mb.bind(null,t),r_:pb.bind(null,t),H_:gb.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Hm(t)?qm(t):t.Ra.set("Unknown")):(await t.ma.stop(),hk(t))})),t.ma}function ls(t){return t.fa||(t.fa=function(n,r,s){const i=oe(n);return i.sa(),new lb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_b.bind(null,t),r_:Tb.bind(null,t),ta:wb.bind(null,t),na:Eb.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Lu(t)):(await t.fa.stop(),t.Ta.length>0&&(W(Ks,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Wm(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qm(t,e){if(Tr("AsyncQueue",`${e}: ${t}`),aa(t))return new H(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{static emptySet(e){return new Vi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Ua(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.ga=new Ke(te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):se(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ji{constructor(e,n,r,s,i,a,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ji(e,n,Vi.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Sb{constructor(){this.queries=Av(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=Av(),i.forEach((a,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new H(V.ABORTED,"Firestore shutting down"))}}function Av(){return new Zs(t=>OT(t),bu)}async function Ym(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new Ib,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Qm(a,`Initialization of query '${di(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Xm(n)}async function Jm(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ab(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&Xm(n)}function Nb(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Xm(t){t.Ca.forEach(e=>{e.next()})}var gf,Nv;(Nv=gf||(gf={})).Ma="default",Nv.Cache="cache";class Zm{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ji(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ji.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.key=e}}class yk{constructor(e){this.key=e}}class xb{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ge(),this.mutatedKeys=ge(),this.eu=MT(e),this.tu=new Vi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Sv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),k=ju(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),R=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let j=!1;g&&k?g.data.isEqual(k.data)?C!==R&&(r.track({type:3,doc:k}),j=!0):this.su(g,k)||(r.track({type:2,doc:k}),j=!0,(u&&this.eu(k,u)>0||d&&this.eu(k,d)<0)&&(l=!0)):!g&&k?(r.track({type:0,doc:k}),j=!0):g&&!k&&(r.track({type:1,doc:g}),j=!0,(u||d)&&(l=!0)),j&&(k?(a=a.add(k),i=R?i.add(m):i.delete(m)):(a=a.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,p)=>function(k,C){const R=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{Rt:j})}};return R(k)-R(C)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,a.length!==0||d?{snapshot:new Ji(this.query,e.tu,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Sv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new yk(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new gk(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ji.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ep="SyncEngine";class Cb{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Rb{constructor(e){this.key=e,this.hu=!1}}class bb{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Zs(l=>OT(l),bu),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(te.comparator),this.Au=new Map,this.Ru=new Um,this.Vu={},this.mu=new Map,this.fu=Yi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jb(t,e,n=!0){const r=kk(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await vk(r,e,n,!0),s}async function Db(t,e){const n=kk(t);await vk(n,e,!0,!1)}async function vk(t,e,n,r){const s=await ZR(t.localStore,Jn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Pb(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&uk(t.remoteStore,s),l}async function Pb(t,e,n,r,s){t.pu=(p,g,k)=>async function(R,j,w,v){let I=j.view.ru(w);I.Cs&&(I=await _v(R.localStore,j.query,!1).then(({documents:A})=>j.view.ru(A,I)));const P=v&&v.targetChanges.get(j.targetId),U=v&&v.targetMismatches.get(j.targetId)!=null,B=j.view.applyChanges(I,R.isPrimaryClient,P,U);return Cv(R,j.targetId,B.au),B.snapshot}(t,p,g,k);const i=await _v(t.localStore,e,!0),a=new xb(e,i.Qs),l=a.ru(i.documents),u=Ko.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,u);Cv(t,n,d.au);const m=new Cb(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function Ob(t,e,n){const r=oe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!bu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await mf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gm(r.remoteStore,s.targetId),yf(r,s.targetId)}).catch(ia)):(yf(r,s.targetId),await mf(r.localStore,s.targetId,!0))}async function Mb(t,e){const n=oe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gm(n.remoteStore,r.targetId))}async function Vb(t,e,n){const r=Gb(t);try{const s=await function(a,l){const u=oe(a),d=Ve.now(),m=l.reduce((k,C)=>k.add(C.key),ge());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",k=>{let C=kr(),R=ge();return u.Ns.getEntries(k,m).next(j=>{C=j,C.forEach((w,v)=>{v.isValidDocument()||(R=R.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(k,C)).next(j=>{p=j;const w=[];for(const v of l){const I=X1(v,p.get(v.key).overlayedDocument);I!=null&&w.push(new gs(v.key,I,NT(I.value.mapValue),En.exists(!0)))}return u.mutationQueue.addMutationBatch(k,d,w,l)}).next(j=>{g=j;const w=j.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(k,j.batchId,w)})}).then(()=>({batchId:g.batchId,changes:LT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let d=a.Vu[a.currentUser.toKey()];d||(d=new Ke(pe)),d=d.insert(l,u),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await Ho(r,s.changes),await Lu(r.remoteStore)}catch(s){const i=Qm(s,"Failed to persist write");n.reject(i)}}async function _k(t,e){const n=oe(t);try{const r=await YR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(Se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Se(a.hu,14607):s.removedDocuments.size>0&&(Se(a.hu,42227),a.hu=!1))}),await Ho(n,r,e)}catch(r){await ia(r)}}function xv(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=oe(a);u.onlineState=l;let d=!1;u.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(l)&&(d=!0)}),d&&Xm(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Lb(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Ke(te.comparator);a=a.insert(i,Lt.newNoDocument(i,ae.min()));const l=ge().add(i),u=new Ou(ae.min(),new Map,new Ke(pe),a,l);await _k(r,u),r.du=r.du.remove(i),r.Au.delete(e),tp(r)}else await mf(r.localStore,e,!1).then(()=>yf(r,e,n)).catch(ia)}async function Fb(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await QR(n.localStore,e);Ek(n,r,null),wk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ho(n,s)}catch(s){await ia(s)}}async function Ub(t,e,n){const r=oe(t);try{const s=await function(a,l){const u=oe(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(Se(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);Ek(r,e,n),wk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ho(r,s)}catch(s){await ia(s)}}function wk(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Ek(t,e,n){const r=oe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function yf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Tk(t,r)})}function Tk(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Gm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),tp(t))}function Cv(t,e,n){for(const r of n)r instanceof gk?(t.Ru.addReference(r.key,e),Bb(t,r)):r instanceof yk?(W(ep,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Tk(t,r.key)):se(19791,{wu:r})}function Bb(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(W(ep,"New document in limbo: "+n),t.Eu.add(r),tp(t))}function tp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new te(be.fromString(e)),r=t.fu.next();t.Au.set(r,new Rb(n)),t.du=t.du.insert(n,r),uk(t.remoteStore,new $r(Jn(Ru(n.path)),r,"TargetPurposeLimboResolution",Nu.ce))}}async function Ho(t,e,n){const r=oe(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{a.push(r.pu(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=zm.As(u.targetId,d);i.push(p)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(u,d){const m=oe(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(d,g=>L.forEach(g.Es,k=>m.persistence.referenceDelegate.addReference(p,g.targetId,k)).next(()=>L.forEach(g.ds,k=>m.persistence.referenceDelegate.removeReference(p,g.targetId,k)))))}catch(p){if(!aa(p))throw p;W($m,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const k=m.Ms.get(g),C=k.snapshotVersion,R=k.withLastLimboFreeSnapshotVersion(C);m.Ms=m.Ms.insert(g,R)}}}(r.localStore,i))}async function zb(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){W(ep,"User change. New user:",e.toKey());const r=await ak(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new H(V.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ho(n,r.Ls)}}function $b(t,e){const n=oe(t),r=n.Au.get(e);if(r&&r.hu)return ge().add(r.key);{let s=ge();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function kk(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_k.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$b.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lb.bind(null,e),e.Pu.H_=Ab.bind(null,e.eventManager),e.Pu.yu=Nb.bind(null,e.eventManager),e}function Gb(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ub.bind(null,e),e}class eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return WR(this.persistence,new KR,e.initialUser,this.serializer)}Cu(e){return new ik(Bm.mi,this.serializer)}Du(e){return new tb}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eu.provider={build:()=>new eu};class Kb extends eu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Se(this.persistence.referenceDelegate instanceof Xc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new ik(r=>Xc.mi(r,n),this.serializer)}}class vf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zb.bind(null,this.syncEngine),await kb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Sb}()}createDatastore(e){const n=Mu(e.databaseInfo.databaseId),r=function(i){return new ab(i)}(e.databaseInfo);return function(i,a,l,u){return new ub(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new hb(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>xv(this.syncEngine,n,0),function(){return Tv.v()?new Tv:new nb}())}createSyncEngine(e,n){return function(s,i,a,l,u,d,m){const p=new bb(s,i,a,l,u,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);W(Ks,"RemoteStore shutting down."),i.Ea.add(5),await qo(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}vf.provider={build:()=>new vf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="FirestoreClient";class qb{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Mt.UNAUTHENTICATED,this.clientId=Cm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{W(cs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(W(cs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Qm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wd(t,e){t.asyncQueue.verifyOperationInProgress(),W(cs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ak(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Hb(t);W(cs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Iv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Iv(e.remoteStore,s)),t._onlineComponents=e}async function Hb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(cs,"Using user provided OfflineComponentProvider");try{await Wd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ki("Error using user provided cache. Falling back to memory cache: "+n),await Wd(t,new eu)}}else W(cs,"Using default OfflineComponentProvider"),await Wd(t,new Kb(void 0));return t._offlineComponents}async function Ik(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(cs,"Using user provided OnlineComponentProvider"),await Rv(t,t._uninitializedComponentsProvider._online)):(W(cs,"Using default OnlineComponentProvider"),await Rv(t,new vf))),t._onlineComponents}function Wb(t){return Ik(t).then(e=>e.syncEngine)}async function tu(t){const e=await Ik(t),n=e.eventManager;return n.onListen=jb.bind(null,e.syncEngine),n.onUnlisten=Ob.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Db.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Mb.bind(null,e.syncEngine),n}function Qb(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,d){const m=new np({next:g=>{m.Nu(),a.enqueueAndForget(()=>Jm(i,p));const k=g.docs.has(l);!k&&g.fromCache?d.reject(new H(V.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&g.fromCache&&u&&u.source==="server"?d.reject(new H(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Zm(Ru(l.path),m,{includeMetadataChanges:!0,qa:!0});return Ym(i,p)}(await tu(t),t.asyncQueue,e,n,r)),r.promise}function Yb(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,d){const m=new np({next:g=>{m.Nu(),a.enqueueAndForget(()=>Jm(i,p)),g.fromCache&&u.source==="server"?d.reject(new H(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Zm(l,m,{includeMetadataChanges:!0,qa:!0});return Ym(i,p)}(await tu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="firestore.googleapis.com",jv=!0;class Dv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ak,this.ssl=jv}else this.host=e.host,this.ssl=e.ssl??jv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xR)throw new H(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sk(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new n1;switch(r.type){case"firstParty":return new a1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bv.get(n);r&&(W("ComponentProvider","Removing Datastore"),bv.delete(n),r.terminate())}(this),Promise.resolve()}}function Jb(t,e,n,r={}){var d;t=en(t,Fu);const s=ta(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(_E(`https://${l}`),wE("Firestore",!0)),i.host!==Ak&&i.host!==l&&Ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!_r(u,a)&&(t._setSettings(u),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=Mt.MOCK_USER;else{m=hA(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new H(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Mt(g)}t._authCredentials=new r1(new pT(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ar(this.firestore,e,this._query)}}class We{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new We(this.firestore,e,this._key)}toJSON(){return{type:We._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if($o(n,We._jsonSchema))return new We(e,r||null,new te(be.fromString(n.referencePath)))}}We._jsonSchemaVersion="firestore/documentReference/1.0",We._jsonSchema={type:st("string",We._jsonSchemaVersion),referencePath:st("string")};class ts extends Ar{constructor(e,n,r){super(e,n,Ru(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new te(e))}withConverter(e){return new ts(this.firestore,e,this._path)}}function De(t,e,...n){if(t=et(t),gT("collection","path",e),t instanceof Fu){const r=be.fromString(e,...n);return qy(r),new ts(t,null,r)}{if(!(t instanceof We||t instanceof ts))throw new H(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return qy(r),new ts(t.firestore,null,r)}}function Bt(t,e,...n){if(t=et(t),arguments.length===1&&(e=Cm.newId()),gT("doc","path",e),t instanceof Fu){const r=be.fromString(e,...n);return Ky(r),new We(t,null,new te(r))}{if(!(t instanceof We||t instanceof ts))throw new H(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return Ky(r),new We(t.firestore,t instanceof ts?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="AsyncQueue";class Ov{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lk(this,"async_queue_retry"),this._c=()=>{const r=Hd();r&&W(Pv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Hd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Hd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new mr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!aa(e))throw e;W(Pv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Tr("INTERNAL UNHANDLED ERROR: ",Mv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Wm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&se(47125,{Pc:Mv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Mv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ir extends Fu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Ov,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ov(e),this._firestoreClient=void 0,await e}}}function Xb(t,e){const n=typeof t=="object"?t:_m(),r=typeof t=="string"?t:qc,s=Js(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=uA("firestore");i&&Jb(s,...i)}return s}function Uu(t){if(t._terminated)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Zb(t),t._firestoreClient}function Zb(t){var r,s,i;const e=t._freezeSettings(),n=function(l,u,d,m){return new k1(l,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Sk(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new qb(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yn(At.fromBase64String(e))}catch(n){throw new H(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yn(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($o(e,yn._jsonSchema))return yn.fromBase64String(e.bytes)}}yn._jsonSchemaVersion="firestore/bytes/1.0",yn._jsonSchema={type:st("string",yn._jsonSchemaVersion),bytes:st("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zn._jsonSchemaVersion}}static fromJSON(e){if($o(e,Zn._jsonSchema))return new Zn(e.latitude,e.longitude)}}Zn._jsonSchemaVersion="firestore/geoPoint/1.0",Zn._jsonSchema={type:st("string",Zn._jsonSchemaVersion),latitude:st("number"),longitude:st("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($o(e,er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new er(e.vectorValues);throw new H(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}er._jsonSchemaVersion="firestore/vectorValue/1.0",er._jsonSchema={type:st("string",er._jsonSchemaVersion),vectorValues:st("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=/^__.*__$/;class tj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new gs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Go(e,this.data,n,this.fieldTransforms)}}class Nk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new gs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ac:t})}}class zu{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new zu({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(xk(this.Ac)&&ej.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class nj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mu(e)}Cc(e,n,r,s=!1){return new zu({Ac:e,methodName:n,Dc:r,path:Tt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $u(t){const e=t._freezeSettings(),n=Mu(t._databaseId);return new nj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ck(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);ip("Data must be an object, but it was:",a,r);const l=Rk(r,a);let u,d;if(i.merge)u=new ln(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=_f(e,p,n);if(!a.contains(g))throw new H(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);jk(m,g)||m.push(g)}u=new ln(m),d=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=a.fieldTransforms;return new tj(new Qt(l),u,d)}class Gu extends Wo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gu}}function rj(t,e,n){return new zu({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rp extends Wo{_toFieldTransform(e){return new KT(e.path,new bo)}isEqual(e){return e instanceof rp}}class sp extends Wo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=rj(this,e,!0),r=this.vc.map(i=>ca(i,n)),s=new Qi(r);return new KT(e.path,s)}isEqual(e){return e instanceof sp&&_r(this.vc,e.vc)}}function sj(t,e,n,r){const s=t.Cc(1,e,n);ip("Data must be an object, but it was:",s,r);const i=[],a=Qt.empty();ps(r,(u,d)=>{const m=ap(e,u,n);d=et(d);const p=s.yc(m);if(d instanceof Gu)i.push(m);else{const g=ca(d,p);g!=null&&(i.push(m),a.set(m,g))}});const l=new ln(i);return new Nk(a,l,s.fieldTransforms)}function ij(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[_f(e,r,n)],u=[s];if(i.length%2!=0)throw new H(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(_f(e,i[g])),u.push(i[g+1]);const d=[],m=Qt.empty();for(let g=l.length-1;g>=0;--g)if(!jk(d,l[g])){const k=l[g];let C=u[g];C=et(C);const R=a.yc(k);if(C instanceof Gu)d.push(k);else{const j=ca(C,R);j!=null&&(d.push(k),m.set(k,j))}}const p=new ln(d);return new Nk(m,p,a.fieldTransforms)}function aj(t,e,n,r=!1){return ca(n,t.Cc(r?4:3,e))}function ca(t,e){if(bk(t=et(t)))return ip("Unsupported field value:",e,t),Rk(t,e);if(t instanceof Wo)return function(r,s){if(!xk(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=ca(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return q1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ve.fromDate(r);return{timestampValue:Jc(s.serializer,i)}}if(r instanceof Ve){const i=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jc(s.serializer,i)}}if(r instanceof Zn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yn)return{bytesValue:JT(s.serializer,r._byteString)};if(r instanceof We){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof er)return function(a,l){return{mapValue:{fields:{[ST]:{stringValue:AT},[Hc]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Om(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Au(r)}`)}(t,e)}function Rk(t,e){const n={};return _T(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(t,(r,s)=>{const i=ca(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function bk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof Zn||t instanceof yn||t instanceof We||t instanceof Wo||t instanceof er)}function ip(t,e,n){if(!bk(n)||!yT(n)){const r=Au(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function _f(t,e,n){if((e=et(e))instanceof Bu)return e._internalPath;if(typeof e=="string")return ap(t,e);throw nu("Field path arguments must be of type string or ",t,!1,void 0,n)}const oj=new RegExp("[~\\*/\\[\\]]");function ap(t,e,n){if(e.search(oj)>=0)throw nu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bu(...e.split("."))._internalPath}catch{throw nu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nu(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new H(V.INVALID_ARGUMENT,l+t+u)}function jk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ku("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lj extends Dk{data(){return super.data()}}function Ku(t,e){return typeof e=="string"?ap(t,e):e instanceof Bu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class op{}class lp extends op{}function ut(t,e,...n){let r=[];e instanceof op&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof cp).length,l=i.filter(u=>u instanceof qu).length;if(a>1||a>0&&l>0)throw new H(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class qu extends lp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qu(e,n,r)}_apply(e){const n=this._parse(e);return Ok(e._query,n),new Ar(e.firestore,e.converter,cf(e._query,n))}_parse(e){const n=$u(e.firestore);return function(i,a,l,u,d,m,p){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new H(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Fv(p,m);const C=[];for(const R of p)C.push(Lv(u,i,R));g={arrayValue:{values:C}}}else g=Lv(u,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Fv(p,m),g=aj(l,a,p,m==="in"||m==="not-in");return rt.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function pt(t,e,n){const r=e,s=Ku("where",t);return qu._create(s,r,n)}class cp extends op{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Vn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)Ok(a,u),a=cf(a,u)}(e._query,n),new Ar(e.firestore,e.converter,cf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class up extends lp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new up(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new H(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ro(i,a)}(e._query,this._field,this._direction);return new Ar(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new oa(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ti(t,e="asc"){const n=e,r=Ku("orderBy",t);return up._create(r,n)}class dp extends lp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new dp(e,n,r)}_apply(e){return new Ar(e.firestore,e.converter,Qc(e._query,this._limit,this._limitType))}}function cj(t){return dp._create("limit",t,"F")}function Lv(t,e,n){if(typeof(n=et(n))=="string"){if(n==="")throw new H(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PT(e)&&n.indexOf("/")!==-1)throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(be.fromString(n));if(!te.isDocumentKey(r))throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ev(t,new te(r))}if(n instanceof We)return ev(t,n._key);throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Au(n)}.`)}function Fv(t,e){if(!Array.isArray(t)||t.length===0)throw new H(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ok(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class uj{convertValue(e,n="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(as(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ps(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Hc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Xe(a.doubleValue));return new er(n)}convertGeoPoint(e){return new Zn(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(No(e));default:return null}}convertTimestamp(e){const n=is(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);Se(rk(r),9688,{name:e});const s=new xo(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Tr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class za{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Os extends Dk{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ku("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Os._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Os._jsonSchemaVersion="firestore/documentSnapshot/1.0",Os._jsonSchema={type:st("string",Os._jsonSchemaVersion),bundleSource:st("string","DocumentSnapshot"),bundleName:st("string"),bundle:st("string")};class hc extends Os{data(e={}){return super.data(e)}}class Ms{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new za(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hc(this._firestore,this._userDataWriter,r.key,r,new za(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new hc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new za(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new hc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new za(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:dj(l.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ms._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(t){t=en(t,We);const e=en(t.firestore,Ir);return Qb(Uu(e),t._key).then(n=>Lk(e,t,n))}Ms._jsonSchemaVersion="firestore/querySnapshot/1.0",Ms._jsonSchema={type:st("string",Ms._jsonSchemaVersion),bundleSource:st("string","QuerySnapshot"),bundleName:st("string"),bundle:st("string")};class hp extends uj{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}function gt(t){t=en(t,Ar);const e=en(t.firestore,Ir),n=Uu(e),r=new hp(e);return Pk(t._query),Yb(n,t._query).then(s=>new Ms(e,r,t,s))}function Qo(t,e,n){t=en(t,We);const r=en(t.firestore,Ir),s=Mk(t.converter,e,n);return Hu(r,[Ck($u(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,En.none())])}function Ln(t,e,n,...r){t=en(t,We);const s=en(t.firestore,Ir),i=$u(s);let a;return a=typeof(e=et(e))=="string"||e instanceof Bu?ij(i,"updateDoc",t._key,e,n,r):sj(i,"updateDoc",t._key,e),Hu(s,[a.toMutation(t._key,En.exists(!0))])}function hj(t){return Hu(en(t.firestore,Ir),[new Mm(t._key,En.none())])}function ua(t,e){const n=en(t.firestore,Ir),r=Bt(t),s=Mk(t.converter,e);return Hu(n,[Ck($u(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}function Vk(t,...e){var u,d,m;t=et(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Vv(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Vv(e[r])){const p=e[r];e[r]=(u=p.next)==null?void 0:u.bind(p),e[r+1]=(d=p.error)==null?void 0:d.bind(p),e[r+2]=(m=p.complete)==null?void 0:m.bind(p)}let i,a,l;if(t instanceof We)a=en(t.firestore,Ir),l=Ru(t._key.path),i={next:p=>{e[r]&&e[r](Lk(a,t,p))},error:e[r+1],complete:e[r+2]};else{const p=en(t,Ar);a=en(p.firestore,Ir),l=p._query;const g=new hp(a);i={next:k=>{e[r]&&e[r](new Ms(a,g,p,k))},error:e[r+1],complete:e[r+2]},Pk(t._query)}return function(g,k,C,R){const j=new np(R),w=new Zm(k,j,C);return g.asyncQueue.enqueueAndForget(async()=>Ym(await tu(g),w)),()=>{j.Nu(),g.asyncQueue.enqueueAndForget(async()=>Jm(await tu(g),w))}}(Uu(a),l,s,i)}function Hu(t,e){return function(r,s){const i=new mr;return r.asyncQueue.enqueueAndForget(async()=>Vb(await Wb(r),s,i)),i.promise}(Uu(t),e)}function Lk(t,e,n){const r=n.docs.get(e._key),s=new hp(t);return new Os(t,s,e._key,r,new za(n.hasPendingWrites,n.fromCache),e.converter)}function It(){return new rp("serverTimestamp")}function fj(...t){return new sp("arrayUnion",t)}(function(e,n=!0){(function(s){sa=s})(na),tr(new On("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Ir(new s1(r.getProvider("auth-internal")),new o1(a,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new H(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xo(d.options.projectId,m)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),wn(By,zy,e),wn(By,zy,"esm2020")})();const Fk="@firebase/installations",fp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=1e4,Bk=`w:${fp}`,zk="FIS_v2",mj="https://firebaseinstallations.googleapis.com/v1",pj=60*60*1e3,gj="installations",yj="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},qs=new Ys(gj,yj,vj);function $k(t){return t instanceof Fn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk({projectId:t}){return`${mj}/projects/${t}/installations`}function Kk(t){return{token:t.token,requestStatus:2,expiresIn:wj(t.expiresIn),creationTime:Date.now()}}async function qk(t,e){const r=(await e.json()).error;return qs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Hk({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _j(t,{refreshToken:e}){const n=Hk(t);return n.append("Authorization",Ej(e)),n}async function Wk(t){const e=await t();return e.status>=500&&e.status<600?t():e}function wj(t){return Number(t.replace("s","000"))}function Ej(t){return`${zk} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Gk(t),s=Hk(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:zk,appId:t.appId,sdkVersion:Bk},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await Wk(()=>fetch(r,l));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Kk(d.authToken)}}else throw await qk("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij=/^[cdef][\w-]{21}$/,wf="";function Sj(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Aj(t);return Ij.test(n)?n:wf}catch{return wf}}function Aj(t){return kj(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new Map;function Jk(t,e){const n=Wu(t);Xk(n,e),Nj(n,e)}function Xk(t,e){const n=Yk.get(t);if(n)for(const r of n)r(e)}function Nj(t,e){const n=xj();n&&n.postMessage({key:t,fid:e}),Cj()}let js=null;function xj(){return!js&&"BroadcastChannel"in self&&(js=new BroadcastChannel("[Firebase] FID Change"),js.onmessage=t=>{Xk(t.data.key,t.data.fid)}),js}function Cj(){Yk.size===0&&js&&(js.close(),js=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj="firebase-installations-database",bj=1,Hs="firebase-installations-store";let Qd=null;function mp(){return Qd||(Qd=IE(Rj,bj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Hs)}}})),Qd}async function ru(t,e){const n=Wu(t),s=(await mp()).transaction(Hs,"readwrite"),i=s.objectStore(Hs),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&Jk(t,e.fid),e}async function Zk(t){const e=Wu(t),r=(await mp()).transaction(Hs,"readwrite");await r.objectStore(Hs).delete(e),await r.done}async function Qu(t,e){const n=Wu(t),s=(await mp()).transaction(Hs,"readwrite"),i=s.objectStore(Hs),a=await i.get(n),l=e(a);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&Jk(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pp(t){let e;const n=await Qu(t.appConfig,r=>{const s=jj(r),i=Dj(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===wf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function jj(t){const e=t||{fid:Sj(),registrationStatus:0};return eI(e)}function Dj(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(qs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Pj(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Oj(t)}:{installationEntry:e}}async function Pj(t,e){try{const n=await Tj(t,e);return ru(t.appConfig,n)}catch(n){throw $k(n)&&n.customData.serverCode===409?await Zk(t.appConfig):await ru(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Oj(t){let e=await Uv(t.appConfig);for(;e.registrationStatus===1;)await Qk(100),e=await Uv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await pp(t);return r||n}return e}function Uv(t){return Qu(t,e=>{if(!e)throw qs.create("installation-not-found");return eI(e)})}function eI(t){return Mj(t)?{fid:t.fid,registrationStatus:0}:t}function Mj(t){return t.registrationStatus===1&&t.registrationTime+Uk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vj({appConfig:t,heartbeatServiceProvider:e},n){const r=Lj(t,n),s=_j(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:Bk,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await Wk(()=>fetch(r,l));if(u.ok){const d=await u.json();return Kk(d)}else throw await qk("Generate Auth Token",u)}function Lj(t,{fid:e}){return`${Gk(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gp(t,e=!1){let n;const r=await Qu(t.appConfig,i=>{if(!tI(i))throw qs.create("not-registered");const a=i.authToken;if(!e&&Bj(a))return i;if(a.requestStatus===1)return n=Fj(t,e),i;{if(!navigator.onLine)throw qs.create("app-offline");const l=$j(i);return n=Uj(t,l),l}});return n?await n:r.authToken}async function Fj(t,e){let n=await Bv(t.appConfig);for(;n.authToken.requestStatus===1;)await Qk(100),n=await Bv(t.appConfig);const r=n.authToken;return r.requestStatus===0?gp(t,e):r}function Bv(t){return Qu(t,e=>{if(!tI(e))throw qs.create("not-registered");const n=e.authToken;return Gj(n)?{...e,authToken:{requestStatus:0}}:e})}async function Uj(t,e){try{const n=await Vj(t,e),r={...e,authToken:n};return await ru(t.appConfig,r),n}catch(n){if($k(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Zk(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await ru(t.appConfig,r)}throw n}}function tI(t){return t!==void 0&&t.registrationStatus===2}function Bj(t){return t.requestStatus===2&&!zj(t)}function zj(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+pj}function $j(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function Gj(t){return t.requestStatus===1&&t.requestTime+Uk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kj(t){const e=t,{installationEntry:n,registrationPromise:r}=await pp(e);return r?r.catch(console.error):gp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qj(t,e=!1){const n=t;return await Hj(n),(await gp(n,e)).token}async function Hj(t){const{registrationPromise:e}=await pp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t){if(!t||!t.options)throw Yd("App Configuration");if(!t.name)throw Yd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Yd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Yd(t){return qs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="installations",Qj="installations-internal",Yj=t=>{const e=t.getProvider("app").getImmediate(),n=Wj(e),r=Js(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Jj=t=>{const e=t.getProvider("app").getImmediate(),n=Js(e,nI).getImmediate();return{getId:()=>Kj(n),getToken:s=>qj(n,s)}};function Xj(){tr(new On(nI,Yj,"PUBLIC")),tr(new On(Qj,Jj,"PRIVATE"))}Xj();wn(Fk,fp);wn(Fk,fp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su="analytics",Zj="firebase_id",eD="origin",tD=60*1e3,nD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn=new Tu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},un=new Ys("analytics","Analytics",rD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t){if(!t.startsWith(yp)){const e=un.create("invalid-gtag-resource",{gtagURL:t});return tn.warn(e.message),""}return t}function rI(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function iD(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function aD(t,e){const n=iD("firebase-js-sdk-policy",{createScriptURL:sD}),r=document.createElement("script"),s=`${yp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function oD(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function lD(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const u=(await rI(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(l){tn.error(l)}t("config",s,i)}async function cD(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await rI(n);for(const u of a){const d=l.find(p=>p.measurementId===u),m=d&&e[d.appId];if(m)i.push(m);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){tn.error(i)}}function uD(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[l,u]=a;await cD(t,e,n,l,u)}else if(i==="config"){const[l,u]=a;await lD(t,e,n,r,l,u)}else if(i==="consent"){const[l,u]=a;t("consent",l,u)}else if(i==="get"){const[l,u,d]=a;t("get",l,u,d)}else if(i==="set"){const[l]=a;t("set",l)}else t(i,...a)}catch(l){tn.error(l)}}return s}function dD(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=uD(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function hD(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(yp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=30,mD=1e3;class pD{constructor(e={},n=mD){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const sI=new pD;function gD(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function yD(t){var a;const{appId:e,apiKey:n}=t,r={method:"GET",headers:gD(n)},s=nD.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const u=await i.json();(a=u.error)!=null&&a.message&&(l=u.error.message)}catch{}throw un.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function vD(t,e=sI,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw un.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw un.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new ED;return setTimeout(async()=>{l.abort()},tD),iI({appId:r,apiKey:s,measurementId:i},a,l,e)}async function iI(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=sI){var l;const{appId:i,measurementId:a}=t;try{await _D(r,e)}catch(u){if(a)return tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:a};throw u}try{const u=await yD(t);return s.deleteThrottleMetadata(i),u}catch(u){const d=u;if(!wD(d)){if(s.deleteThrottleMetadata(i),a)return tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:a};throw u}const m=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?hy(n,s.intervalMillis,fD):hy(n,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+m,backoffCount:n+1};return s.setThrottleMetadata(i,p),tn.debug(`Calling attemptFetch again in ${m} millis`),iI(t,p,r,s)}}function _D(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(un.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function wD(t){if(!(t instanceof Fn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class ED{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function TD(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a={...r,send_to:i};t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(){if(gm())try{await ym()}catch(t){return tn.warn(un.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return tn.warn(un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function ID(t,e,n,r,s,i,a){const l=vD(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&tn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>tn.error(g)),e.push(l);const u=kD().then(g=>{if(g)return r.getId()}),[d,m]=await Promise.all([l,u]);hD(i)||aD(i,d.measurementId),s("js",new Date);const p=(a==null?void 0:a.config)??{};return p[eD]="firebase",p.update=!0,m!=null&&(p[Zj]=m),s("config",d.measurementId,p),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.app=e}_delete(){return delete so[this.app.options.appId],Promise.resolve()}}let so={},zv=[];const $v={};let Jd="dataLayer",AD="gtag",Gv,aI,Kv=!1;function ND(){const t=[];if(pm()&&t.push("This is a browser extension environment."),EE()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=un.create("invalid-analytics-context",{errorInfo:e});tn.warn(n.message)}}function xD(t,e,n){ND();const r=t.options.appId;if(!r)throw un.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw un.create("no-api-key");if(so[r]!=null)throw un.create("already-exists",{id:r});if(!Kv){oD(Jd);const{wrappedGtag:i,gtagCore:a}=dD(so,zv,$v,Jd,AD);aI=i,Gv=a,Kv=!0}return so[r]=ID(t,zv,$v,e,Gv,Jd,n),new SD(t)}function CD(t=_m()){t=et(t);const e=Js(t,su);return e.isInitialized()?e.getImmediate():RD(t)}function RD(t,e={}){const n=Js(t,su);if(n.isInitialized()){const s=n.getImmediate();if(_r(e,n.getOptions()))return s;throw un.create("already-initialized")}return n.initialize({options:e})}async function bD(){if(pm()||!EE()||!gm())return!1;try{return await ym()}catch{return!1}}function jD(t,e,n,r){t=et(t),TD(aI,so[t.app.options.appId],e,n,r).catch(s=>tn.error(s))}const qv="@firebase/analytics",Hv="0.10.18";function DD(){tr(new On(su,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return xD(r,s,n)},"PUBLIC")),tr(new On("analytics-internal",t,"PRIVATE")),wn(qv,Hv),wn(qv,Hv,"esm2020");function t(e){try{const n=e.getProvider(su).getImmediate();return{logEvent:(r,s,i)=>jD(n,r,s,i)}}catch(n){throw un.create("interop-component-reg-failed",{reason:n})}}}DD();const PD={apiKey:"AIzaSyAQVXo0DxYf44hU__zS4XMlrDz5uu6bAQc",authDomain:"glowchocolate-534b7.firebaseapp.com",projectId:"glowchocolate-534b7",storageBucket:"glowchocolate-534b7.firebasestorage.app",messagingSenderId:"494243389831",appId:"1:494243389831:web:b76f71af742baba3f87322",measurementId:"G-3K1K88W6JX"},vp=SE(PD);try{typeof window<"u"&&bD().then(t=>{t?CD(vp):console.info("[Analytics] Desteklenmiyor, atlanıyor")}).catch(()=>{console.info("[Analytics] Başlatılamadı, atlanıyor")})}catch{console.info("[Analytics] Hata, atlanıyor")}const Yu=XC(vp),le=Xb(vp),oI=t=>t.toLowerCase().endsWith("@glow.com"),OD=async(t,e)=>{try{return oI(t)?{success:!0,user:(await Mx(Yu,t,e)).user,message:"Kayıt başarılı!"}:{success:!1,error:"invalid-domain",message:"Sadece @glow.com uzantılı e-postalar kabul edilir"}}catch(n){return{success:!1,error:n.code,message:lI(n.code)}}},MD=async(t,e)=>{try{return oI(t)?{success:!0,user:(await Vx(Yu,t,e)).user,message:"Giriş başarılı!"}:{success:!1,error:"invalid-domain",message:"Sadece @glow.com uzantılı e-postalar kabul edilir"}}catch(n){return{success:!1,error:n.code,message:lI(n.code)}}},VD=async()=>{try{return await Bx(Yu),{success:!0,message:"Çıkış başarılı!"}}catch(t){return{success:!1,error:t.code,message:"Çıkış yapılırken hata oluştu"}}},LD=t=>Ux(Yu,t),lI=t=>{switch(t){case"auth/user-not-found":return"Kullanıcı bulunamadı";case"auth/wrong-password":return"Hatalı şifre";case"auth/email-already-in-use":return"Bu e-posta zaten kullanımda";case"auth/weak-password":return"Şifre çok zayıf (en az 6 karakter)";case"auth/invalid-email":return"Geçersiz e-posta adresi";case"auth/too-many-requests":return"Çok fazla deneme. Lütfen daha sonra tekrar deneyin";case"auth/invalid-credential":return"Geçersiz giriş bilgileri";case"invalid-domain":return"Sadece @glow.com uzantılı e-postalar kabul edilir";default:return"Bir hata oluştu. Lütfen tekrar deneyin."}},FD=async t=>{try{const e=zD(t.department),n={uid:t.uid,email:t.email,firstName:t.firstName,lastName:t.lastName,department:t.department,fullName:`${t.firstName} ${t.lastName}`,createdAt:new Date,isActive:!0,role:e,permissions:cI(e)},r=await ua(De(le,"users"),n);return await UD(t.department,{id:r.id,...n}),{success:!0,id:r.id,message:"Kullanıcı profili oluşturuldu"}}catch(e){return console.error("Kullanıcı profili oluşturma hatası:",e),{success:!1,error:e.code,message:"Profil oluşturulamadı"}}},UD=async(t,e)=>{try{const n={userId:e.id,uid:e.uid,fullName:e.fullName,email:e.email,department:t,position:BD(t),joinDate:new Date,isActive:!0};return await ua(De(le,"departments",t,"employees"),n),{success:!0}}catch(n){return console.error("Departmana kullanıcı ekleme hatası:",n),{success:!1,error:n}}},BD=t=>({yonetim:"Yönetici",mudur:"Müdür",koordinatorler:"Koordinatör","servis-personeli":"Servis Personeli","bar-personeli":"Bar Personeli","mutfak-personeli":"Mutfak Personeli","tedarik-sorumlusu":"Tedarik Sorumlusu","imalat-personeli":"İmalat Personeli"})[t]||"Personel",zD=t=>["yonetim","mudur"].includes(t)?"admin":"employee",cI=t=>t==="admin"?{canViewAllPersonnel:!0,canManagePersonnel:!0,canManageDepartments:!0,canViewReports:!0,canManageSystem:!0,canDeleteRecords:!0,canModifyRoles:!0}:{canViewAllPersonnel:!1,canManagePersonnel:!1,canManageDepartments:!1,canViewReports:!1,canManageSystem:!1,canDeleteRecords:!1,canModifyRoles:!1},$D=async(t,e)=>{try{const n=Bt(le,"notification_queue",t);return(await ys(n)).exists()?{success:!0,skipped:!0}:(await Qo(n,{...e,status:"pending",createdAt:It(),retries:0}),{success:!0})}catch(n){return console.error("Bildirim kuyruğa eklenemedi:",n),{success:!1,error:n.code||String(n)}}},GD=async t=>{const e=`broadcast_${Date.now()}`;return $D(e,{audience:{type:"all"},...t})},mi=async t=>{try{const e=ut(De(le,"users"),pt("uid","==",t)),n=await gt(e);if(n.empty)return{success:!1,message:"Kullanıcı profili bulunamadı"};{const r=n.docs[0];return{success:!0,user:{id:r.id,...r.data()}}}}catch(e){return console.error("Kullanıcı profili getirme hatası:",e),{success:!1,error:e.code}}},Bl=async(t,e)=>{try{const n=ut(De(le,"users"),pt("uid","==",t)),r=await gt(n);if(r.empty)throw new Error("Kullanıcı profili bulunamadı");const s=r.docs[0],i=Bt(le,"users",s.id),a={...e,updatedAt:new Date};if(e.fullName){const u=e.fullName.trim().split(" ");a.firstName=u[0]||"",a.lastName=u.slice(1).join(" ")||""}await Ln(i,a);const l=s.data();if(l.department)try{const u=ut(De(le,"departments",l.department,"employees"),pt("uid","==",t)),d=await gt(u);if(!d.empty){const m=d.docs[0],p=Bt(le,"departments",l.department,"employees",m.id);await Ln(p,{fullName:a.fullName||l.fullName,email:a.email||l.email,phone:a.phone||l.phone,updatedAt:new Date})}}catch(u){console.warn("Departman bilgisi güncellenirken hata:",u)}return{success:!0,message:"Profil başarıyla güncellendi"}}catch(n){return console.error("Profil güncelleme hatası:",n),{success:!1,error:n.code||n.message,message:"Profil güncellenirken hata oluştu"}}},KD=async t=>{try{const e={...t,createdAt:new Date,isActive:!0,altGorevler:t.altGorevler||[]};return{success:!0,id:(await ua(De(le,"gorevler"),e)).id,message:"Görev başarıyla oluşturuldu"}}catch(e){return console.error("Görev oluşturma hatası:",e),{success:!1,error:e.code,message:"Görev oluşturulamadı"}}},qD=async()=>{try{const t=ut(De(le,"gorevler"),pt("isActive","==",!0),ti("createdAt","desc")),e=await gt(t),n=[];return e.forEach(r=>{n.push({id:r.id,...r.data()})}),{success:!0,gorevler:n}}catch(t){return console.error("Görevleri getirme hatası:",t),{success:!1,error:t.code,gorevler:[]}}},HD=async t=>{try{const e={...t,createdAt:new Date,onayDurumu:"bekliyor"};return{success:!0,id:(await ua(De(le,"gorev_onaylari"),e)).id,message:"Görev onaya gönderildi"}}catch(e){return console.error("Görev onay kaydı oluşturma hatası:",e),{success:!1,error:e.code,message:"Görev onaya gönderilemedi"}}},WD=async()=>{const t=e=>{try{return e?typeof e.toDate=="function"?e.toDate().getTime():new Date(e).getTime()||0:0}catch{return 0}};try{const e=ut(De(le,"gorev_onaylari"),pt("onayDurumu","==","bekliyor"),ti("createdAt","desc")),n=await gt(e),r=[];return n.forEach(s=>{r.push({id:s.id,...s.data()})}),{success:!0,onayBekleyenler:r}}catch(e){if((e==null?void 0:e.code)==="failed-precondition")try{const n=ut(De(le,"gorev_onaylari"),pt("onayDurumu","==","bekliyor")),r=await gt(n),s=[];return r.forEach(i=>s.push({id:i.id,...i.data()})),s.sort((i,a)=>t(a.createdAt)-t(i.createdAt)),{success:!0,onayBekleyenler:s}}catch(n){return console.error("Onay bekleyen görevleri getirme (fallback) hatası:",n),{success:!1,error:n.code,onayBekleyenler:[]}}return console.error("Onay bekleyen görevleri getirme hatası:",e),{success:!1,error:e.code,onayBekleyenler:[]}}},Wv=async(t,e,n="")=>{try{const r=Bt(le,"gorev_onaylari",t);return await Ln(r,{onayDurumu:e,adminNotu:n,onayTarihi:new Date,updatedAt:new Date}),{success:!0,message:`Görev ${e==="onaylandi"?"onaylandı":"reddedildi"}`}}catch(r){return console.error("Görev onay durumu güncelleme hatası:",r),{success:!1,error:r.code,message:"Onay durumu güncellenemedi"}}},QD=async()=>{const t=e=>{try{return e?typeof e.toDate=="function"?e.toDate().getTime():new Date(e).getTime()||0:0}catch{return 0}};try{const e=ut(De(le,"gorev_onaylari"),pt("onayDurumu","==","onaylandi"),ti("onayTarihi","desc")),n=await gt(e),r=[];return n.forEach(s=>{r.push({id:s.id,...s.data()})}),{success:!0,onaylananlar:r}}catch(e){if((e==null?void 0:e.code)==="failed-precondition")try{const n=ut(De(le,"gorev_onaylari"),pt("onayDurumu","==","onaylandi")),r=await gt(n),s=[];return r.forEach(i=>s.push({id:i.id,...i.data()})),s.sort((i,a)=>t(a.onayTarihi)-t(i.onayTarihi)),{success:!0,onaylananlar:s}}catch(n){return console.error("Onaylanan görevleri getirme (fallback) hatası:",n),{success:!1,error:n.code,onaylananlar:[]}}return console.error("Onaylanan görevleri getirme hatası:",e),{success:!1,error:e.code,onaylananlar:[]}}},YD=async()=>{const t=e=>{try{return e?typeof e.toDate=="function"?e.toDate().getTime():new Date(e).getTime()||0:0}catch{return 0}};try{const e=ut(De(le,"gorev_onaylari"),pt("onayDurumu","==","reddedildi"),ti("onayTarihi","desc")),n=await gt(e),r=[];return n.forEach(s=>{r.push({id:s.id,...s.data()})}),{success:!0,reddedilenler:r}}catch(e){if((e==null?void 0:e.code)==="failed-precondition")try{const n=ut(De(le,"gorev_onaylari"),pt("onayDurumu","==","reddedildi")),r=await gt(n),s=[];return r.forEach(i=>s.push({id:i.id,...i.data()})),s.sort((i,a)=>t(a.onayTarihi)-t(i.onayTarihi)),{success:!0,reddedilenler:s}}catch(n){return console.error("Reddedilen görevleri getirme (fallback) hatası:",n),{success:!1,error:n.code,reddedilenler:[]}}return console.error("Reddedilen görevleri getirme hatası:",e),{success:!1,error:e.code,reddedilenler:[]}}},JD=async()=>{try{const t=ut(De(le,"users"),pt("isActive","==",!0)),e=await gt(t),n=[];return e.forEach(r=>n.push({id:r.id,...r.data()})),{success:!0,users:n}}catch(t){return console.error("Aktif kullanıcıları getirme hatası:",t),{success:!1,users:[],error:t.code||String(t)}}},XD=async()=>{const t=e=>e.sort((n,r)=>String(n.fullName||"").localeCompare(String(r.fullName||""),"tr"));try{const e=ut(De(le,"users"),ti("fullName","asc")),n=await gt(e),r=[];return n.forEach(s=>r.push({id:s.id,...s.data()})),{success:!0,users:r}}catch{try{const n=await gt(De(le,"users")),r=[];return n.forEach(s=>r.push({id:s.id,...s.data()})),{success:!0,users:t(r)}}catch(n){return console.error("Kullanıcıları getirme hatası:",n),{success:!1,users:[],error:n.code||String(n)}}}},ZD=async(t,e)=>{try{const n=ut(De(le,"users"),pt("uid","==",t)),r=await gt(n);if(r.empty)return{success:!1,error:"not_found"};const s=r.docs[0],i=Bt(le,"users",s.id);return await Ln(i,{role:e,permissions:cI(e),updatedAt:new Date}),{success:!0}}catch(n){return console.error("Rol güncelleme hatası:",n),{success:!1,error:n.code||String(n)}}},eP=async(t,e)=>{try{const n=ut(De(le,"users"),pt("uid","==",t)),r=await gt(n);if(r.empty)return{success:!1,error:"not_found"};const s=r.docs[0],i=Bt(le,"users",s.id);return await Ln(i,{isActive:e,updatedAt:new Date}),{success:!0}}catch(n){return console.error("Aktiflik güncelleme hatası:",n),{success:!1,error:n.code||String(n)}}},da=(t,e)=>`${t}_${e}`,tP=async(t,e)=>{try{const n=Bt(le,"mesai",da(t,e)),r=await ys(n);return r.exists()?{success:!0,data:{id:r.id,...r.data()}}:{success:!0,data:null}}catch(n){return console.error("Mesai kaydı getirme hatası:",n),{success:!1,error:n.code||String(n)}}},nP=(t,e)=>{const n=ut(De(le,"mesai"),pt("date","==",t));return Vk(n,r=>{const s=[];r.forEach(i=>s.push({id:i.id,...i.data()})),e(s)},r=>{console.error("Mesai dinleme hatası:",r)})},rP=async(t,e)=>{try{const n=ut(De(le,"mesai"),pt("date",">=",t),pt("date","<=",e)),r=await gt(n),s=[];return r.forEach(i=>s.push({id:i.id,...i.data()})),{success:!0,items:s}}catch(n){return console.error("Rapor kayıtlarını getirme hatası:",n),{success:!1,items:[],error:n.code||String(n)}}},Ju=()=>{const t=new Date;return{clientTime:t.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),millis:t.getTime()}},sP=async(t,e,n=null)=>{try{const r=Bt(le,"mesai",da(t.uid,e)),s=await ys(r),{clientTime:i,millis:a}=Ju(),l={uid:t.uid,email:t.email,fullName:t.fullName,department:t.department,position:t.position,date:e,status:"in",updatedAt:It()};if(s.exists()){const u=s.data()||{};if(u!=null&&u.leftAt||(u==null?void 0:u.status)==="out")return{success:!1,error:"already_closed"};if((u==null?void 0:u.status)==="absent")return{success:!1,error:"marked_absent"};await Ln(r,{...l,arrivedAt:u.arrivedAt||{clientTime:i,millis:a},arrivedAtLocation:u.arrivedAtLocation||n||null,leftAt:null,overtimeAt:null,history:[...u.history||[],{type:"in",clientTime:i,millis:a,atMillis:a,atClientTime:i,location:n||null}]})}else await Qo(r,{...l,createdAt:It(),arrivedAt:{clientTime:i,millis:a},arrivedAtLocation:n||null,leftAt:null,history:[{type:"in",clientTime:i,millis:a,atMillis:a,atClientTime:i,location:n||null}]});return{success:!0}}catch(r){return console.error("Mesai giriş (in) hatası:",r),{success:!1,error:r.code||String(r)}}},Qv=async(t,e,n=null)=>{try{const r=Bt(le,"mesai",da(t.uid,e)),s=await ys(r),{clientTime:i,millis:a}=Ju(),l={uid:t.uid,email:t.email,fullName:t.fullName,department:t.department,position:t.position,date:e,status:"out",updatedAt:It()};if(s.exists()){const u=s.data()||{};await Ln(r,{...l,arrivedAt:u.arrivedAt||null,leftAt:{clientTime:i,millis:a},leftAtLocation:n||null,history:[...u.history||[],{type:"out",clientTime:i,millis:a,atMillis:a,atClientTime:i,location:n||null}]})}else await Qo(r,{...l,createdAt:It(),arrivedAt:null,leftAt:{clientTime:i,millis:a},leftAtLocation:n||null,history:[{type:"out",clientTime:i,millis:a,atMillis:a,atClientTime:i,location:n||null}]});return{success:!0}}catch(r){return console.error("Mesai çıkış (out) hatası:",r),{success:!1,error:r.code||String(r)}}},iP=async(t,e)=>{try{const n=Bt(le,"mesai",da(t.uid,e)),{clientTime:r,millis:s}=Ju();return await Qo(n,{uid:t.uid,email:t.email,fullName:t.fullName,department:t.department,position:t.position,date:e,status:"absent",arrivedAt:null,leftAt:null,createdAt:It(),updatedAt:It(),history:[{type:"absent",clientTime:r,millis:s,atMillis:s,atClientTime:r}]},{merge:!0}),{success:!0}}catch(n){return console.error("Mesai (absent) hatası:",n),{success:!1,error:n.code||String(n)}}},Yv=async(t,e)=>{try{const n=Bt(le,"mesai",da(t.uid,e));if(!(await ys(n)).exists())return{success:!1,error:"no_entry"};const{clientTime:s,millis:i}=Ju();return await Ln(n,{status:"in_overtime",overtimeAt:{clientTime:s,millis:i},updatedAt:It(),history:fj({type:"in_overtime",clientTime:s,millis:i,atMillis:i,atClientTime:s})}),{success:!0}}catch(n){return console.error("Mesai overtime hatası:",n),{success:!1,error:n.code||String(n)}}},aP=async(t,e)=>{try{const n=Bt(le,"mesai",da(t.uid,e));return await hj(n),{success:!0}}catch(n){return console.error("Mesai reset hatası:",n),{success:!1,error:n.code||String(n)}}},_p=(t,e)=>`${t}_${e}`,uI=()=>{const t=new Date;return{clientTime:t.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),millis:t.getTime()}},oP=async(t,e,n,r)=>{try{const s=Bt(le,"molalar",_p(t.uid,e)),i=await ys(s),{clientTime:a,millis:l}=uI(),u=new Date(l+r*60*1e3),d={clientTime:u.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),millis:u.getTime()},m={type:n,duration:r,startedAt:{clientTime:a,millis:l},expectedEndAt:d};if(i.exists()){const p=i.data()||{};if(p.activeBreak)return{success:!1,error:"already_on_break"};await Ln(s,{uid:t.uid,fullName:t.fullName,department:t.department,position:t.position,date:e,active:!0,activeBreak:m,updatedAt:It(),history:[...p.history||[],{type:"start",breakType:n,duration:r,atMillis:l,atClientTime:a}]})}else await Qo(s,{uid:t.uid,fullName:t.fullName,department:t.department,position:t.position,date:e,active:!0,activeBreak:m,createdAt:It(),updatedAt:It(),history:[{type:"start",breakType:n,duration:r,atMillis:l,atClientTime:a}]});return{success:!0}}catch(s){return console.error("Mola başlatma hatası:",s),{success:!1,error:s.code||String(s)}}},lP=async(t,e)=>{try{const n=Bt(le,"molalar",_p(t.uid,e)),r=await ys(n);if(!r.exists())return{success:!1,error:"not_found"};const s=r.data()||{};if(!s.activeBreak)return{success:!1,error:"no_active_break"};const{clientTime:i,millis:a}=uI();return await Ln(n,{active:!1,activeBreak:null,updatedAt:It(),history:[...s.history||[],{type:"end",breakType:s.activeBreak.type,duration:s.activeBreak.duration,atMillis:a,atClientTime:i}]}),{success:!0}}catch(n){return console.error("Mola bitirme hatası:",n),{success:!1,error:n.code||String(n)}}},cP=(t,e)=>{const n=ut(De(le,"molalar"),pt("date","==",t));return Vk(n,r=>{const s=[];r.forEach(i=>s.push({id:i.id,...i.data()})),e(s)},r=>console.error("Mola dinleme hatası:",r))},uP=async(t,e,n)=>{try{const r=Bt(le,"molalar",_p(t.uid,e)),s=await ys(r);return s.exists()?(s.data()||{}).alertSentAt?{success:!0,skipped:!0}:(await Ln(r,{alertSentAt:It(),lastAlert:{overMillis:n.overMillis,overPct:n.overPct,at:It()}}),await ua(De(le,"mola_uyarilari"),{uid:t.uid,fullName:t.fullName,department:t.department,position:t.position,date:e,breakType:n.breakType,duration:n.duration,startedAtMillis:n.startedAtMillis,expectedEndMillis:n.expectedEndMillis,overMillis:n.overMillis,overPct:n.overPct,createdAt:It()}),{success:!0}):{success:!1,error:"not_found"}}catch(r){return console.error("Aşım uyarısı gönderme hatası:",r),{success:!1,error:r.code||String(r)}}},dP=async t=>{try{const e={...t,status:t.status||"bekliyor",createdAt:It(),updatedAt:It()};return{success:!0,id:(await ua(De(le,"gorev_ricalari"),e)).id}}catch(e){return console.error("Görev rica kaydı oluşturma hatası:",e),{success:!1,error:e.code||String(e)}}},hP=({onLogin:t})=>{const[e,n]=M.useState(!0),[r,s]=M.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",department:""}),[i,a]=M.useState({}),[l,u]=M.useState(!1),[d,m]=M.useState(!1),[p,g]=M.useState(!1),k=w=>{const{name:v,value:I}=w.target;s(P=>({...P,[v]:I})),i[v]&&a(P=>({...P,[v]:""}))},C=w=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w)?w.toLowerCase().endsWith("@glow.com"):!1,R=()=>{const w={};return r.email?C(r.email)||(w.email="E-posta @glow.com ile bitmelidir"):w.email="E-posta gereklidir",r.password?r.password.length<6&&(w.password="Şifre en az 6 karakter olmalıdır"):w.password="Şifre gereklidir",e||(r.firstName||(w.firstName="Ad gereklidir"),r.lastName||(w.lastName="Soyad gereklidir"),r.department||(w.department="Departman seçimi gereklidir"),r.confirmPassword?r.password!==r.confirmPassword&&(w.confirmPassword="Şifreler eşleşmiyor"):w.confirmPassword="Şifre tekrarı gereklidir"),a(w),Object.keys(w).length===0},j=async w=>{if(w.preventDefault(),!!R()){u(!0);try{let v;if(e){if(v=await MD(r.email,r.password),v.success){const I=await mi(v.user.uid);t({uid:v.user.uid,email:v.user.email,name:I.success&&I.user.fullName||v.user.email.split("@")[0],department:I.success?I.user.department:void 0,role:I.success?I.user.role:"employee"})}}else if(v=await OD(r.email,r.password),v.success){const I={uid:v.user.uid,email:v.user.email,firstName:r.firstName,lastName:r.lastName,department:r.department},P=await FD(I);P.success?t({uid:v.user.uid,email:v.user.email,name:`${r.firstName} ${r.lastName}`,department:r.department}):a({general:"Profil oluşturulamadı: "+P.message})}v.success||a({general:v.message})}catch(v){console.error("Auth error:",v),a({general:"Bir hata oluştu. Lütfen tekrar deneyin."})}finally{u(!1)}}};return c.jsxs("div",{className:"login-register-container",children:[c.jsxs("div",{className:"floating-shapes",children:[c.jsx("div",{className:"shape"}),c.jsx("div",{className:"shape"}),c.jsx("div",{className:"shape"})]}),c.jsxs("div",{className:"auth-card glass-card",children:[c.jsxs("div",{className:"auth-header",children:[c.jsxs("h1",{className:"brand-title",children:["GlowChocolate",c.jsx("div",{className:"brand-logo",children:c.jsxs("div",{className:"logo-crown",children:[c.jsx("div",{className:"crown-center"}),c.jsx("div",{className:"crown-left"}),c.jsx("div",{className:"crown-right"}),c.jsx("div",{className:"crown-base"})]})})]}),c.jsx("p",{className:"brand-subtitle",children:"İşletme ve Personel Takip Sistemi"})]}),!1,c.jsxs("form",{onSubmit:j,className:"auth-form",children:[i.general&&c.jsx("div",{className:"error-banner",children:i.general}),!e&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("input",{type:"text",name:"firstName",value:r.firstName,onChange:k,placeholder:" ",className:`form-input ${i.firstName?"error":""}`,disabled:l}),c.jsx("label",{className:"form-label",children:"Ad"}),i.firstName&&c.jsx("span",{className:"error-message",children:i.firstName})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("input",{type:"text",name:"lastName",value:r.lastName,onChange:k,placeholder:" ",className:`form-input ${i.lastName?"error":""}`,disabled:l}),c.jsx("label",{className:"form-label",children:"Soyad"}),i.lastName&&c.jsx("span",{className:"error-message",children:i.lastName})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("div",{className:`select-wrapper ${i.department?"error":""}`,children:[c.jsxs("select",{name:"department",value:r.department,onChange:k,onFocus:w=>w.target.parentElement.classList.add("focus"),onBlur:w=>w.target.parentElement.classList.remove("focus"),className:`form-select ${i.department?"error":""}`,disabled:l,children:[c.jsx("option",{value:"",children:"Departman Seçin"}),c.jsx("option",{value:"yonetim",children:"👔 Yönetim"}),c.jsx("option",{value:"mudur",children:"🏢 Müdür"}),c.jsx("option",{value:"koordinatorler",children:"⚡ Koordinatörler"}),c.jsx("option",{value:"servis-personeli",children:"🍽️ Servis Personeli"}),c.jsx("option",{value:"bar-personeli",children:"🍹 Bar Personeli"}),c.jsx("option",{value:"mutfak-personeli",children:"👨‍🍳 Mutfak Personeli"}),c.jsx("option",{value:"tedarik-sorumlusu",children:"📦 Tedarik Sorumlusu"}),c.jsx("option",{value:"imalat-personeli",children:"🍫 İmalat Personeli"})]}),c.jsx("label",{className:"select-label",children:"Departman"})]}),i.department&&c.jsx("span",{className:"error-message",children:i.department})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("input",{type:"email",name:"email",value:r.email,onChange:k,placeholder:" ",className:`form-input ${i.email?"error":""}`,disabled:l}),c.jsx("label",{className:"form-label",children:"E-posta (@glow.com)"}),i.email&&c.jsx("span",{className:"error-message",children:i.email})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("div",{className:"password-input-wrapper",children:[c.jsx("input",{type:d?"text":"password",name:"password",value:r.password,onChange:k,placeholder:" ",className:`form-input ${i.password?"error":""}`,disabled:l}),c.jsx("label",{className:"form-label",children:"Şifre"}),c.jsx("button",{type:"button",className:"password-toggle",onClick:()=>m(!d),disabled:l,children:d?"👁️":"👁️‍🗨️"})]}),i.password&&c.jsx("span",{className:"error-message",children:i.password})]}),!e&&c.jsxs("div",{className:"form-group",children:[c.jsxs("div",{className:"password-input-wrapper",children:[c.jsx("input",{type:d?"text":"password",name:"confirmPassword",value:r.confirmPassword,onChange:k,placeholder:" ",className:`form-input ${i.confirmPassword?"error":""}`,disabled:l}),c.jsx("label",{className:"form-label",children:"Şifre Tekrar"})]}),i.confirmPassword&&c.jsx("span",{className:"error-message",children:i.confirmPassword})]}),e&&c.jsxs("div",{className:"form-options",children:[c.jsxs("label",{className:"checkbox-wrapper",children:[c.jsx("input",{type:"checkbox",checked:p,onChange:w=>g(w.target.checked),disabled:l}),c.jsx("span",{className:"checkmark"}),"Beni Hatırla"]}),c.jsx("button",{type:"button",className:"forgot-password",children:"Şifremi Unuttum"})]}),c.jsx("button",{type:"submit",className:"btn btn-primary auth-submit",disabled:l,children:l?c.jsxs("div",{className:"loading-btn",children:[c.jsx("div",{className:"spinner"}),e?"Giriş yapılıyor...":"Kayıt oluşturuluyor..."]}):e?"Giriş Yap":"Kayıt Ol"})]}),c.jsx("div",{className:"auth-footer",children:c.jsxs("p",{children:[e?"Hesabınız yok mu?":"Zaten hesabınız var mı?",c.jsx("button",{type:"button",className:"link-btn",onClick:()=>n(!e),children:e?"Kayıt Ol":"Giriş Yap"})]})})]})]})},Jv=()=>c.jsxs("div",{className:"loading-container",children:[c.jsxs("div",{className:"floating-shapes",children:[c.jsx("div",{className:"shape"}),c.jsx("div",{className:"shape"}),c.jsx("div",{className:"shape"})]}),c.jsxs("div",{className:"loading-content",children:[c.jsxs("div",{className:"loading-brand",children:[c.jsx("span",{className:"loading-icon",children:"🍫"}),c.jsx("h1",{className:"loading-title",children:"GlowChocolate"})]}),c.jsx("div",{className:"loading-spinner-container",children:c.jsxs("div",{className:"loading-spinner",children:[c.jsx("div",{className:"spinner-ring"}),c.jsx("div",{className:"spinner-ring"}),c.jsx("div",{className:"spinner-ring"}),c.jsx("div",{className:"spinner-inner",children:c.jsx("span",{className:"inner-icon",children:"✨"})})]})}),c.jsxs("div",{className:"loading-text",children:[c.jsx("p",{className:"loading-message",children:"Yetki kontrolü yapılıyor..."}),c.jsxs("div",{className:"loading-dots",children:[c.jsx("span",{className:"dot"}),c.jsx("span",{className:"dot"}),c.jsx("span",{className:"dot"})]})]})]})]}),zl=({isOpen:t,onClose:e,userProfile:n,onUpdateProfile:r})=>{var C,R;const s=["Müdür","Müdür Yardımcısı","Bar Şefi","Salon Şefi","Mutfak Şefi","Bar Koordinatörü","Mutfak Koordinatörü","Salon Koordinatörü","Bulaşıkçı","Barista","Garson","Tatlı Ustası"],[i,a]=M.useState(!1),[l,u]=M.useState({fullName:(n==null?void 0:n.fullName)||"",phone:(n==null?void 0:n.phone)||"",email:(n==null?void 0:n.email)||"",department:(n==null?void 0:n.department)||"",position:(n==null?void 0:n.position)||""}),d=M.useMemo(()=>{const j=[...s],w=((n==null?void 0:n.position)||"").trim();return w&&!j.includes(w)&&j.push(w),j.sort((v,I)=>v.localeCompare(I,"tr",{sensitivity:"base"}))},[n==null?void 0:n.position]),m=()=>{a(!0)},p=async()=>{try{await r(l),a(!1)}catch(j){console.error("Profile update error:",j)}},g=()=>{u({fullName:(n==null?void 0:n.fullName)||"",phone:(n==null?void 0:n.phone)||"",email:(n==null?void 0:n.email)||"",department:(n==null?void 0:n.department)||"",position:(n==null?void 0:n.position)||""}),a(!1)},k=(j,w)=>{u(v=>({...v,[j]:w}))};return t?c.jsx("div",{className:"profile-modal-overlay",onClick:e,children:c.jsxs("div",{className:"profile-modal",onClick:j=>j.stopPropagation(),children:[c.jsxs("div",{className:"profile-modal-header",children:[c.jsx("h2",{children:"👤 Profil Bilgileri"}),c.jsx("button",{className:"close-button",onClick:e,children:"✕"})]}),c.jsxs("div",{className:"profile-modal-content",children:[c.jsxs("div",{className:"profile-avatar-section",children:[c.jsx("div",{className:"profile-avatar-large",children:(R=(C=(n==null?void 0:n.fullName)||"U")==null?void 0:C.charAt(0))==null?void 0:R.toUpperCase()}),c.jsx("button",{className:"avatar-upload-btn",children:"📷 Fotoğraf Yükle"})]}),c.jsxs("div",{className:"profile-info-section",children:[c.jsxs("div",{className:"profile-field",children:[c.jsx("label",{children:"Ad Soyad"}),i?c.jsx("input",{type:"text",value:l.fullName,onChange:j=>k("fullName",j.target.value),className:"profile-input"}):c.jsx("span",{className:"profile-value",children:(n==null?void 0:n.fullName)||"Belirtilmemiş"})]}),c.jsxs("div",{className:"profile-field",children:[c.jsx("label",{children:"📞 Telefon"}),i?c.jsx("input",{type:"tel",value:l.phone,onChange:j=>k("phone",j.target.value),className:"profile-input",placeholder:"0555 000 00 00"}):c.jsx("span",{className:"profile-value",children:(n==null?void 0:n.phone)||"Belirtilmemiş"})]}),c.jsxs("div",{className:"profile-field",children:[c.jsx("label",{children:"📧 Email"}),i?c.jsx("input",{type:"email",value:l.email,onChange:j=>k("email",j.target.value),className:"profile-input",placeholder:"ornek@email.com"}):c.jsx("span",{className:"profile-value",children:(n==null?void 0:n.email)||"Belirtilmemiş"})]}),c.jsxs("div",{className:"profile-field",children:[c.jsx("label",{children:"🏢 Departman"}),c.jsx("span",{className:"profile-value",children:n!=null&&n.department?n.department.toLocaleUpperCase("tr-TR"):"Belirtilmemiş"})]}),c.jsxs("div",{className:"profile-field",children:[c.jsx("label",{children:"💼 Pozisyon"}),i?c.jsxs("select",{className:"profile-input profile-select",value:l.position,onChange:j=>k("position",j.target.value),children:[c.jsx("option",{value:"",children:"Pozisyon Seçin"}),d.map(j=>c.jsx("option",{value:j,children:j},j))]}):c.jsx("span",{className:"profile-value",children:(n==null?void 0:n.position)||"Belirtilmemiş"})]})]}),c.jsx("div",{className:"profile-modal-actions",children:i?c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"save-button",onClick:p,children:"💾 Kaydet"}),c.jsx("button",{className:"cancel-button",onClick:g,children:"❌ İptal"})]}):c.jsx("button",{className:"edit-button",onClick:m,children:"✏️ Düzenle"})})]})]})}):null},fP=({isOpen:t,onClose:e,userProfile:n,onOpenGorevler:r,onOpenMesaiTakip:s,onOpenMola:i})=>{if(!t)return null;const a=l=>{console.log(`${l} seçeneği seçildi`),l==="gunluk-gorevler"?r():l==="mesaiye-geldim"?s():l==="mola-ver"?i==null||i():e()};return c.jsx("div",{className:"personel-modal-overlay",onClick:e,children:c.jsxs("div",{className:"personel-modal",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"personel-modal-header",children:[c.jsx("div",{className:"modal-icon",children:"👥"}),c.jsx("h2",{children:"Personel Takibi"}),c.jsx("p",{children:"Personel yönetimi"}),c.jsx("button",{className:"modal-close","aria-label":"Geri",title:"Geri",onClick:e,children:"←"})]}),c.jsx("div",{className:"personel-modal-content",children:c.jsxs("div",{className:"personel-options",children:[c.jsxs("div",{className:"personel-option",onClick:()=>a("mesaiye-geldim"),children:[c.jsx("div",{className:"option-icon",children:"🟢"}),c.jsxs("div",{className:"option-content",children:[c.jsx("h3",{children:"Mesaiye Geldim"}),c.jsx("p",{children:"Mesai başlangıç saatini kaydet"})]}),c.jsx("div",{className:"option-arrow",children:"→"})]}),c.jsxs("div",{className:"personel-option",onClick:()=>a("gunluk-gorevler"),children:[c.jsx("div",{className:"option-icon",children:"📋"}),c.jsxs("div",{className:"option-content",children:[c.jsx("h3",{children:"Günlük Görevler"}),c.jsx("p",{children:"Günlük görev atamaları ve takibi"})]}),c.jsx("div",{className:"option-arrow",children:"→"})]}),c.jsxs("div",{className:"personel-option",onClick:()=>a("mola-ver"),children:[c.jsx("div",{className:"option-icon",children:"☕"}),c.jsxs("div",{className:"option-content",children:[c.jsx("h3",{children:"Mola Ver"}),c.jsx("p",{children:"Mola saatlerini kaydet ve takip et"})]}),c.jsx("div",{className:"option-arrow",children:"→"})]}),c.jsxs("div",{className:"personel-option",onClick:()=>a("performans"),children:[c.jsx("div",{className:"option-icon",children:"📊"}),c.jsxs("div",{className:"option-content",children:[c.jsx("h3",{children:"Performans"}),c.jsx("p",{children:"Personel performans değerlendirmesi"})]}),c.jsx("div",{className:"option-arrow",children:"→"})]})]})})]})})},mP=({isOpen:t,onClose:e,userProfile:n})=>{const[r,s]=M.useState([]),[i,a]=M.useState(!1),[l,u]=M.useState(null),d=[{id:1,baslik:"Günlük Temizlik",aciklama:"Çalışma alanının günlük temizlik görevleri",durum:"aktif",altGorevler:[{id:11,baslik:"Masaları temizle",tamamlandi:!1},{id:12,baslik:"Zemini sil",tamamlandi:!1},{id:13,baslik:"Çöpleri boşalt",tamamlandi:!0},{id:14,baslik:"Ekipmanları düzenle",tamamlandi:!1}],onayDurumu:null},{id:2,baslik:"Stok Kontrol",aciklama:"Günlük stok sayım ve kontrol işlemleri",durum:"aktif",altGorevler:[{id:21,baslik:"Hammadde sayımı",tamamlandi:!0},{id:22,baslik:"Bitmiş ürün kontrolü",tamamlandi:!0},{id:23,baslik:"Eksik malzeme listesi",tamamlandi:!0}],onayDurumu:"bekliyor"},{id:3,baslik:"Müşteri Hizmetleri",aciklama:"Günlük müşteri takip ve hizmet görevleri",durum:"aktif",altGorevler:[{id:31,baslik:"Sabah müşteri karşılama",tamamlandi:!0},{id:32,baslik:"Sipariş alma",tamamlandi:!1},{id:33,baslik:"Müşteri memnuniyet anketi",tamamlandi:!1}],onayDurumu:null}];M.useEffect(()=>{t&&s(d)},[t]);const m=(R,j)=>{s(w=>w.map(v=>{if(v.id===R){const I=v.altGorevler.map(P=>P.id===j?{...P,tamamlandi:!P.tamamlandi}:P);return{...v,altGorevler:I}}return v}))},p=R=>R.altGorevler.every(j=>j.tamamlandi),g=R=>{s(j=>j.map(w=>w.id===R?{...w,onayDurumu:"bekliyor"}:w)),console.log(`Görev ${R} tamamlandı ve admin onayına gönderildi`)},k=R=>{switch(R){case"bekliyor":return"#ffc107";case"onaylandi":return"#28a745";case"reddedildi":return"#dc3545";default:return"#6c757d"}},C=R=>{switch(R){case"bekliyor":return"⏳ Onay Bekliyor";case"onaylandi":return"✅ Onaylandı";case"reddedildi":return"❌ Reddedildi";default:return""}};return t?c.jsx("div",{className:"gorevler-modal-overlay",onClick:e,children:c.jsxs("div",{className:"gorevler-modal",onClick:R=>R.stopPropagation(),children:[c.jsxs("div",{className:"gorevler-modal-header",children:[c.jsx("div",{className:"modal-icon",children:"📋"}),c.jsx("h2",{children:"Günlük Görevler"}),c.jsx("p",{children:"Günlük görev atamaları ve takibi"}),c.jsx("button",{className:"modal-close",onClick:e,children:"←"})]}),c.jsx("div",{className:"gorevler-modal-content",children:i?c.jsx("div",{className:"loading-message",children:"Görevler yükleniyor..."}):c.jsx("div",{className:"gorevler-listesi",children:r.map(R=>c.jsxs("div",{className:"gorev-karti",children:[c.jsxs("div",{className:"gorev-header",children:[c.jsx("h3",{children:R.baslik}),c.jsx("div",{className:"gorev-durum",children:R.onayDurumu&&c.jsx("span",{className:"onay-durumu",style:{backgroundColor:k(R.onayDurumu)},children:C(R.onayDurumu)})})]}),c.jsx("p",{className:"gorev-aciklama",children:R.aciklama}),c.jsxs("div",{className:"alt-gorevler",children:[c.jsx("h4",{children:"Alt Görevler:"}),c.jsx("div",{className:"alt-gorev-listesi",children:R.altGorevler.map(j=>c.jsxs("div",{className:`alt-gorev-item ${j.tamamlandi?"tamamlandi":""}`,onClick:()=>{R.onayDurumu!=="bekliyor"&&R.onayDurumu!=="onaylandi"&&m(R.id,j.id)},children:[c.jsx("div",{className:"checkbox",children:j.tamamlandi?"✓":"○"}),c.jsx("span",{className:"alt-gorev-baslik",children:j.baslik})]},j.id))})]}),c.jsxs("div",{className:"gorev-actions",children:[c.jsxs("div",{className:"ilerleme-bar",children:[c.jsxs("div",{className:"ilerleme-text",children:["İlerleme: ",R.altGorevler.filter(j=>j.tamamlandi).length,"/",R.altGorevler.length]}),c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"progress-fill",style:{width:`${R.altGorevler.filter(j=>j.tamamlandi).length/R.altGorevler.length*100}%`}})})]}),c.jsx("button",{className:`gorev-tamamla-btn ${p(R)&&!R.onayDurumu?"aktif":"pasif"}`,disabled:!p(R)||R.onayDurumu,onClick:()=>g(R.id),children:R.onayDurumu==="bekliyor"?"⏳ Onay Bekliyor":R.onayDurumu==="onaylandi"?"✅ Tamamlandı":R.onayDurumu==="reddedildi"?"❌ Reddedildi":p(R)?"🎯 Görevi Tamamla":"⚠️ Alt Görevleri Tamamla"})]})]},R.id))})})]})}):null},pP=({userProfile:t,onBack:e})=>{var ga,ii;const[n,r]=M.useState(()=>{const T=localStorage.getItem("glowchocolate_gorevler");if(T)try{return JSON.parse(T)}catch(F){return console.error("Görevler yüklenirken hata:",F),[]}return[]}),[s,i]=M.useState(!1),[a,l]=M.useState(!1),[u,d]=M.useState("gorevler"),m=()=>new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().split("T")[0],[p,g]=M.useState(m()),[k,C]=M.useState(!1),[R,j]=M.useState(null),[w,v]=M.useState(null),[I,P]=M.useState(null),[U,B]=M.useState(!1),[A,y]=M.useState(null),[E,N]=M.useState(!1),[S,b]=M.useState(""),[x,ye]=M.useState(!1),[Fe,Ce]=M.useState(!1),[Be,$]=M.useState(null),[K,Y]=M.useState({baslik:"",aciklama:"",altGorevler:[]}),[ve,ue]=M.useState(""),Ie=M.useRef(!1),[it,Ae]=M.useState(null),[Nt,Qe]=M.useState(!1),[yt,Un]=M.useState(null),[nn,ne]=M.useState([]),[_e,de]=M.useState(""),[ie,Te]=M.useState(""),[X,ce]=M.useState(""),fe=(t==null?void 0:t.role)==="admin",[Ye,at]=M.useState(null),Re=[{id:1,baslik:"Günlük Temizlik",aciklama:"Çalışma alanının günlük temizlik görevleri",durum:"aktif",altGorevler:[{id:11,baslik:"Masaları temizle",tamamlandi:!1},{id:12,baslik:"Zemini sil",tamamlandi:!1},{id:13,baslik:"Çöpleri boşalt",tamamlandi:!0},{id:14,baslik:"Ekipmanları düzenle",tamamlandi:!1}],onayDurumu:"bekliyor"},{id:2,baslik:"Stok Kontrol",aciklama:"Günlük stok sayım ve kontrol işlemleri",durum:"aktif",altGorevler:[{id:21,baslik:"Hammadde sayımı",tamamlandi:!0},{id:22,baslik:"Bitmiş ürün kontrolü",tamamlandi:!0},{id:23,baslik:"Eksik malzeme listesi",tamamlandi:!0}],onayDurumu:"bekliyor",gonderenKullanici:{isim:"Ahmet Yılmaz",pozisyon:"Depo Sorumlusu",departman:"Lojistik"},gonderilmeTarihi:"2024-01-15T14:30:00",tamamlanmaFotografi:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k="},{id:3,baslik:"Müşteri Hizmetleri",aciklama:"Günlük müşteri takip ve hizmet görevleri",durum:"aktif",altGorevler:[{id:31,baslik:"Sabah müşteri karşılama",tamamlandi:!0},{id:32,baslik:"Sipariş alma",tamamlandi:!1},{id:33,baslik:"Müşteri memnuniyet anketi",tamamlandi:!1}],onayDurumu:null},{id:4,baslik:"Makine Bakım",aciklama:"Üretim makinelerinin günlük bakım kontrolleri",durum:"aktif",altGorevler:[{id:41,baslik:"Yağ seviyesi kontrolü",tamamlandi:!1},{id:42,baslik:"Sıcaklık ölçümü",tamamlandi:!1},{id:43,baslik:"Temizlik işlemi",tamamlandi:!1},{id:44,baslik:"Parça kontrolü",tamamlandi:!1}],onayDurumu:null}];M.useEffect(()=>{localStorage.getItem("glowchocolate_gorevler")||r(Re)},[]),M.useEffect(()=>{(async()=>{try{const F=ut(De(le,"users"),pt("isActive","==",!0),ti("fullName")),J=await gt(F),Z=[];J.forEach(q=>{const ee=q.data();ee.uid&&ee.uid!==(t==null?void 0:t.uid)&&Z.push({uid:ee.uid,fullName:ee.fullName,department:ee.department,position:ee.position,email:ee.email})}),ne(Z)}catch(F){console.warn("Kullanıcı listesi yüklenemedi, offline olabilir:",F);const J=JSON.parse(localStorage.getItem("glowchocolate_users_cache")||"[]");ne(J)}})()},[t==null?void 0:t.uid]),M.useEffect(()=>{n.length>0&&(localStorage.setItem("glowchocolate_gorevler",JSON.stringify(n)),console.log("🔄 Görevler localStorage'a kaydedildi:",n.length,"görev"))},[n]);const rn=async()=>{if(!a){i(!0);try{const T=await qD();if(T.success&&T.gorevler.length>0)r(T.gorevler),localStorage.setItem("glowchocolate_gorevler",JSON.stringify(T.gorevler)),l(!0),console.log("✅ Firebase'den görevler yüklendi:",T.gorevler.length,"görev");else if(n.length>0){console.log("📤 Örnek görevler Firebase'e kaydediliyor...");for(const F of n)await KD(F);l(!0)}}catch(T){console.error("Firebase görev yükleme hatası:",T)}finally{i(!1)}}},xt=async()=>{try{const T=await WD();T.success&&localStorage.setItem("glowchocolate_onay_bekleyenler",JSON.stringify(T.onayBekleyenler));const F=await QD();F.success&&localStorage.setItem("glowchocolate_onaylananlar",JSON.stringify(F.onaylananlar));const J=await YD();if(J.success){const Z=(J.reddedilenler||[]).map(q=>({...q,redNedeni:q.redNedeni??q.adminNotu??"",redTarihi:q.redTarihi??q.onayTarihi??q.gonderilmeTarihi??q.createdAt}));localStorage.setItem("glowchocolate_reddedilenler",JSON.stringify(Z))}console.log("✅ Firebase onay verileri yüklendi")}catch(T){console.error("Firebase onay verileri yükleme hatası:",T)}};M.useEffect(()=>{rn(),xt()},[]),M.useEffect(()=>{console.log("📋 Mevcut görevler durumu:",{toplamGorev:n.length,aktifGorevlerTabinda:n.length,onayBekleyenler:xr().length,onaylananlar:qt().length,reddedilenler:rr()})},[n]);const Ct=T=>{const J=JSON.parse(localStorage.getItem("glowchocolate_currentUser")||"{}").email||"anonymous";return JSON.parse(localStorage.getItem(`glowchocolate_user_selections_${J}`)||"{}")[T]||[]},Rt=(T,F)=>{const Z=JSON.parse(localStorage.getItem("glowchocolate_currentUser")||"{}").email||"anonymous",q=JSON.parse(localStorage.getItem(`glowchocolate_user_selections_${Z}`)||"{}");q[T]=F,localStorage.setItem(`glowchocolate_user_selections_${Z}`,JSON.stringify(q))},Pe=(T,F)=>{const J=Ct(T),Z=J.includes(F)?J.filter(q=>q!==F):[...J,F];Rt(T,Z),r(q=>[...q])},Je=(T,F)=>Ct(T).includes(F),Bn=T=>Ct(T.id).length>0,Yo=T=>{const F=n.find(J=>J.id===T);j(F),C(!0)},Jo=T=>{const F=n.find(J=>J.id===T);Un(F),ce("Temizliği bugün aksilikten dolayı tamamlayamıyorum. Mümkünse benim yerime yardımcı olur musun?"),Te(""),Qe(!0)},Xu=async()=>{if(!yt||!ie){Ae({type:"warning",message:"Lütfen bir kullanıcı seçin."}),setTimeout(()=>Ae(null),2e3);return}i(!0);try{const T=nn.find(q=>q.uid===ie),F=new Date().toISOString(),J={gorevId:yt.id,gorevBaslik:yt.baslik,gorevAciklama:yt.aciklama,gonderen:{uid:t==null?void 0:t.uid,fullName:t==null?void 0:t.fullName,email:t==null?void 0:t.email,department:t==null?void 0:t.department,position:t==null?void 0:t.position},hedef:{uid:T==null?void 0:T.uid,fullName:T==null?void 0:T.fullName,email:T==null?void 0:T.email,department:T==null?void 0:T.department,position:T==null?void 0:T.position},not:X,tarih:F,status:"bekliyor"},Z=await dP(J);if(Z.success){const q=JSON.parse(localStorage.getItem("glowchocolate_gorev_ricalari")||"[]");q.push({...J,id:Z.id}),localStorage.setItem("glowchocolate_gorev_ricalari",JSON.stringify(q)),Ae({type:"success",message:`${T==null?void 0:T.fullName} kişisine rica gönderildi.`})}else{const q=`local_${Date.now()}`,ee=JSON.parse(localStorage.getItem("glowchocolate_gorev_ricalari")||"[]");ee.push({...J,id:q,offline:!0}),localStorage.setItem("glowchocolate_gorev_ricalari",JSON.stringify(ee)),Ae({type:"warning",message:"Çevrimdışı: Rica yerel olarak kaydedildi."})}setTimeout(()=>Ae(null),2500),Qe(!1),Un(null),Te(""),ce("")}catch(T){console.error("Rica gönderilemedi:",T),Ae({type:"error",message:"Rica gönderilemedi."}),setTimeout(()=>Ae(null),2500)}finally{i(!1)}},vs=async()=>{if(!Ie.current&&R){Ie.current=!0,i(!0);try{const T=new Date().toISOString(),F=Ct(R.id),J=R.altGorevler.filter(ee=>F.includes(ee.id)),Z={gorevId:R.id,gorevBaslik:R.baslik,gorevAciklama:R.aciklama,gonderenKullanici:{isim:(t==null?void 0:t.fullName)||"Kullanıcı",pozisyon:(t==null?void 0:t.position)||"Pozisyon",departman:(t==null?void 0:t.department)||"Departman",email:(t==null?void 0:t.email)||"email@example.com"},gonderilmeTarihi:T,tamamlanmaFotografi:w,tamamlananAltGorevler:J,onayDurumu:"bekliyor"},q=await HD(Z);if(q.success)await xt(),console.log("✅ Görev Firebase'e kaydedildi ve onaya gönderildi"),Ae({type:"success",message:"Görev admin onayına gönderildi."}),setTimeout(()=>Ae(null),2500);else{console.error("Firebase kaydetme hatası:",q.message);const ee={...Z,id:Date.now()},dt=JSON.parse(localStorage.getItem("glowchocolate_onay_bekleyenler")||"[]");dt.push(ee),localStorage.setItem("glowchocolate_onay_bekleyenler",JSON.stringify(dt)),Ae({type:"warning",message:"İnternet sorunu: Yerel olarak kaydedildi."}),setTimeout(()=>Ae(null),2500)}Rt(R.id,[]),C(!1),j(null),v(null),I&&(I.getTracks().forEach(ee=>ee.stop()),P(null))}catch(T){console.error("Görev tamamlama hatası:",T),Ae({type:"error",message:"Görev onaya gönderilemedi."}),setTimeout(()=>Ae(null),2500)}finally{i(!1),Ie.current=!1}}},ha=async()=>{try{const T=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});P(T)}catch(T){console.error("Kamera erişim hatası:",T),alert("Kameraya erişim izni gerekli!")}},Xo=()=>{if(I){const T=document.getElementById("camera-video"),F=document.createElement("canvas");F.width=T.videoWidth,F.height=T.videoHeight,F.getContext("2d").drawImage(T,0,0);const Z=F.toDataURL("image/jpeg",.8);v(Z),I.getTracks().forEach(q=>q.stop()),P(null)}},fa=()=>{v(null),ha()},ma=T=>{y(T),B(!0)},Zo=()=>{y(null),B(!1)},pa=async T=>{i(!0);try{const F=await Wv(T,"onaylandi","");if(F.success)await xt(),console.log("✅ Görev Firebase'de onaylandı");else{console.error("Firebase onaylama hatası:",F.message);const Z=JSON.parse(localStorage.getItem("glowchocolate_onay_bekleyenler")||"[]").map(ee=>ee.id===T?{...ee,onayDurumu:"onaylandi",onayTarihi:new Date().toISOString()}:ee);localStorage.setItem("glowchocolate_onay_bekleyenler",JSON.stringify(Z));const q=Z.find(ee=>ee.id===T);if(q){const ee=JSON.parse(localStorage.getItem("glowchocolate_onaylananlar")||"[]");ee.push(q),localStorage.setItem("glowchocolate_onaylananlar",JSON.stringify(ee))}}}catch(F){console.error("Onaylama hatası:",F)}finally{i(!1)}},el=T=>{const J=JSON.parse(localStorage.getItem("glowchocolate_onay_bekleyenler")||"[]").find(Z=>Z.id===T);J&&(at(J),N(!0))},tl=async()=>{if(Ye&&S.trim()){i(!0);try{const T=await Wv(Ye.id,"reddedildi",S);if(T.success)await xt(),console.log("✅ Görev Firebase'de reddedildi");else{console.error("Firebase reddetme hatası:",T.message);const F={...Ye,onayDurumu:"reddedildi",redNedeni:S,redTarihi:new Date().toISOString()},Z=JSON.parse(localStorage.getItem("glowchocolate_onay_bekleyenler")||"[]").filter(ee=>ee.id!==Ye.id);localStorage.setItem("glowchocolate_onay_bekleyenler",JSON.stringify(Z));const q=JSON.parse(localStorage.getItem("glowchocolate_reddedilenler")||"[]");q.push(F),localStorage.setItem("glowchocolate_reddedilenler",JSON.stringify(q))}N(!1),at(null),b("")}catch(T){console.error("Reddetme hatası:",T)}finally{i(!1)}}},Nr=T=>{switch(T){case"bekliyor":return"#ffc107";case"onaylandi":return"#28a745";case"reddedildi":return"#dc3545";default:return"#6c757d"}},ni=T=>{switch(T){case"bekliyor":return"⏳ Onay Bekliyor";case"onaylandi":return"✅ Onaylandı";case"reddedildi":return"❌ Reddedildi";default:return""}},_s=T=>{try{if(!T)return new Date(0);if(typeof(T==null?void 0:T.toDate)=="function")return T.toDate();if(T&&typeof T=="object"&&"seconds"in T)return new Date(T.seconds*1e3);const F=new Date(T);return isNaN(F.getTime())?new Date(0):F}catch{return new Date(0)}},qt=(T=null)=>{const F=JSON.parse(localStorage.getItem("glowchocolate_onaylananlar")||"[]");if(!T)return F;const J=new Date(T).toDateString();return F.filter(Z=>{const q=Z.onayTarihi||Z.gonderilmeTarihi||Z.createdAt;return _s(q).toDateString()===J})},xr=(T=null)=>{const F=JSON.parse(localStorage.getItem("glowchocolate_onay_bekleyenler")||"[]").filter(Z=>Z.onayDurumu==="bekliyor");if(!T)return F;const J=new Date(T).toDateString();return F.filter(Z=>{const q=Z.gonderilmeTarihi||Z.createdAt||Z.tamamlanmaTarihi;let ee;try{q&&typeof q.toDate=="function"?ee=q.toDate():q&&q.seconds?ee=new Date(q.seconds*1e3):ee=new Date(q)}catch{ee=new Date(0)}return ee.toDateString()===J})},ri=()=>n,si=(T=null)=>{const J=JSON.parse(localStorage.getItem("glowchocolate_reddedilenler")||"[]").map(q=>({...q,redNedeni:q.redNedeni??q.adminNotu??"",redTarihi:q.redTarihi??q.onayTarihi??q.gonderilmeTarihi??q.createdAt}));if(!T)return J;const Z=new Date(T).toDateString();return J.filter(q=>{const ee=q.redTarihi||q.onayTarihi||q.createdAt;return _s(ee).toDateString()===Z})},rr=()=>si(p).length,nl=()=>qt(p).length,vt=()=>xr(p).length,rl=()=>{const T=new Date().toDateString();if(localStorage.getItem("glowchocolate_last_reset_date")!==T){console.log("🌅 Yeni gün başladı, görevler sıfırlanıyor...");const Z=JSON.parse(localStorage.getItem("glowchocolate_currentUser")||"{}").email||"anonymous";localStorage.removeItem(`glowchocolate_user_selections_${Z}`),localStorage.setItem("glowchocolate_last_reset_date",T),console.log("✅ Günlük sıfırlama tamamlandı")}},ws=T=>{$(T),Y({baslik:T.baslik,aciklama:T.aciklama,altGorevler:[...T.altGorevler]}),Ce(!0)},Es=async T=>{if(window.confirm("Bu görevi silmek istediğinizden emin misiniz?"))try{const F=n.filter(J=>J.id!==T);r(F),localStorage.setItem("glowchocolate_gorevler",JSON.stringify(F)),console.log("✅ Görev başarıyla silindi")}catch(F){console.error("Görev silme hatası:",F)}},Zu=()=>{if(K.baslik&&K.aciklama&&K.altGorevler.length>0){const T={id:Date.now(),...K,durum:"aktif",onayDurumu:null},F=[...n,T];r(F),localStorage.setItem("glowchocolate_gorevler",JSON.stringify(F)),Y({baslik:"",aciklama:"",altGorevler:[]}),ue(""),ye(!1),console.log("✅ Yeni görev eklendi")}},ed=()=>{if(Be&&K.baslik&&K.aciklama&&K.altGorevler.length>0){const T=n.map(F=>F.id===Be.id?{...F,...K}:F);r(T),localStorage.setItem("glowchocolate_gorevler",JSON.stringify(T)),$(null),Y({baslik:"",aciklama:"",altGorevler:[]}),ue(""),Ce(!1),console.log("✅ Görev güncellendi")}},In=()=>{if(ve.trim()){const T={id:Date.now(),baslik:ve.trim(),durum:"aktif"};Y(F=>({...F,altGorevler:[...F.altGorevler,T]})),ue("")}},sl=T=>{Y(F=>({...F,altGorevler:F.altGorevler.filter(J=>J.id!==T)}))};M.useEffect(()=>{rl()},[]);const td=(T,F)=>{if(!T||!F)return 0;const J=new Date(F).toDateString();return qt().filter(q=>{var dt;const ee=_s(q.gonderilmeTarihi).toDateString();return((dt=q.gonderenKullanici)==null?void 0:dt.email)===T&&ee===J}).length},zn=T=>{if(!T)return"Bilinmiyor";let F;try{typeof T.toDate=="function"?F=T.toDate():T&&T.seconds?F=new Date(T.seconds*1e3):F=new Date(T)}catch{F=new Date(T)}const J=new Date,Z=new Date;Z.setDate(J.getDate()-1);const q=F.toLocaleDateString("tr-TR"),ee=F.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});return F.toDateString()===J.toDateString()?`Bugün ${ee}`:F.toDateString()===Z.toDateString()?`Dün ${ee}`:`${q} ${ee}`};return c.jsxs("div",{className:"gunluk-gorevler-container",children:[c.jsxs("header",{className:"gorevler-header",children:[c.jsxs("div",{className:"header-left",children:[c.jsx("button",{className:"geri-btn",onClick:e,children:"← Geri"}),c.jsxs("div",{className:"header-title",children:[c.jsx("h1",{children:"📋 Günlük Görevler"}),c.jsx("p",{children:"Günlük görev atamaları ve takibi"})]})]}),c.jsxs("div",{className:"date-picker-container",children:[c.jsx("label",{htmlFor:"date-picker",children:"📅 Tarih Seç:"}),c.jsx("input",{id:"date-picker",type:"date",value:p,onChange:T=>g(T.target.value),max:m(),className:"date-picker-input"}),c.jsx("button",{className:"bugun-btn",onClick:()=>g(m()),children:"Bugün"})]}),c.jsxs("div",{className:"header-stats",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-number",children:n.length}),c.jsx("div",{className:"stat-label",children:"Toplam Görev"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-number",children:nl()}),c.jsx("div",{className:"stat-label",children:"Tamamlanan"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-number",children:vt()}),c.jsx("div",{className:"stat-label",children:"Onay Bekliyor"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-number",children:rr()}),c.jsx("div",{className:"stat-label",children:"Reddedilen"})]}),fe&&c.jsx("button",{className:"admin-gorev-ekle-btn",onClick:()=>ye(!0),title:"Yeni Görev Ekle",children:"➕ Görev Ekle"})]})]}),c.jsxs("main",{className:"gorevler-main",children:[c.jsxs("div",{className:"user-info-bar",children:[c.jsx("div",{className:"user-avatar",children:((ii=(ga=t==null?void 0:t.fullName)==null?void 0:ga.charAt(0))==null?void 0:ii.toUpperCase())||"U"}),c.jsxs("div",{className:"user-details",children:[c.jsx("h3",{children:(t==null?void 0:t.fullName)||"Kullanıcı"}),c.jsxs("p",{children:[String((t==null?void 0:t.department)||"Departman").toLocaleUpperCase("tr-TR")," - ",String((t==null?void 0:t.position)||"Pozisyon").toLocaleUpperCase("tr-TR")]})]}),c.jsx("div",{className:"tarih-info",children:c.jsx("div",{className:"tarih",children:new Date().toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]}),c.jsxs("div",{className:"tab-navigation",children:[c.jsxs("button",{className:`tab-btn ${u==="gorevler"?"active":""}`,onClick:()=>d("gorevler"),children:["📋 Aktif Görevler (",n.length,")"]}),c.jsxs("button",{className:`tab-btn ${u==="onay-bekleyen"?"active":""}`,onClick:()=>d("onay-bekleyen"),children:["⏳ Onay Bekleyenler (",xr(p).length,")"]}),c.jsxs("button",{className:`tab-btn ${u==="onaylanan"?"active":""}`,onClick:()=>d("onaylanan"),children:["✅ Onaylananlar (",qt(p).length,")"]}),c.jsxs("button",{className:`tab-btn ${u==="reddedilenler"?"active":""}`,onClick:()=>d("reddedilenler"),children:["❌ Reddedilenler (",rr(),")"]})]}),s?c.jsx("div",{className:"loading-message",children:"Görevler yükleniyor..."}):c.jsxs("div",{className:"gorevler-grid",children:[u==="gorevler"&&ri().map(T=>c.jsxs("div",{className:"gorev-karti",children:[c.jsx("div",{className:"gorev-header",children:c.jsx("h3",{children:T.baslik})}),c.jsx("p",{className:"gorev-aciklama",children:T.aciklama}),c.jsxs("div",{className:"alt-gorevler",children:[c.jsx("h4",{children:"Alt Görevler:"}),c.jsx("div",{className:"alt-gorev-listesi",children:T.altGorevler.map(F=>c.jsxs("div",{className:`alt-gorev-item ${Je(T.id,F.id)?"tamamlandi":""}`,onClick:()=>Pe(T.id,F.id),children:[c.jsx("div",{className:"checkbox",children:Je(T.id,F.id)?"✓":"○"}),c.jsx("span",{className:"alt-gorev-baslik",children:F.baslik})]},F.id))})]}),c.jsxs("div",{className:"gorev-actions",children:[c.jsxs("div",{className:"ilerleme-bar",children:[c.jsxs("div",{className:"ilerleme-text",children:["İlerleme: ",Ct(T.id).length,"/",T.altGorevler.length]}),c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"progress-fill",style:{width:`${Ct(T.id).length/T.altGorevler.length*100}%`}})})]}),fe&&c.jsxs("div",{className:"admin-actions",children:[c.jsx("button",{className:"admin-btn edit-btn",onClick:()=>ws(T),title:"Görevi Düzenle",children:"✏️"}),c.jsx("button",{className:"admin-btn delete-btn",onClick:()=>Es(T.id),title:"Görevi Sil",children:"🗑️"})]}),c.jsx("button",{className:`gorev-tamamla-btn ${Bn(T)?"aktif":"pasif"}`,disabled:!Bn(T),onClick:()=>Yo(T.id),children:Bn(T)?"🎯 Görevi Tamamla":"⚠️ En Az 1 Alt Görev Tamamla"}),c.jsxs("button",{className:"rica-et-btn",onClick:()=>Jo(T.id),title:"Bu görevi başka birinden rica et",children:[c.jsx("span",{className:"ico",children:"🙏"}),c.jsx("span",{className:"label",children:"Rica Et"})]})]})]},T.id)),u==="onay-bekleyen"&&(xr(p).length===0?c.jsxs("div",{className:"bos-durum-mesaji",children:[c.jsx("div",{className:"bos-ikon",children:"⏳"}),c.jsx("h3",{children:"Onay Bekleyen Görev Yok"}),c.jsx("p",{children:"Kullanıcılar tarafından tamamlanan görevler burada görünecektir."})]}):xr(p).map(T=>{var F,J,Z,q,ee,dt;return c.jsxs("div",{className:"gorev-karti onay-bekleyen-kart",children:[c.jsxs("div",{className:"gorev-header",children:[c.jsx("h3",{children:T.gorevBaslik||T.baslik}),c.jsx("div",{className:"gorev-durum",children:c.jsx("span",{className:"onay-durumu",style:{backgroundColor:Nr(T.onayDurumu)},children:ni(T.onayDurumu)})})]}),c.jsx("p",{className:"gorev-aciklama",children:T.gorevAciklama||T.aciklama}),c.jsxs("div",{className:"gonderen-bilgi",children:[c.jsxs("div",{className:"kullanici-info",children:[c.jsx("div",{className:"kullanici-avatar",children:((Z=(J=(F=T.gonderenKullanici)==null?void 0:F.isim)==null?void 0:J.charAt(0))==null?void 0:Z.toUpperCase())||"U"}),c.jsxs("div",{className:"kullanici-detay",children:[c.jsx("h4",{children:((q=T.gonderenKullanici)==null?void 0:q.isim)||"Bilinmeyen Kullanıcı"}),c.jsxs("p",{children:[String(((ee=T.gonderenKullanici)==null?void 0:ee.departman)||"Departman").toLocaleUpperCase("tr-TR")," - ",String(((dt=T.gonderenKullanici)==null?void 0:dt.pozisyon)||"Pozisyon").toLocaleUpperCase("tr-TR")]})]})]}),c.jsxs("div",{className:"gonderilme-tarihi",children:[c.jsx("span",{className:"tarih-ikon",children:"📅"}),c.jsx("span",{className:"tarih-text",children:zn(T.gonderilmeTarihi||T.createdAt)})]})]}),c.jsxs("div",{className:"alt-gorevler",children:[c.jsx("h4",{children:"Tamamlanan Alt Görevler:"}),c.jsx("div",{className:"alt-gorev-listesi",children:(T.tamamlananAltGorevler||[]).map(Sn=>c.jsxs("div",{className:"alt-gorev-item tamamlandi",children:[c.jsx("div",{className:"checkbox",children:"✓"}),c.jsx("span",{className:"alt-gorev-baslik",children:Sn.baslik})]},Sn.id))})]}),T.tamamlanmaFotografi&&c.jsxs("div",{className:"kanit-fotografi",children:[c.jsx("h4",{children:"📸 Kanıt Fotoğrafı:"}),c.jsxs("div",{className:"foto-container",children:[c.jsx("img",{src:T.tamamlanmaFotografi,alt:"Görev kanıt fotoğrafı",className:"kanit-foto",onClick:()=>ma(T.tamamlanmaFotografi)}),c.jsx("div",{className:"foto-overlay",children:c.jsx("span",{children:"🔍 Büyütmek için tıkla"})})]})]}),c.jsxs("div",{className:"admin-onay-actions",children:[c.jsx("button",{className:"onayla-btn",onClick:()=>pa(T.id),children:"✅ Onayla"}),c.jsx("button",{className:"reddet-btn",onClick:()=>el(T.id),children:"❌ Reddet"})]})]},T.id)})),u==="onaylanan"&&(qt(p).length===0?c.jsxs("div",{className:"bos-durum-mesaji",children:[c.jsx("div",{className:"bos-ikon",children:"✅"}),c.jsx("h3",{children:"Henüz Onaylanan Görev Yok"}),c.jsx("p",{children:"Admin tarafından onaylanan görevler burada görünecektir."})]}):qt(p).map(T=>{var F,J,Z,q,ee,dt,Sn;return c.jsxs("div",{className:"gorev-karti onaylanan-kart",children:[c.jsxs("div",{className:"gorev-header",children:[c.jsx("h3",{children:T.gorevBaslik}),c.jsx("div",{className:"gorev-durum",children:c.jsx("span",{className:"onay-durumu",style:{backgroundColor:Nr(T.onayDurumu)},children:ni(T.onayDurumu)})})]}),c.jsx("p",{className:"gorev-aciklama",children:T.gorevAciklama}),c.jsxs("div",{className:"gonderen-bilgi",children:[c.jsxs("div",{className:"kullanici-info",children:[c.jsx("div",{className:"kullanici-avatar",children:((Z=(J=(F=T.gonderenKullanici)==null?void 0:F.isim)==null?void 0:J.charAt(0))==null?void 0:Z.toUpperCase())||"U"}),c.jsxs("div",{className:"kullanici-detay",children:[c.jsx("h4",{children:((q=T.gonderenKullanici)==null?void 0:q.isim)||"Bilinmeyen Kullanıcı"}),c.jsxs("p",{children:[String(((ee=T.gonderenKullanici)==null?void 0:ee.departman)||"Departman").toLocaleUpperCase("tr-TR")," - ",String(((dt=T.gonderenKullanici)==null?void 0:dt.pozisyon)||"Pozisyon").toLocaleUpperCase("tr-TR")]})]})]}),c.jsxs("div",{className:"tarih-bilgileri",children:[c.jsxs("div",{className:"gonderilme-tarihi",children:[c.jsx("span",{className:"tarih-ikon",children:"📤"}),c.jsxs("span",{className:"tarih-text",children:["Gönderilme: ",zn(T.gonderilmeTarihi)]})]}),c.jsxs("div",{className:"onay-tarihi",children:[c.jsx("span",{className:"tarih-ikon",children:"✅"}),c.jsxs("span",{className:"tarih-text",children:["Onaylanma: ",zn(T.onayTarihi)]})]})]})]}),c.jsx("div",{className:"gunluk-istatistik",children:c.jsxs("div",{className:"istatistik-box",children:[c.jsx("span",{className:"istatistik-ikon",children:"📊"}),c.jsxs("div",{className:"istatistik-detay",children:[c.jsx("span",{className:"istatistik-sayi",children:td((Sn=T.gonderenKullanici)==null?void 0:Sn.email,T.gonderilmeTarihi)}),c.jsx("span",{className:"istatistik-text",children:"Günlük Tamamlanan"})]})]})}),c.jsxs("div",{className:"alt-gorevler",children:[c.jsx("h4",{children:"Tamamlanan Alt Görevler:"}),c.jsx("div",{className:"alt-gorev-listesi",children:(T.tamamlananAltGorevler||[]).map(il=>c.jsxs("div",{className:"alt-gorev-item tamamlandi",children:[c.jsx("div",{className:"checkbox",children:"✓"}),c.jsx("span",{className:"alt-gorev-baslik",children:il.baslik})]},il.id))})]}),T.tamamlanmaFotografi&&c.jsxs("div",{className:"kanit-fotografi",children:[c.jsx("h4",{children:"📸 Kanıt Fotoğrafı:"}),c.jsxs("div",{className:"foto-container",children:[c.jsx("img",{src:T.tamamlanmaFotografi,alt:"Görev kanıt fotoğrafı",className:"kanit-foto",onClick:()=>ma(T.tamamlanmaFotografi)}),c.jsx("div",{className:"foto-overlay",children:c.jsx("span",{children:"🔍 Büyütmek için tıkla"})})]})]}),c.jsx("div",{className:"tamamlandi-badge",children:c.jsx("span",{children:"🏆 Başarıyla Tamamlandı"})})]},T.id)})),u==="reddedilenler"&&(si(p).length===0?c.jsxs("div",{className:"bos-durum-mesaji",children:[c.jsx("div",{className:"bos-ikon",children:"❌"}),c.jsx("h3",{children:"Reddedilen Görev Yok"}),c.jsx("p",{children:"Admin tarafından reddedilen görevler burada görünecektir."})]}):si(p).map(T=>{var F,J,Z,q,ee,dt;return c.jsxs("div",{className:"gorev-karti reddedilen-kart",children:[c.jsxs("div",{className:"gorev-header",children:[c.jsx("h3",{children:T.gorevBaslik}),c.jsx("div",{className:"gorev-durum",children:c.jsx("span",{className:"onay-durumu reddedildi-durumu",children:"❌ Reddedildi"})})]}),c.jsx("p",{className:"gorev-aciklama",children:T.gorevAciklama}),c.jsxs("div",{className:"gonderen-bilgi",children:[c.jsxs("div",{className:"kullanici-info",children:[c.jsx("div",{className:"kullanici-avatar",children:((Z=(J=(F=T.gonderenKullanici)==null?void 0:F.isim)==null?void 0:J.charAt(0))==null?void 0:Z.toUpperCase())||"U"}),c.jsxs("div",{className:"kullanici-detay",children:[c.jsx("h4",{children:((q=T.gonderenKullanici)==null?void 0:q.isim)||"Bilinmeyen Kullanıcı"}),c.jsxs("p",{children:[String(((ee=T.gonderenKullanici)==null?void 0:ee.departman)||"Departman").toLocaleUpperCase("tr-TR")," - ",String(((dt=T.gonderenKullanici)==null?void 0:dt.pozisyon)||"Pozisyon").toLocaleUpperCase("tr-TR")]})]})]}),c.jsxs("div",{className:"gonderilme-tarihi",children:[c.jsx("span",{className:"tarih-ikon",children:"📅"}),c.jsx("span",{className:"tarih-text",children:zn(T.gonderilmeTarihi)})]})]}),c.jsxs("div",{className:"red-nedeni",children:[c.jsx("h4",{children:"⚠️ Red Nedeni:"}),c.jsx("div",{className:"red-aciklama",children:T.redNedeni}),c.jsx("div",{className:"red-tarihi",children:c.jsxs("span",{children:["🕐 Red Tarihi: ",zn(T.redTarihi)]})})]}),c.jsxs("div",{className:"alt-gorevler",children:[c.jsx("h4",{children:"Tamamlanmış Alt Görevler:"}),c.jsx("div",{className:"alt-gorev-listesi",children:(T.tamamlananAltGorevler||[]).map(Sn=>c.jsxs("div",{className:"alt-gorev-item tamamlandi",children:[c.jsx("div",{className:"checkbox",children:"✓"}),c.jsx("span",{className:"alt-gorev-baslik",children:Sn.baslik})]},Sn.id))})]}),T.tamamlanmaFotografi&&c.jsxs("div",{className:"kanit-fotografi",children:[c.jsx("h4",{children:"📸 Gönderilen Fotoğraf:"}),c.jsxs("div",{className:"foto-container",children:[c.jsx("img",{src:T.tamamlanmaFotografi,alt:"Reddedilen görev fotoğrafı",className:"kanit-foto",onClick:()=>ma(T.tamamlanmaFotografi)}),c.jsx("div",{className:"foto-overlay",children:c.jsx("span",{children:"🔍 Büyütmek için tıkla"})})]})]})]},T.id)}))]})]}),k&&c.jsx("div",{className:"modal-overlay",children:c.jsxs("div",{className:"tamamla-modal",children:[s&&c.jsx("div",{style:{height:"3px",background:"rgba(212,175,55,0.25)"},children:c.jsx("div",{style:{height:"100%",width:"100%",background:"#d4af37",animation:"loadingBar 1s linear infinite"}})}),c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"📋 Görev Tamamlama"}),c.jsx("button",{className:"modal-close-btn",onClick:()=>{C(!1),j(null),v(null),I&&(I.getTracks().forEach(T=>T.stop()),P(null))},children:"✕"})]}),c.jsxs("div",{className:"modal-content",children:[c.jsxs("div",{className:"gorev-bilgi",children:[c.jsx("h4",{children:R==null?void 0:R.baslik}),c.jsx("p",{children:R==null?void 0:R.aciklama}),c.jsxs("div",{className:"tamamlanan-alt-gorevler",children:[c.jsx("h5",{children:"✅ Tamamlanan Alt Görevler:"}),c.jsx("ul",{children:R==null?void 0:R.altGorevler.filter(T=>Ct(R.id).includes(T.id)).map(T=>c.jsx("li",{children:T.baslik},T.id))})]})]}),c.jsxs("div",{className:"fotograf-bolumu",children:[c.jsx("h4",{children:"📸 Fotoğraf Çek"}),c.jsx("p",{children:"Görevin tamamlandığını kanıtlamak için bir fotoğraf çekin."}),!I&&!w&&c.jsx("button",{className:"kamera-baslat-btn",onClick:ha,children:"📷 Kamerayı Başlat"}),I&&!w&&c.jsxs("div",{className:"kamera-container",children:[c.jsx("video",{id:"camera-video",autoPlay:!0,playsInline:!0,ref:T=>{T&&I&&(T.srcObject=I)}}),c.jsx("button",{className:"foto-cek-btn",onClick:Xo,children:"📸 Fotoğraf Çek"})]}),w&&c.jsxs("div",{className:"cekilen-foto",children:[c.jsx("img",{src:w,alt:"Çekilen fotoğraf"}),c.jsx("div",{className:"foto-actions",children:c.jsx("button",{className:"tekrar-cek-btn",onClick:fa,children:"🔄 Tekrar Çek"})})]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{className:"iptal-btn",onClick:()=>{C(!1),j(null),v(null),I&&(I.getTracks().forEach(T=>T.stop()),P(null))},children:"❌ İptal"}),c.jsx("button",{className:"onayla-gonder-btn",onClick:vs,disabled:!w||s,children:s?"Gönderiliyor…":"✅ Admin Onayına Gönder"})]}),c.jsx("div",{className:"uyari-mesaj",children:"⚠️ Bu görev admin onayına gönderilecektir. Fotoğraf kanıt olarak kullanılacaktır."})]})]})}),Nt&&c.jsx("div",{className:"modal-overlay",onClick:()=>Qe(!1),children:c.jsxs("div",{className:"rica-modal",onClick:T=>T.stopPropagation(),children:[s&&c.jsx("div",{style:{height:"3px",background:"rgba(212,175,55,0.25)"},children:c.jsx("div",{style:{height:"100%",width:"100%",background:"#d4af37",animation:"loadingBar 1s linear infinite"}})}),c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"🙏 Rica Et"}),c.jsx("button",{className:"modal-close-btn",onClick:()=>Qe(!1),children:"✕"})]}),c.jsxs("div",{className:"modal-content",children:[c.jsxs("div",{className:"gorev-bilgi",children:[c.jsx("h4",{children:yt==null?void 0:yt.baslik}),c.jsx("p",{children:yt==null?void 0:yt.aciklama})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Kimden rica edeceksin?"}),c.jsx("input",{type:"text",placeholder:"İsimle ara...",value:_e,onChange:T=>de(T.target.value)}),c.jsx("div",{className:"kisi-listesi",children:nn.filter(T=>(T.fullName||"").toLowerCase().includes(_e.toLowerCase())).slice(0,20).map(T=>{var F,J;return c.jsxs("label",{className:`kisi-item ${ie===T.uid?"secili":""}`,children:[c.jsx("input",{type:"radio",name:"rica-kisi",value:T.uid,checked:ie===T.uid,onChange:()=>Te(T.uid)}),c.jsx("span",{className:"avatar",children:((J=(F=T.fullName)==null?void 0:F.charAt(0))==null?void 0:J.toUpperCase())||"?"}),c.jsx("span",{className:"isim",children:T.fullName}),c.jsxs("span",{className:"etiket",children:[String(T.department||"").toLocaleUpperCase("tr-TR")," • ",String(T.position||"").toLocaleUpperCase("tr-TR")]})]},T.uid)})})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Not (isteğe bağlı)"}),c.jsx("textarea",{rows:3,placeholder:"Kısaca durumu açıklayın...",value:X,onChange:T=>ce(T.target.value)})]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{className:"iptal-btn",onClick:()=>Qe(!1),children:"İptal"}),c.jsx("button",{className:"gonder-btn",onClick:Xu,disabled:!ie||s,children:"Gönder"})]})]})}),it&&c.jsx("div",{style:{position:"fixed",bottom:20,left:"50%",transform:"translateX(-50%)",padding:"10px 16px",borderRadius:12,background:it.type==="success"?"#28a745":it.type==="warning"?"#ffc107":"#dc3545",color:"#fff",boxShadow:"0 6px 18px rgba(0,0,0,0.2)",zIndex:1100},children:it.message}),E&&c.jsx("div",{className:"modal-overlay",children:c.jsxs("div",{className:"red-modal",children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"❌ Görev Reddetme"}),c.jsx("button",{className:"modal-close-btn",onClick:()=>{N(!1),b(""),at(null)},children:"✕"})]}),c.jsxs("div",{className:"modal-content",children:[c.jsxs("div",{className:"red-uyari",children:[c.jsx("p",{children:"Bu görevi reddetmek istediğinizden emin misiniz?"}),c.jsxs("p",{children:[c.jsx("strong",{children:"Not:"})," Görev kullanıcıya normal şekilde görünecek ve tekrar yapabilecektir."]})]}),c.jsxs("div",{className:"red-nedeni-input",children:[c.jsx("label",{htmlFor:"redNedeni",children:"Red Nedeni (Zorunlu):"}),c.jsx("textarea",{id:"redNedeni",value:S,onChange:T=>b(T.target.value),placeholder:"Görevi neden reddettiğinizi açıklayın...",rows:4,maxLength:500}),c.jsxs("div",{className:"karakter-sayisi",children:[S.length,"/500 karakter"]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{className:"iptal-btn",onClick:()=>{N(!1),b(""),at(null)},children:"🔙 İptal"}),c.jsx("button",{className:"red-onayla-btn",onClick:tl,disabled:!S.trim(),children:"❌ Reddet"})]})]})]})}),U&&c.jsx("div",{className:"modal-overlay photo-modal-overlay",onClick:Zo,children:c.jsxs("div",{className:"photo-modal",onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"photo-modal-header",children:[c.jsx("h3",{children:"📸 Kanıt Fotoğrafı"}),c.jsx("button",{className:"modal-close-btn",onClick:Zo,children:"✕"})]}),c.jsx("div",{className:"photo-modal-content",children:c.jsx("img",{src:A,alt:"Büyütülmüş kanıt fotoğrafı",className:"buyutulmus-foto"})}),c.jsx("div",{className:"photo-modal-footer",children:c.jsx("p",{children:"Fotoğrafı kapatmak için dış alana tıklayın veya ✕ butonunu kullanın"})})]})}),x&&c.jsx("div",{className:"modal-overlay admin-modal-overlay",onClick:()=>ye(!1),children:c.jsxs("div",{className:"admin-gorev-modal",onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"➕ Yeni Görev Ekle"}),c.jsx("button",{className:"modal-close",onClick:()=>ye(!1),children:"✕"})]}),c.jsxs("div",{className:"modal-content",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Görev Başlığı:"}),c.jsx("input",{type:"text",value:K.baslik,onChange:T=>Y({...K,baslik:T.target.value}),placeholder:"Görev başlığını girin..."})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Görev Açıklaması:"}),c.jsx("textarea",{value:K.aciklama,onChange:T=>Y({...K,aciklama:T.target.value}),placeholder:"Görev açıklamasını girin...",rows:"3"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Alt Görevler:"}),c.jsxs("div",{className:"alt-gorev-input",children:[c.jsx("input",{type:"text",value:ve,onChange:T=>ue(T.target.value),placeholder:"Alt görev girin...",onKeyPress:T=>T.key==="Enter"&&In()}),c.jsx("button",{type:"button",onClick:In,children:"Ekle"})]}),c.jsx("div",{className:"alt-gorev-listesi",children:K.altGorevler.map(T=>c.jsxs("div",{className:"alt-gorev-item",children:[c.jsx("span",{children:T.baslik}),c.jsx("button",{onClick:()=>sl(T.id),children:"🗑️"})]},T.id))})]})]}),c.jsxs("div",{className:"modal-footer",children:[c.jsx("button",{className:"btn-iptal",onClick:()=>ye(!1),children:"İptal"}),c.jsx("button",{className:"btn-kaydet",onClick:Zu,disabled:!K.baslik||!K.aciklama||K.altGorevler.length===0,children:"Görev Ekle"})]})]})}),Fe&&c.jsx("div",{className:"modal-overlay admin-modal-overlay",onClick:()=>Ce(!1),children:c.jsxs("div",{className:"admin-gorev-modal",onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"✏️ Görev Düzenle"}),c.jsx("button",{className:"modal-close",onClick:()=>Ce(!1),children:"✕"})]}),c.jsxs("div",{className:"modal-content",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Görev Başlığı:"}),c.jsx("input",{type:"text",value:K.baslik,onChange:T=>Y({...K,baslik:T.target.value}),placeholder:"Görev başlığını girin..."})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Görev Açıklaması:"}),c.jsx("textarea",{value:K.aciklama,onChange:T=>Y({...K,aciklama:T.target.value}),placeholder:"Görev açıklamasını girin...",rows:"3"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Alt Görevler:"}),c.jsxs("div",{className:"alt-gorev-input",children:[c.jsx("input",{type:"text",value:ve,onChange:T=>ue(T.target.value),placeholder:"Alt görev girin...",onKeyPress:T=>T.key==="Enter"&&In()}),c.jsx("button",{type:"button",onClick:In,children:"Ekle"})]}),c.jsx("div",{className:"alt-gorev-listesi",children:K.altGorevler.map(T=>c.jsxs("div",{className:"alt-gorev-item",children:[c.jsx("span",{children:T.baslik}),c.jsx("button",{onClick:()=>sl(T.id),children:"🗑️"})]},T.id))})]})]}),c.jsxs("div",{className:"modal-footer",children:[c.jsx("button",{className:"btn-iptal",onClick:()=>Ce(!1),children:"İptal"}),c.jsx("button",{className:"btn-kaydet",onClick:ed,disabled:!K.baslik||!K.aciklama||K.altGorevler.length===0,children:"Güncelle"})]})]})})]})},Xv={in:{label:"İçerde",color:"green"},in_overtime:{label:"İçerde (Fazla Mesai)",color:"green"},out:{label:"Dışarda",color:"red"},absent:{label:"Bugün Gelmedi",color:"gray"},no_record:{label:"Kayıt Yok",color:"gray"}},Xd=t=>t||"—",$l=t=>{try{return t?new Date(t).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):null}catch{return null}};function gP({open:t,onClose:e,record:n}){var d,m,p,g,k,C,R,j,w,v,I,P;if(M.useEffect(()=>{const U=B=>{B.key==="Escape"&&(e==null||e())};return t&&window.addEventListener("keydown",U),()=>window.removeEventListener("keydown",U)},[t,e]),!t||!n)return null;const r=Xv[n.status]||Xv.no_record,s=(d=n.arrivedAtLocation)==null?void 0:d.address,i=(m=n.arrivedAtLocation)!=null&&m.lat&&((p=n.arrivedAtLocation)!=null&&p.lon)?`https://www.google.com/maps?q=${n.arrivedAtLocation.lat},${n.arrivedAtLocation.lon}`:null,a=(g=n.leftAtLocation)==null?void 0:g.address,l=(k=n.leftAtLocation)!=null&&k.lat&&((C=n.leftAtLocation)!=null&&C.lon)?`https://www.google.com/maps?q=${n.leftAtLocation.lat},${n.leftAtLocation.lon}`:null,u=Array.isArray(n.history)?n.history:[];return c.jsx("div",{className:"mesai-modal-overlay",onClick:e,children:c.jsxs("div",{className:"mesai-modal",onClick:U=>U.stopPropagation(),children:[c.jsxs("div",{className:"mesai-modal-header",children:[c.jsxs("div",{children:[c.jsx("div",{className:"name",children:n.fullName}),c.jsxs("div",{className:"sub",children:[String(n.department||"").toLocaleUpperCase("tr-TR"),n.position?` / ${String(n.position).toLocaleUpperCase("tr-TR")}`:""]})]}),c.jsx("div",{className:`status-chip ${r.color}`,children:r.label})]}),c.jsxs("div",{className:"mesai-modal-section grid2",children:[c.jsxs("div",{className:"kv",children:[c.jsx("span",{children:"Geliş"}),c.jsx("strong",{children:Xd(((R=n==null?void 0:n.arrivedAt)==null?void 0:R.clientTime)||$l((j=n==null?void 0:n.arrivedAt)==null?void 0:j.millis))})]}),c.jsxs("div",{className:"kv",children:[c.jsx("span",{children:"Çıkış"}),c.jsx("strong",{children:Xd(((w=n==null?void 0:n.leftAt)==null?void 0:w.clientTime)||$l((v=n==null?void 0:n.leftAt)==null?void 0:v.millis))})]}),c.jsxs("div",{className:"kv",children:[c.jsx("span",{children:"Fazla Mesai"}),c.jsx("strong",{children:Xd(((I=n==null?void 0:n.overtimeAt)==null?void 0:I.clientTime)||$l((P=n==null?void 0:n.overtimeAt)==null?void 0:P.millis))})]}),c.jsxs("div",{className:"kv",children:[c.jsx("span",{children:"Durum"}),c.jsx("strong",{children:r.label})]})]}),c.jsxs("div",{className:"mesai-modal-section",children:[c.jsx("div",{className:"section-title",children:"Konum"}),s||a?c.jsxs("div",{children:[s&&c.jsxs("div",{className:"addr",style:{marginBottom:a?10:0},children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Giriş:"})," ",s]}),i&&c.jsx("a",{className:"map",href:i,target:"_blank",rel:"noreferrer",children:"Haritada Aç"})]}),a&&c.jsxs("div",{className:"addr",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Çıkış:"})," ",a]}),l&&c.jsx("a",{className:"map",href:l,target:"_blank",rel:"noreferrer",children:"Haritada Aç"})]})]}):c.jsx("div",{className:"muted",children:"Konum bilgisi yok"})]}),c.jsxs("div",{className:"mesai-modal-section",children:[c.jsx("div",{className:"section-title",children:"Geçmiş"}),u.length===0?c.jsx("div",{className:"muted",children:"Kayıt yok"}):c.jsx("ul",{className:"history",children:u.map((U,B)=>{const A=U.atClientTime||$l(U.atMillis)||U.clientTime||"—",y=U.type==="in"?"Giriş":U.type==="out"?"Çıkış":U.type==="absent"?"Bugün Gelmedi":U.type==="in_overtime"?"Fazla Mesai":U.type;return c.jsxs("li",{children:[c.jsx("span",{className:"pill",children:y})," ",c.jsx("span",{className:"time",children:A})]},B)})})]}),c.jsx("div",{className:"mesai-modal-actions",children:c.jsx("button",{className:"btn",onClick:e,children:"Kapat"})})]})})}function yP({open:t,onClose:e,title:n,items:r=[],type:s="inside",onSelect:i}){const[a,l]=M.useState("");M.useEffect(()=>{t&&l("")},[t]);const u=M.useMemo(()=>{const p=a.trim().toLowerCase();return p?r.filter(g=>{const k=(g.fullName||"").toLowerCase(),C=(g.department||"").toLowerCase(),R=(g.position||"").toLowerCase();return k.includes(p)||C.includes(p)||R.includes(p)}):r},[a,r]);if(!t)return null;const d=s==="inside"?"green":s==="absent"?"gray":"red",m=(p,g)=>{var v,I,P,U,B;const k=String(p.department||"").toLocaleUpperCase("tr-TR"),C=String(p.position||"").toLocaleUpperCase("tr-TR"),R=(v=p.arrivedAtLocation)==null?void 0:v.address,j=R?R.split(",").slice(0,3).join(", "):null,w=(I=p.arrivedAtLocation)!=null&&I.lat&&((P=p.arrivedAtLocation)!=null&&P.lon)?`https://www.google.com/maps?q=${p.arrivedAtLocation.lat},${p.arrivedAtLocation.lon}`:null;return c.jsxs("div",{className:"gl-row",onClick:()=>i==null?void 0:i(p),children:[c.jsx("div",{className:`gl-dot ${d}`}),c.jsxs("div",{className:"gl-info",children:[c.jsx("div",{className:"gl-name",children:p.fullName}),c.jsxs("div",{className:"gl-meta",children:[k,C?` / ${C}`:"",j?` · ${j}`:""," ",w&&c.jsx("a",{className:"gl-map",href:w,target:"_blank",rel:"noreferrer",onClick:A=>A.stopPropagation(),children:"harita"})]})]}),c.jsxs("div",{className:"gl-right",children:[s==="inside"&&((U=p.arrivedAt)==null?void 0:U.clientTime)&&c.jsxs("span",{className:"gl-pill",children:["Geliş ",p.arrivedAt.clientTime]}),s==="outside"&&c.jsxs("span",{className:"gl-pill",children:["Çıkış ",((B=p.leftAt)==null?void 0:B.clientTime)||"—"]}),s==="absent"&&c.jsx("span",{className:"gl-pill",children:"—"})]})]},p.uid||g)};return c.jsx("div",{className:"gl-overlay",onClick:e,children:c.jsxs("div",{className:"gl-modal",onClick:p=>p.stopPropagation(),children:[c.jsxs("div",{className:"gl-header",children:[c.jsxs("div",{className:"gl-title",children:[n," ",c.jsx("span",{className:"count",children:r.length})]}),c.jsx("button",{className:"gl-close",onClick:e,children:"×"})]}),c.jsx("div",{className:"gl-toolbar",children:c.jsx("input",{className:"gl-search",placeholder:"İsim / departman / pozisyon",value:a,onChange:p=>l(p.target.value)})}),c.jsx("div",{className:"gl-list",children:u.length===0?c.jsx("div",{className:"gl-empty",children:"Sonuç yok"}):u.map(m)})]})})}function vP({open:t,icon:e="🎉",title:n,subtitle:r,duration:s=2200,onClose:i}){return M.useEffect(()=>{if(!t)return;const a=setTimeout(()=>i==null?void 0:i(),s);return()=>clearTimeout(a)},[t,s,i]),t?c.jsx("div",{className:"cn-overlay",onClick:i,children:c.jsxs("div",{className:"cn-card",onClick:a=>a.stopPropagation(),role:"alertdialog","aria-live":"assertive",children:[c.jsx("div",{className:"cn-icon",children:e}),n&&c.jsx("div",{className:"cn-title",children:n}),r&&c.jsx("div",{className:"cn-sub",children:r}),c.jsx("button",{className:"cn-close",onClick:i,children:"×"})]})}):null}const _P=({userProfile:t,onBack:e})=>{var Un,nn;const[n,r]=M.useState(null),[s,i]=M.useState({gelisSaati:null,cikisSaati:null}),[a,l]=M.useState(null),[u,d]=M.useState(()=>new Date().toISOString().split("T")[0]),[m,p]=M.useState(null),[g,k]=M.useState([]),[C,R]=M.useState([]),[j,w]=M.useState(!1),[v,I]=M.useState(null),[P,U]=M.useState(!1),[B,A]=M.useState(null),[y,E]=M.useState({open:!1,type:null,items:[]}),[N,S]=M.useState({open:!1,icon:"🎉",title:"",subtitle:""}),[b,x]=M.useState(null),[ye,Fe]=M.useState(!1),[Ce,Be]=M.useState(null),$=u_.useRef(null);M.useEffect(()=>{let ne=null;return(async()=>{const _e=await JD();_e!=null&&_e.success&&R(_e.users||[])})(),ne=nP(u,_e=>{k(_e||[])}),()=>{typeof ne=="function"&&ne()}},[u]);const K=()=>new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().split("T")[0];M.useEffect(()=>{Y(u)},[u,t]);const Y=async(ne,_e={})=>{var Te,X;const{keepIfMissing:de=!1}=_e;if(!(t!=null&&t.uid))return;const ie=await tP(t.uid,ne);if(ie.success&&ie.data){const ce=ie.data;x(ce.date||ne),Fe(!!(ce!=null&&ce.leftAt)||(ce==null?void 0:ce.status)==="out");const fe=((Te=ce.arrivedAt)==null?void 0:Te.clientTime)||null,Ye=((X=ce.leftAt)==null?void 0:X.clientTime)||null,at=ce.status==="in"||ce.status==="in_overtime"?"geldim":ce.status==="out"?"kaldim":ce.status==="absent"?"gelmedim":null;if(l({durum:at,gelisSaati:fe,cikisSaati:Ye}),i({gelisSaati:fe,cikisSaati:Ye}),fe&&!Ye){const Re=new Date(`${ne}T${fe}`),rn=new Date(Re.getTime()+9.5*3600*1e3);p(rn.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}))}else p(null)}else de||(l(null),i({gelisSaati:null,cikisSaati:null}),p(null),x(null),Fe(!1))},ve=async()=>{var ce;if(I(null),Be("in"),!(t!=null&&t.uid)){I("Profil eksik (UID). Lütfen çıkış yapıp tekrar giriş yapın.");return}w(!0);const ne=a,_e=s,de=new Date,ie=de.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit",second:"2-digit"});l({durum:"geldim",gelisSaati:ie,cikisSaati:null}),i({gelisSaati:ie,cikisSaati:null});const Te=new Date(de.getTime()+9.5*3600*1e3);p(Te.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit",second:"2-digit"})),S({open:!0,icon:"👋",title:`Hoş geldin ${(t==null?void 0:t.firstName)||((ce=t==null?void 0:t.fullName)==null?void 0:ce.split(" ")[0])||""}!`,subtitle:"Güzel bir mesai olsun."});let X=null;try{const fe=await new Promise((rn,xt)=>{if(!navigator.geolocation)return xt(new Error("Geolocation not supported"));navigator.geolocation.getCurrentPosition(rn,xt,{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})}),{latitude:Ye,longitude:at}=fe.coords;let Re=null;try{const rn=new AbortController,xt=`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${Ye}&lon=${at}`,Ct=setTimeout(()=>rn.abort(),2500),Rt=await fetch(xt,{headers:{Accept:"application/json"},signal:rn.signal});if(clearTimeout(Ct),Rt.ok){const Pe=await Rt.json();Re=(Pe==null?void 0:Pe.display_name)||null}}catch{}X={lat:Ye,lon:at,address:Re}}catch{S({open:!0,icon:"ℹ️",title:"Konum alınamadı",subtitle:"İzin verilmedi veya zaman aşımı. Kayıt yine de alındı."})}try{const fe=await sP({uid:t==null?void 0:t.uid,email:t==null?void 0:t.email,fullName:t==null?void 0:t.fullName,department:t==null?void 0:t.department,position:t==null?void 0:t.position},u,X);if(!(fe!=null&&fe.success))throw new Error((fe==null?void 0:fe.error)||"Kayıt başarısız");x(u),setTimeout(()=>Y(u,{keepIfMissing:!0}),600),setTimeout(()=>Y(u),1600)}catch(fe){I(`Kayıt alınamadı: ${(fe==null?void 0:fe.message)||fe}`),l(ne||null),i(_e||{gelisSaati:null,cikisSaati:null})}finally{w(!1)}},ue=async()=>{I(null),Be("out"),w(!0);const ne=b||u;let _e=null;try{const de=await new Promise((ce,fe)=>{if(!navigator.geolocation)return fe(new Error("Geolocation not supported"));navigator.geolocation.getCurrentPosition(ce,fe,{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})}),{latitude:ie,longitude:Te}=de.coords;let X=null;try{const ce=new AbortController,fe=`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${ie}&lon=${Te}`,Ye=setTimeout(()=>ce.abort(),2500),at=await fetch(fe,{headers:{Accept:"application/json"},signal:ce.signal});if(clearTimeout(Ye),at.ok){const Re=await at.json();X=(Re==null?void 0:Re.display_name)||null}}catch{}_e={lat:ie,lon:Te,address:X}}catch{S({open:!0,icon:"ℹ️",title:"Konum alınamadı",subtitle:"İzin verilmedi veya zaman aşımı. Kayıt yine de alındı."})}try{const de=await Qv({uid:t==null?void 0:t.uid,email:t==null?void 0:t.email,fullName:t==null?void 0:t.fullName,department:t==null?void 0:t.department,position:t==null?void 0:t.position},ne,_e);if(!(de!=null&&de.success))throw new Error((de==null?void 0:de.error)||"Çıkış kaydı başarısız");await Y(ne),S({open:!0,icon:"🙏",title:"Güle güle",subtitle:"Emeğin için teşekkürler."})}catch(de){I(`Çıkış alınamadı: ${(de==null?void 0:de.message)||de}`)}finally{w(!1)}};M.useEffect(()=>{$.current&&(clearTimeout($.current),$.current=null);const ne=a==null?void 0:a.durum,_e=a==null?void 0:a.gelisSaati,de=a==null?void 0:a.cikisSaati,ie=b||u;if(ne==="geldim"&&_e&&!de&&ie){const Te=new Date(`${ie}T${_e}`),ce=new Date(Te.getTime()+9.5*3600*1e3).getTime()-Date.now();ce<=0?Ie():$.current=setTimeout(()=>{Ie()},ce)}return()=>{$.current&&clearTimeout($.current)}},[a==null?void 0:a.durum,a==null?void 0:a.gelisSaati,a==null?void 0:a.cikisSaati,b,u]);const Ie=async()=>{try{const ne=b||u;await Qv({uid:t==null?void 0:t.uid,email:t==null?void 0:t.email,fullName:t==null?void 0:t.fullName,department:t==null?void 0:t.department,position:t==null?void 0:t.position},ne,null),await Y(ne),S({open:!0,icon:"⏰",title:"Otomatik Kapatıldı",subtitle:"9,5 saat dolduğu için mesai kapatıldı."})}catch{}},it=()=>{if(Ce==="in")return ve();if(Ce==="out")return ue();if(Ce==="absent")return Ae();if(Ce==="overtime"){const ne=b||u;return Yv({uid:t==null?void 0:t.uid,email:t==null?void 0:t.email,fullName:t==null?void 0:t.fullName,department:t==null?void 0:t.department,position:t==null?void 0:t.position},ne).then(()=>Y(ne))}},Ae=async()=>{I(null),w(!0),await iP({uid:t==null?void 0:t.uid,email:t==null?void 0:t.email,fullName:t==null?void 0:t.fullName,department:t==null?void 0:t.department,position:t==null?void 0:t.position},u),await Y(u),w(!1)},Nt=ne=>{switch(ne==null?void 0:ne.durum){case"geldim":return"🟢 Mesaide";case"kaldim":return"🔴 Mesai Bitti";case"gelmedim":return"❌ Bugün Gelmedi";default:return"⚪ Kayıt Yok"}},Qe=()=>{if(a!=null&&a.gelisSaati&&(a!=null&&a.cikisSaati)){const ne=new Date(`2000-01-01 ${a.gelisSaati}`),de=new Date(`2000-01-01 ${a.cikisSaati}`)-ne,ie=Math.floor(de/(1e3*60*60)),Te=Math.floor(de%(1e3*60*60)/(1e3*60));return`${ie}s ${Te}dk`}return null},yt=ne=>new Date(ne).toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return c.jsxs("div",{className:"mesai-takip-container",children:[c.jsxs("header",{className:"mesai-header",children:[c.jsxs("div",{className:"header-left",children:[c.jsx("button",{className:"geri-btn",onClick:e,children:"← Geri"}),c.jsxs("div",{className:"header-title",children:[c.jsx("h1",{children:"Mesai Takip"}),c.jsxs("p",{children:[(t==null?void 0:t.name)||(t==null?void 0:t.fullName)||"Kullanıcı"," - ",String((t==null?void 0:t.department)||"Departman").toLocaleUpperCase("tr-TR")]})]})]}),c.jsxs("div",{className:"date-picker-container",children:[c.jsx("label",{children:"Tarih:"}),c.jsx("input",{type:"date",value:u,onChange:ne=>d(ne.target.value),max:K(),className:"date-picker-input"}),c.jsx("button",{className:"bugun-btn",onClick:()=>d(K()),children:"Bugün"})]}),c.jsxs("div",{className:"header-stats",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-number",children:"08:30"}),c.jsx("div",{className:"stat-label",children:"İşletme Açılış"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-number",children:"23:45"}),c.jsx("div",{className:"stat-label",children:"İşletme Kapanış"})]})]})]}),c.jsxs("main",{className:"mesai-main",children:[c.jsxs("div",{className:"user-info-bar",children:[c.jsx("div",{className:"user-avatar",children:((nn=(Un=t==null?void 0:t.fullName)==null?void 0:Un.charAt(0))==null?void 0:nn.toUpperCase())||"U"}),c.jsxs("div",{className:"user-details",children:[c.jsx("h3",{children:(t==null?void 0:t.fullName)||"Kullanıcı"}),c.jsxs("p",{children:[String((t==null?void 0:t.department)||"Departman").toLocaleUpperCase("tr-TR")," - ",String((t==null?void 0:t.position)||"Pozisyon").toLocaleUpperCase("tr-TR")]})]}),c.jsx("div",{className:"tarih-info",children:c.jsx("div",{className:"tarih",children:yt(u)})})]}),c.jsxs("div",{className:"mesai-durum-karti",children:[c.jsx("h3",{children:"📊 Mesai Durumu"}),c.jsxs("div",{className:"mesai-butonlari",children:[(a==null?void 0:a.durum)==="geldim"?c.jsxs("button",{className:"mesai-btn kaldim-btn",onClick:ue,children:[c.jsx("div",{className:"btn-icon",children:"🛑"}),c.jsxs("div",{className:"btn-content",children:[c.jsx("h4",{children:"Mesaiyi Bitirdim"}),c.jsx("p",{children:"Çıkış saatini kaydet ve mesaiyi kapat."})]})]}):c.jsxs("button",{className:"mesai-btn geldim-btn",onClick:ve,disabled:ye||(a==null?void 0:a.durum)==="gelmedim"||j,title:ye?"Bugün çıkış alınmış, yeniden giriş kilitli.":"Geliş saatini kaydeder. 9,5 saat sonra otomatik kapanış uyarısı.",children:[c.jsx("div",{className:"btn-icon",children:"🟢"}),c.jsxs("div",{className:"btn-content",children:[c.jsx("h4",{children:"Mesaiye Geldim"}),c.jsx("p",{children:j?"Kaydediliyor...":ye?"Bugün için giriş kapalı (çıkış alınmış).":"Başlangıcı kaydet. 9.5 saat sonra otomatik kapanır."})]})]}),v&&c.jsxs("div",{style:{gridColumn:"1 / -1",color:"#b94a48"},children:[v,c.jsx("button",{className:"bugun-btn",style:{marginLeft:10},onClick:it,children:"Tekrar Dene"})]}),(a==null?void 0:a.durum)==="gelmedim"&&c.jsxs("div",{style:{gridColumn:"1 / -1",color:"#856404"},children:["Bu günde 'Bugün Gelmedim' kaydı var. Gerekirse kaydı sıfırlayabilirsin.",c.jsx("button",{className:"bugun-btn",style:{marginLeft:10},onClick:async()=>{await aP({uid:t==null?void 0:t.uid},u),await Y(u)},children:"Kaydı Sıfırla"})]}),c.jsxs("button",{className:"mesai-btn kaldim-btn",onClick:async()=>{const ne=b||u;await Yv({uid:t==null?void 0:t.uid,email:t==null?void 0:t.email,fullName:t==null?void 0:t.fullName,department:t==null?void 0:t.department,position:t==null?void 0:t.position},ne),await Y(ne)},disabled:(a==null?void 0:a.durum)!=="geldim",children:[c.jsx("div",{className:"btn-icon",children:"⏱️"}),c.jsxs("div",{className:"btn-content",children:[c.jsx("h4",{children:"Mesaiye Kaldım"}),c.jsx("p",{children:"9.5 saat sonrası için uzat. Kapanışı ayrı alttan yap."})]})]}),c.jsxs("button",{className:"mesai-btn gelmedim-btn",onClick:Ae,disabled:(a==null?void 0:a.durum)==="gelmedim"||(a==null?void 0:a.gelisSaati),children:[c.jsx("div",{className:"btn-icon",children:"❌"}),c.jsxs("div",{className:"btn-content",children:[c.jsx("h4",{children:"Bugün Gelmedim"}),c.jsx("p",{children:"Bugün mesaiye gelmediğimi kaydet. Diğer seçenekler pasif olur."})]})]})]}),c.jsxs("div",{className:"durum-detay",children:[c.jsx("div",{className:"durum-badge",children:Nt(a)}),a&&c.jsxs("div",{className:"saat-bilgileri",children:[a.gelisSaati&&c.jsxs("div",{className:"saat-item",children:[c.jsx("span",{className:"saat-label",children:"🟢 Geliş:"}),c.jsx("span",{className:"saat-value",children:a.gelisSaati})]}),a.cikisSaati&&c.jsxs("div",{className:"saat-item",children:[c.jsx("span",{className:"saat-label",children:"🔴 Çıkış:"}),c.jsx("span",{className:"saat-value",children:a.cikisSaati})]}),m&&!a.cikisSaati&&c.jsxs("div",{className:"saat-item otomatik",children:[c.jsx("span",{className:"saat-label",children:"⏰ Otomatik Çıkış:"}),c.jsx("span",{className:"saat-value",children:m})]}),Qe()&&c.jsxs("div",{className:"saat-item",children:[c.jsx("span",{className:"saat-label",children:"⏱️ Toplam:"}),c.jsx("span",{className:"saat-value",children:Qe()})]})]})]})]}),c.jsxs("div",{className:"bilgi-mesaji",children:[c.jsx("h4",{children:"ℹ️ Önemli Bilgiler:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Mesai kayıtları günlük olarak tutulur"}),c.jsx("li",{children:"Mesaiye geldikten 9.5 saat sonra otomatik kapatma uyarısı"}),c.jsx("li",{children:"Bir kez kaydedilen durum değiştirilemez"}),c.jsx("li",{children:"Mesaiye geldikten sonra çıkış yapabilirsiniz"}),c.jsx("li",{children:"Bugün gelmediğinizi işaretlerseniz diğer seçenekler pasif olur"}),c.jsx("li",{children:"Giriş/çıkış sırasında konum izni istenir; doğru kayıt için izin vermeniz önerilir"})]})]})]}),c.jsx("main",{className:"mesai-main",children:c.jsxs("div",{className:"mesai-durum-karti",children:[c.jsx("h3",{children:"🏪 İşletme Durum Panosu"}),(()=>{const ne=new Map(g.map(X=>[X.uid,X])),_e=[],de=[],ie=[];for(const X of g)X.status==="in"||X.status==="in_overtime"?_e.push(X):X.status==="absent"&&de.push(X);for(const X of C){const ce=ne.get(X.uid);if(ce){if(ce.status==="in"||ce.status==="in_overtime"||ce.status==="absent")continue;ie.push(ce)}else ie.push({uid:X.uid,fullName:X.fullName||X.firstName+" "+(X.lastName||""),department:X.department,position:X.position,leftAt:null,arrivedAtLocation:null,status:"no_record"})}const Te=(X,ce="gray",fe="outside")=>{var Pe,Je;const Ye=String(X.department||"").toLocaleUpperCase("tr-TR"),at=String(X.position||"").toLocaleUpperCase("tr-TR"),Re=fe==="outside"&&X.leftAtLocation||X.arrivedAtLocation,rn=Re==null?void 0:Re.address,xt=rn?rn.split(",").slice(0,3).join(", "):null,Ct=Re!=null&&Re.lat&&(Re!=null&&Re.lon)?`https://www.google.com/maps?q=${Re.lat},${Re.lon}`:null,Rt=[];if(fe==="inside"&&(X.status==="in_overtime"&&Rt.push(c.jsx("span",{className:"chip overtime",children:"fazla mesai"},"ot")),(Pe=X.arrivedAt)!=null&&Pe.clientTime&&Rt.push(c.jsxs("span",{className:"chip",children:["Geliş: ",X.arrivedAt.clientTime]},"in"))),fe==="outside"&&(Rt.push(c.jsxs("span",{className:"chip",children:["Çıkış: ",((Je=X.leftAt)==null?void 0:Je.clientTime)||"—"]},"out")),X.status==="no_record"&&Rt.push(c.jsx("span",{className:"chip warn",children:"kayıt yok"},"nr")),Re)){const Bn=X.leftAtLocation?"Çıkış konumu":"Giriş konumu";Rt.push(c.jsx("span",{className:"chip",children:Bn},"loc"))}return c.jsxs("div",{className:"user-row",onClick:()=>{A(X),U(!0)},style:{cursor:"pointer"},children:[c.jsx("div",{className:`user-dot ${ce}`}),c.jsxs("div",{className:"user-info",children:[c.jsx("div",{className:"user-name",children:X.fullName}),c.jsxs("div",{className:"user-meta",children:[Ye,at?` / ${at}`:"",xt?` · ${xt}`:""," ",Ct&&c.jsx("a",{className:"map-link",href:Ct,target:"_blank",rel:"noreferrer",children:"harita"})]}),Rt.length>0&&c.jsx("div",{className:"chips",children:Rt})]})]},X.uid||X.id)};return c.jsx("div",{children:c.jsxs("div",{className:"panel-columns",children:[c.jsxs("div",{className:"panel-card",children:[c.jsxs("div",{className:"panel-card-header",children:[c.jsx("span",{className:"btn-icon",children:"🟢"}),c.jsx("button",{className:"title",style:{background:"transparent",border:0,cursor:"pointer",padding:0},onClick:()=>E({open:!0,type:"inside",items:_e,title:"İçerde Olanlar"}),children:"İçerde Olanlar"}),c.jsx("span",{className:"count",children:_e.length})]}),c.jsx("div",{className:"list-scroll",children:_e.length===0?c.jsx("div",{className:"empty-state",children:"Yok"}):_e.map(X=>Te(X,"green","inside"))})]}),c.jsxs("div",{className:"panel-card",children:[c.jsxs("div",{className:"panel-card-header",children:[c.jsx("span",{className:"btn-icon",children:"🔴"}),c.jsx("button",{className:"title",style:{background:"transparent",border:0,cursor:"pointer",padding:0},onClick:()=>E({open:!0,type:"outside",items:ie,title:"Dışarda Olanlar"}),children:"Dışarda Olanlar"}),c.jsx("span",{className:"count",children:ie.length})]}),c.jsx("div",{className:"list-scroll",children:ie.length===0?c.jsx("div",{className:"empty-state",children:"Yok"}):ie.map(X=>Te(X,"red","outside"))})]}),c.jsxs("div",{className:"panel-card",children:[c.jsxs("div",{className:"panel-card-header",children:[c.jsx("span",{className:"btn-icon",children:"❌"}),c.jsx("button",{className:"title",style:{background:"transparent",border:0,cursor:"pointer",padding:0},onClick:()=>E({open:!0,type:"absent",items:de,title:"Bugün Gelmeyenler"}),children:"Bugün Gelmeyenler"}),c.jsx("span",{className:"count",children:de.length})]}),c.jsx("div",{className:"list-scroll",children:de.length===0?c.jsx("div",{className:"empty-state",children:"Yok"}):de.map(X=>Te(X,"gray","absent"))})]})]})})})()]})}),c.jsx(gP,{open:P,onClose:()=>U(!1),record:B}),c.jsx(yP,{open:y.open,title:y.title,type:y.type,items:y.items,onClose:()=>E({open:!1,type:null,items:[]}),onSelect:ne=>{A(ne),U(!0)}}),c.jsx(vP,{open:N.open,icon:N.icon,title:N.title,subtitle:N.subtitle,duration:2200,onClose:()=>S({...N,open:!1})})]})};function wP({userProfile:t,onBack:e}){const[n,r]=M.useState(""),[s,i]=M.useState(""),[a,l]=M.useState(!1),[u,d]=M.useState([]),[m,p]=M.useState(null),g=async()=>{if(p(null),!n||!s){p("Başlangıç ve bitiş tarihlerini seçin.");return}l(!0);const C=await rP(n,s);C.success?d(C.items):p("Kayıtlar alınamadı"),l(!1)},k=()=>{const C=["Ad Soyad","Tarih","Durum","Geliş","Çıkış","Fazla Mesai"],R=u.map(P=>{var U,B,A;return[P.fullName,P.date,P.status,((U=P.arrivedAt)==null?void 0:U.clientTime)||"",((B=P.leftAt)==null?void 0:B.clientTime)||"",((A=P.overtimeAt)==null?void 0:A.clientTime)||""]}),j=[C,...R].map(P=>P.map(U=>`"${(U||"").toString().replaceAll('"','""')}"`).join(",")).join(`
`),w=new Blob([j],{type:"text/csv;charset=utf-8;"}),v=URL.createObjectURL(w),I=document.createElement("a");I.href=v,I.download=`mesai-rapor_${n||"baslangic"}_${s||"bitis"}.csv`,I.click(),URL.revokeObjectURL(v)};return c.jsxs("div",{style:{padding:20},children:[c.jsx("button",{onClick:e,children:"← Geri"}),c.jsx("h2",{children:"Raporlar"}),c.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[c.jsx("label",{children:"Başlangıç"}),c.jsx("input",{type:"date",value:n,onChange:C=>r(C.target.value)}),c.jsx("label",{children:"Bitiş"}),c.jsx("input",{type:"date",value:s,onChange:C=>i(C.target.value)}),c.jsx("button",{onClick:g,disabled:a,children:a?"Yükleniyor...":"Getir"}),c.jsx("button",{onClick:k,disabled:!u.length,children:"CSV İndir"})]}),m&&c.jsx("div",{style:{color:"#b94a48",marginTop:10},children:m}),c.jsxs("div",{style:{marginTop:20},children:[c.jsxs("div",{style:{fontWeight:"bold",marginBottom:8},children:["Kayıt Sayısı: ",u.length]}),c.jsxs("div",{style:{maxHeight:420,overflow:"auto",border:"1px solid #eee",borderRadius:8},children:[u.map(C=>{var R,j,w;return c.jsxs("div",{style:{padding:10,borderBottom:"1px solid #f2f2f2"},children:[c.jsxs("div",{style:{fontWeight:"600"},children:[C.fullName," — ",C.date," (",C.status,")"]}),c.jsxs("div",{style:{fontSize:13,opacity:.8},children:["Geliş: ",((R=C.arrivedAt)==null?void 0:R.clientTime)||"—"," · Çıkış: ",((j=C.leftAt)==null?void 0:j.clientTime)||"—"," · Fazla Mesai: ",((w=C.overtimeAt)==null?void 0:w.clientTime)||"—"]})]},C.id)}),u.length===0&&c.jsx("div",{style:{padding:14,opacity:.7},children:"Kayıt yok"})]})]})]})}function EP({userProfile:t,onBack:e,onOpenReports:n,onOpenMola:r,onOpenPersonel:s,onOpenUsers:i,onOpenNotifications:a}){const l=(t==null?void 0:t.role)==="admin";return c.jsxs("div",{className:"admin-wrap",children:[c.jsxs("header",{className:"admin-header",children:[c.jsx("button",{className:"back-btn",onClick:e,children:"← Geri"}),c.jsx("h1",{children:"Yönetim Menüsü"}),c.jsx("div",{className:"spacer"})]}),l?c.jsx("main",{className:"admin-main",children:c.jsxs("div",{className:"admin-grid",children:[c.jsxs("button",{className:"admin-card",onClick:n,children:[c.jsx("div",{className:"icon",children:"📈"}),c.jsxs("div",{className:"txt",children:[c.jsx("h3",{children:"Raporlar"}),c.jsx("p",{children:"Mesai ve mola raporları"})]}),c.jsx("div",{className:"arrow",children:"→"})]}),c.jsxs("button",{className:"admin-card",onClick:r,children:[c.jsx("div",{className:"icon",children:"☕"}),c.jsxs("div",{className:"txt",children:[c.jsx("h3",{children:"Mola Yönetimi"}),c.jsx("p",{children:"Aktif molalar ve geçmiş"})]}),c.jsx("div",{className:"arrow",children:"→"})]}),c.jsxs("button",{className:"admin-card",onClick:s,children:[c.jsx("div",{className:"icon",children:"👥"}),c.jsxs("div",{className:"txt",children:[c.jsx("h3",{children:"Personel"}),c.jsx("p",{children:"Kadro ve vardiyalar"})]}),c.jsx("div",{className:"arrow",children:"→"})]}),c.jsxs("button",{className:"admin-card",onClick:i,children:[c.jsx("div",{className:"icon",children:"🛂"}),c.jsxs("div",{className:"txt",children:[c.jsx("h3",{children:"Kullanıcılar"}),c.jsx("p",{children:"Rol ve aktiflik yönetimi"})]}),c.jsx("div",{className:"arrow",children:"→"})]}),c.jsxs("button",{className:"admin-card",onClick:a,children:[c.jsx("div",{className:"icon",children:"🔔"}),c.jsxs("div",{className:"txt",children:[c.jsx("h3",{children:"Bildirimler"}),c.jsx("p",{children:"Tekil ve toplu gönderimler"})]}),c.jsx("div",{className:"arrow",children:"→"})]})]})}):c.jsx("div",{className:"warn",children:"Bu alanı görüntülemek için yetkiniz yok."})]})}const Gl=t=>{if(!t&&t!==0)return"—";try{return new Date(t).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return"—"}},Zv=t=>{const e=Math.max(0,Math.floor(t/1e3)),n=Math.floor(e/60),r=String(e%60).padStart(2,"0");return`${n} dk ${r} sn`};function TP({open:t,onClose:e,record:n}){const r=M.useMemo(()=>{var u,d,m,p;if(!n)return[];const i=Array.isArray(n.history)?[...n.history]:[];i.sort((g,k)=>(g.atMillis||0)-(k.atMillis||0));const a=[];let l=null;for(const g of i)if(g.type==="start")l={type:g.breakType,duration:g.duration,start:g.atMillis,startClient:g.atClientTime};else if(g.type==="end"&&l){const k=l.start+(l.duration||0)*60*1e3,C=g.atMillis,R=Math.max(0,C-k);a.push({...l,end:C,endClient:g.atClientTime,expectedEnd:k,over:R}),l=null}if(n.active&&n.activeBreak){const g=n.activeBreak;a.push({type:g.type,duration:g.duration,start:(u=g.startedAt)==null?void 0:u.millis,startClient:(d=g.startedAt)==null?void 0:d.clientTime,expectedEnd:(m=g.expectedEndAt)==null?void 0:m.millis,end:null,over:Math.max(0,Date.now()-(((p=g.expectedEndAt)==null?void 0:p.millis)||0))})}return a},[n]),s=r.filter(i=>i.end).reduce((i,a)=>i+Math.max(0,a.end-(a.start||0)),0);return!t||!n?null:c.jsx("div",{className:"mola-modal-overlay",onClick:e,children:c.jsxs("div",{className:"mola-modal",onClick:i=>i.stopPropagation(),children:[c.jsxs("div",{className:"mola-modal-header",children:[c.jsxs("div",{children:[c.jsx("div",{className:"name",children:n.fullName}),c.jsx("div",{className:"sub",children:n.date})]}),c.jsx("button",{className:"close-btn",onClick:e,children:"×"})]}),c.jsxs("div",{className:"mola-modal-section",children:[c.jsx("div",{className:"section-title",children:"Özet"}),c.jsxs("div",{className:"summary",children:[c.jsxs("div",{className:"pill",children:["Seans: ",r.length]}),c.jsxs("div",{className:"pill",children:["Toplam Süre: ",Zv(s)]})]})]}),c.jsxs("div",{className:"mola-modal-section",children:[c.jsx("div",{className:"section-title",children:"Günün Molaları"}),r.length===0?c.jsx("div",{className:"muted",children:"Kayıt yok"}):c.jsx("ul",{className:"sess-list",children:r.map((i,a)=>{const l=(i.duration||0)*60*1e3,u=i.end&&l?Math.round(Math.max(0,i.end-i.expectedEnd)/l*100):i.over>0&&l?Math.round(i.over/l*100):0;return c.jsxs("li",{className:"sess-item",children:[c.jsxs("div",{className:"row-top",children:[c.jsx("span",{className:"pill kind",children:i.type}),i.end?c.jsxs("span",{className:u>0?"pill danger":"pill soft",children:[Gl(i.start)," → ",Gl(i.end)," ",u>0?` · Aşım %${u}`:""]}):c.jsxs("span",{className:i.over>0?"pill danger":"pill soft",children:[Gl(i.start)," → ",Gl(i.expectedEnd),i.over>0?` · Aşım +${Zv(i.over)}`:""]})]}),c.jsx("div",{className:`progress ${(i.end?i.end>i.expectedEnd:Date.now()>(i.expectedEnd||0))?"over":""}`,children:c.jsx("div",{className:"progress-bar",style:{width:`${Math.min(100,Math.round(((i.end||Date.now())-(i.start||0))/(l||1)*100))}%`}})})]},a)})})]}),c.jsx("div",{className:"mola-modal-actions",children:c.jsx("button",{className:"btn",onClick:e,children:"Kapat"})})]})})}const Zd=()=>new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().split("T")[0];function kP({userProfile:t,onBack:e}){var A,y,E,N;const[n,r]=M.useState(Zd()),[s,i]=M.useState(!1),[a,l]=M.useState(null),[u,d]=M.useState([]),[m,p]=M.useState(null);M.useEffect(()=>{const S=cP(n,b=>d(b||[]));return()=>{typeof S=="function"&&S()}},[n]);const g=M.useMemo(()=>u.find(S=>S.uid===(t==null?void 0:t.uid)),[u,t]),k=(g==null?void 0:g.active)&&(g==null?void 0:g.activeBreak),[C,R]=M.useState(Date.now()),j=M.useRef(!1);M.useEffect(()=>{const S=setInterval(()=>R(Date.now()),1e3);return()=>clearInterval(S)},[]),M.useEffect(()=>{j.current=!1},[(A=k==null?void 0:k.startedAt)==null?void 0:A.millis]),M.useEffect(()=>{var b;if(!((b=k==null?void 0:k.expectedEndAt)!=null&&b.millis))return;const S=k.expectedEndAt.millis-C;!j.current&&S<=6e4&&S>0&&(navigator!=null&&navigator.vibrate&&navigator.vibrate([200,120,200]),j.current=!0)},[C,(y=k==null?void 0:k.expectedEndAt)==null?void 0:y.millis]);const w=S=>{const b=Math.max(0,Math.floor(S/1e3)),x=String(Math.floor(b/60)).padStart(2,"0"),ye=String(b%60).padStart(2,"0");return`${x}:${ye}`},v=S=>{const b=Math.max(0,Math.floor(S/1e3)),x=String(Math.floor(b/3600)).padStart(2,"0"),ye=String(Math.floor(b%3600/60)).padStart(2,"0"),Fe=String(b%60).padStart(2,"0");return`${x}:${ye}:${Fe}`},I=async(S,b)=>{l(null),i(!0),(await oP({uid:t==null?void 0:t.uid,fullName:t==null?void 0:t.fullName,department:t==null?void 0:t.department,position:t==null?void 0:t.position},n,S,b)).success||l("Mola başlatılamadı"),i(!1)},P=async()=>{l(null),i(!0),(await lP({uid:t==null?void 0:t.uid},n)).success||l("Mola bitirilemedi"),i(!1)},U=u.filter(S=>S.active&&S.activeBreak),B=u.map(S=>({...S,last:[...S.history||[]].reverse().find(b=>b.type==="end"||b.type==="start")})).filter(Boolean);return c.jsxs("div",{className:"mola-container",children:[c.jsxs("header",{className:"mola-header",children:[c.jsxs("div",{className:"header-left",children:[c.jsx("button",{className:"geri-btn",onClick:e,children:"← Geri"}),c.jsxs("div",{className:"header-title",children:[c.jsx("h1",{children:"Mola Yönetimi"}),c.jsx("p",{children:(t==null?void 0:t.fullName)||"Kullanıcı"})]})]}),c.jsxs("div",{className:"date-picker-container",children:[c.jsx("label",{children:"Tarih:"}),c.jsx("input",{type:"date",value:n,max:Zd(),onChange:S=>r(S.target.value),className:"date-picker-input"}),c.jsx("button",{className:"bugun-btn",onClick:()=>r(Zd()),children:"Bugün"})]})]}),a&&c.jsx("div",{className:"err",children:a}),c.jsxs("main",{className:"mola-main",children:[c.jsxs("div",{className:"mola-kart",children:[c.jsx("h3",{children:"☕ Mola Seçenekleri"}),c.jsxs("div",{className:"mola-btn-grid",children:[c.jsxs("button",{className:"mola-btn",disabled:s||!!k,onClick:()=>I("yemek_45",45),title:"45 dakikalık yemek molası başlat",children:[c.jsx("div",{className:"btn-icon",children:"🍽️"}),c.jsxs("div",{className:"btn-content",children:[c.jsx("h4",{children:"Yemek Molası"}),c.jsx("p",{children:"45 dakika"})]})]}),c.jsxs("button",{className:"mola-btn",disabled:s||!!k,onClick:()=>I("yemek_30",30),title:"30 dakikalık yemek molası başlat",children:[c.jsx("div",{className:"btn-icon",children:"🍽️"}),c.jsxs("div",{className:"btn-content",children:[c.jsx("h4",{children:"Yemek Molası"}),c.jsx("p",{children:"30 dakika"})]})]}),c.jsxs("button",{className:"mola-btn",disabled:s||!!k,onClick:()=>I("normal_15",15),title:"15 dakikalık mola başlat",children:[c.jsx("div",{className:"btn-icon",children:"☕"}),c.jsxs("div",{className:"btn-content",children:[c.jsx("h4",{children:"Normal Mola"}),c.jsx("p",{children:"15 dakika"})]})]})]}),k&&c.jsxs("div",{className:"aktif-mola",children:[c.jsxs("div",{className:"aktif-bilgi",children:[c.jsx("span",{className:"pill",children:"Aktif"}),c.jsx("span",{className:"tip",children:k.type}),c.jsxs("span",{className:"saat",children:[(E=k.startedAt)==null?void 0:E.clientTime," → ",(N=k.expectedEndAt)==null?void 0:N.clientTime]}),(()=>{var Ce,Be,$;const S=((Ce=k.expectedEndAt)==null?void 0:Ce.millis)||0,b=S-C;if(b>0)return c.jsxs("span",{className:"pill soft",children:["Kalan ",w(b)]});const x=C-S,ye=(k.duration||0)*60*1e3,Fe=ye?Math.round(x/ye*100):0;return!(g!=null&&g.alertSentAt)&&Fe>=50&&uP({uid:t==null?void 0:t.uid,fullName:t==null?void 0:t.fullName,department:t==null?void 0:t.department,position:t==null?void 0:t.position},n,{breakType:k.type,duration:k.duration,startedAtMillis:(Be=k.startedAt)==null?void 0:Be.millis,expectedEndMillis:($=k.expectedEndAt)==null?void 0:$.millis,overMillis:x,overPct:Fe}),c.jsxs("span",{className:"pill danger",children:["AŞIM +",w(x)," ",Fe>0?`(%${Fe})`:""]})})(),(g==null?void 0:g.alertSentAt)&&c.jsx("span",{className:"pill soft",children:"Yönetime bildirildi"})]}),c.jsx("button",{className:"bitir-btn",disabled:s,onClick:P,children:"Molayı Bitir"})]})]}),c.jsxs("div",{className:"panel-columns",children:[c.jsxs("div",{className:"panel-card",children:[c.jsxs("div",{className:"panel-card-header",children:[c.jsx("span",{className:"btn-icon",children:"📋"}),c.jsx("span",{className:"title",children:"Bugün Mola Yapanlar"}),c.jsx("span",{className:"count",children:B.length})]}),c.jsx("div",{className:"list-scroll",children:B.length===0?c.jsx("div",{className:"empty-state",children:"Kayıt yok"}):B.map(S=>{var ve,ue,Ie,it,Ae,Nt,Qe,yt,Un,nn,ne,_e,de;const b=S.active&&S.activeBreak;let x=null,ye=0;const Fe=Array.isArray(S.history)?[...S.history].sort((ie,Te)=>(ie.atMillis||0)-(Te.atMillis||0)):[],Ce=[];let Be=null;for(const ie of Fe)ie.type==="start"?Be={start:ie.atMillis,duration:ie.duration,type:ie.breakType}:ie.type==="end"&&Be&&(Ce.push({...Be,end:ie.atMillis}),Be=null);b&&Ce.push({start:(ue=(ve=S.activeBreak)==null?void 0:ve.startedAt)==null?void 0:ue.millis,end:null,duration:(Ie=S.activeBreak)==null?void 0:Ie.duration,type:(it=S.activeBreak)==null?void 0:it.type});const $=Ce.filter(ie=>ie.start&&ie.end),K=$.reduce((ie,Te)=>ie+Math.max(0,Te.end-Te.start),0)+(b?Math.max(0,C-(((Nt=(Ae=S.activeBreak)==null?void 0:Ae.startedAt)==null?void 0:Nt.millis)||C)):0),Y=$.length+(b?1:0);if(b){const ie=((yt=(Qe=S.activeBreak)==null?void 0:Qe.startedAt)==null?void 0:yt.millis)||0,Te=((nn=(Un=S.activeBreak)==null?void 0:Un.expectedEndAt)==null?void 0:nn.millis)||0,X=(((ne=S.activeBreak)==null?void 0:ne.duration)||0)*60*1e3,ce=Math.max(0,C-ie);if(ye=X?Math.min(100,Math.round(ce/X*100)):0,C<Te)x=c.jsxs("span",{className:"chip",children:["Kalan ",w(Te-C)]});else{const fe=C-Te,Ye=X?Math.round(fe/X*100):0;x=c.jsxs("span",{className:"chip warn",children:["Aşım +",w(fe)," ",Ye>0?`(%${Ye})`:""]})}}return c.jsx("div",{className:"user-row clickable",onClick:()=>p({...S,date:n}),title:"Günün mola detaylarını gör",children:c.jsxs("div",{className:"user-info",children:[c.jsx("div",{className:"user-name",children:S.fullName}),c.jsxs("div",{className:"chips",children:[c.jsxs("span",{className:"chip",children:["Molalar: ",Y]}),c.jsxs("span",{className:"chip",children:["Toplam: ",v(K)]}),x]}),b&&c.jsx("div",{className:`progress ${C>(((de=(_e=S.activeBreak)==null?void 0:_e.expectedEndAt)==null?void 0:de.millis)||0)?"over":""}`,children:c.jsx("div",{className:"progress-bar",style:{width:`${ye}%`}})})]})},S.id)})})]}),c.jsxs("div",{className:"panel-card",children:[c.jsxs("div",{className:"panel-card-header",children:[c.jsx("span",{className:"btn-icon",children:"⏱️"}),c.jsx("span",{className:"title",children:"Şu An Aktif Moladakiler"}),c.jsx("span",{className:"count",children:U.length})]}),c.jsx("div",{className:"list-scroll",children:U.length===0?c.jsx("div",{className:"empty-state",children:"Kimse yok"}):U.map(S=>{var b,x,ye,Fe,Ce;return c.jsx("div",{className:"user-row",children:c.jsxs("div",{className:"user-info",children:[c.jsx("div",{className:"user-name",children:S.fullName}),c.jsxs("div",{className:"chips",children:[c.jsx("span",{className:"chip",children:(b=S.activeBreak)==null?void 0:b.type}),c.jsxs("span",{className:"chip",children:[(ye=(x=S.activeBreak)==null?void 0:x.startedAt)==null?void 0:ye.clientTime," → ",(Ce=(Fe=S.activeBreak)==null?void 0:Fe.expectedEndAt)==null?void 0:Ce.clientTime]})]})]})},S.id)})})]})]})]}),c.jsx(TP,{open:!!m,onClose:()=>p(null),record:m})]})}function IP({userProfile:t,onBack:e}){const n=(t==null?void 0:t.role)==="admin",[r,s]=M.useState(!0),[i,a]=M.useState([]),[l,u]=M.useState("all"),[d,m]=M.useState(""),[p,g]=M.useState(null),k=n,C=async()=>{s(!0);try{const v=await XD();v.success&&a(v.users)}finally{s(!1)}};M.useEffect(()=>{C()},[]);const R=M.useMemo(()=>{const v=d.toLowerCase();return i.filter(I=>!(l==="active"&&!I.isActive||l==="passive"&&I.isActive||l==="admins"&&I.role!=="admin"||l==="employees"&&I.role!=="employee"||v&&!String(I.fullName||"").toLowerCase().includes(v)&&!String(I.email||"").toLowerCase().includes(v)))},[i,l,d]),j=async(v,I)=>{if(k){g(v.uid);try{(await ZD(v.uid,I)).success&&await C()}finally{g(null)}}},w=async(v,I)=>{if(k){g(v.uid);try{(await eP(v.uid,I)).success&&await C()}finally{g(null)}}};return c.jsxs("div",{className:"admin-users-wrap",children:[c.jsxs("header",{className:"admin-users-header",children:[c.jsx("button",{className:"back-btn",onClick:e,children:"← Geri"}),c.jsx("h1",{children:"Kullanıcı Yönetimi"}),c.jsx("div",{className:"spacer"})]}),!n&&c.jsx("div",{className:"warn",children:"Bu alan için yetkiniz yok."}),c.jsxs("div",{className:"toolbar",children:[c.jsx("input",{className:"search",placeholder:"Ara: isim veya e-posta",value:d,onChange:v=>m(v.target.value)}),c.jsxs("div",{className:"filters",children:[c.jsx("button",{className:`chip ${l==="all"?"active":""}`,onClick:()=>u("all"),children:"Tümü"}),c.jsx("button",{className:`chip ${l==="active"?"active":""}`,onClick:()=>u("active"),children:"Aktif"}),c.jsx("button",{className:`chip ${l==="passive"?"active":""}`,onClick:()=>u("passive"),children:"Pasif"}),c.jsx("button",{className:`chip ${l==="admins"?"active":""}`,onClick:()=>u("admins"),children:"Admin"}),c.jsx("button",{className:`chip ${l==="employees"?"active":""}`,onClick:()=>u("employees"),children:"Personel"})]})]}),r?c.jsx("div",{className:"loading",children:"Yükleniyor…"}):c.jsxs("div",{className:"list",children:[R.map(v=>c.jsxs("div",{className:`row ${v.isActive?"":"passive"}`,children:[c.jsx("div",{className:"id",children:c.jsx("div",{className:"avatar",children:String(v.fullName||"?").charAt(0).toUpperCase()})}),c.jsxs("div",{className:"info",children:[c.jsx("div",{className:"name",children:v.fullName||"—"}),c.jsxs("div",{className:"meta",children:[String(v.department||"").toLocaleUpperCase("tr-TR")," • ",String(v.position||"").toLocaleUpperCase("tr-TR")]}),c.jsx("div",{className:"email",children:v.email})]}),c.jsxs("div",{className:"actions",children:[c.jsxs("div",{className:"role",children:[c.jsx("span",{className:`role-badge ${v.role==="admin"?"admin":"employee"}`,children:v.role==="admin"?"Admin":"Personel"}),k&&c.jsxs("div",{className:"role-buttons",children:[c.jsx("button",{disabled:p===v.uid||v.role==="admin",onClick:()=>j(v,"admin"),children:"Yap: Admin"}),c.jsx("button",{disabled:p===v.uid||v.role==="employee",onClick:()=>j(v,"employee"),children:"Yap: Personel"})]})]}),c.jsxs("div",{className:"active",children:[c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:!!v.isActive,disabled:!k||p===v.uid,onChange:I=>w(v,I.target.checked)}),c.jsx("span",{className:"slider"})]}),c.jsx("div",{className:"active-text",children:v.isActive?"Aktif":"Pasif"})]})]})]},v.uid||v.id)),R.length===0&&c.jsx("div",{className:"empty",children:"Kriterlere uygun kullanıcı bulunamadı."})]})]})}function SP({userProfile:t,onBack:e}){const n=(t==null?void 0:t.role)==="admin",[r,s]=M.useState("Duyuru"),[i,a]=M.useState(""),[l,u]=M.useState(!1),[d,m]=M.useState([]),p=async()=>{try{const k=ut(De(le,"notification_queue"),ti("createdAt","desc"),cj(20)),C=await gt(k),R=[];C.forEach(j=>R.push({id:j.id,...j.data()})),m(R)}catch{}};M.useEffect(()=>{p()},[]);const g=async()=>{if(n&&i.trim()){u(!0);try{(await GD({notification:{title:r||"Duyuru",body:i.trim()}})).success&&(a(""),await p())}finally{u(!1)}}};return c.jsxs("div",{className:"admin-notif-wrap",children:[c.jsxs("header",{className:"admin-notif-header",children:[c.jsx("button",{className:"back-btn",onClick:e,children:"← Geri"}),c.jsx("h1",{children:"Bildirimler"}),c.jsx("div",{className:"spacer"})]}),!n&&c.jsx("div",{className:"warn",children:"Bu alan için yetkiniz yok."}),c.jsxs("div",{className:"pane",children:[c.jsxs("div",{className:"form",children:[c.jsxs("div",{className:"group",children:[c.jsx("label",{children:"Başlık"}),c.jsx("input",{value:r,onChange:k=>s(k.target.value)})]}),c.jsxs("div",{className:"group",children:[c.jsx("label",{children:"Mesaj"}),c.jsx("textarea",{rows:3,placeholder:"Tüm kullanıcılara gidecek mesaj...",value:i,onChange:k=>a(k.target.value)})]}),c.jsx("div",{className:"actions",children:c.jsx("button",{className:"send",onClick:g,disabled:l||!i.trim(),children:"Gönder"})})]}),c.jsxs("div",{className:"recent",children:[c.jsx("h3",{children:"Son Kuyruk Kayıtları"}),c.jsxs("div",{className:"list",children:[d.map(k=>{var C,R;return c.jsxs("div",{className:`row ${k.status||"pending"}`,children:[c.jsx("div",{className:"id",children:k.id}),c.jsxs("div",{className:"msg",children:[(C=k.notification)==null?void 0:C.title," — ",(R=k.notification)==null?void 0:R.body]}),c.jsx("div",{className:"status",children:k.status||"pending"})]},k.id)}),d.length===0&&c.jsx("div",{className:"empty",children:"Kayıt yok"})]})]})]}),c.jsx("footer",{className:"hint",children:"Not: Gönderimler, Firestore'daki notification_queue üzerinden bir (gelecek) Cloud Function ile tekil olarak FCM'e iletilir."})]})}const AP=({user:t,onLogout:e,refreshKey:n,setRefreshKey:r})=>{var B,A;const[s,i]=M.useState(null),[a,l]=M.useState(!0),[u,d]=M.useState(!1),[m,p]=M.useState(!1),[g,k]=M.useState(!1),[C,R]=M.useState(!1),[j,w]=M.useState(()=>localStorage.getItem("glowchocolate_currentView")||"dashboard");M.useEffect(()=>{v()},[]),M.useEffect(()=>{localStorage.setItem("glowchocolate_currentView",j),console.log("🔄 Mevcut görünüm localStorage'a kaydedildi:",j)},[j]);const v=async()=>{try{const y=await mi(t.uid);y.success&&i(y.user)}catch(y){console.error("Profil yüklenemedi:",y)}finally{l(!1)}},I=[{id:"imalat-stok",title:"İmalat & Stok",icon:"🏭",description:"Üretim ve stok yönetimi",color:"#d4af37"},{id:"kasa-defteri",title:"Kasa Defteri",icon:"💰",description:"Kasa giriş çıkış takibi",color:"#b8860b"},{id:"satis-recete",title:"Satış & Reçete",icon:"📋",description:"Satış kayıtları ve reçeteler",color:"#d4af37"},{id:"gelir-gider",title:"Gelir & Gider",icon:"📊",description:"Mali durumu izleme",color:"#b8860b"},{id:"personel-takibi",title:"Personel Takibi",icon:"👥",description:"Personel yönetimi",color:"#d4af37",adminOnly:!1},{id:"maas-bilgisi",title:"Maaş Bilgisi",icon:"💵",description:"Maaş hesaplama ve ödeme",color:"#b8860b",adminOnly:!0},{id:"dis-tedarik",title:"Dış Tedarik & Stok Sayım",icon:"📦",description:"Tedarik yönetimi & Stok Sayımı",color:"#d4af37"},{id:"vardiya-yonetimi",title:"Personel Listesi & Vardiya Yönetimi",icon:"⏰",description:"Vardiya planlaması",color:"#b8860b",adminOnly:!0},{id:"ayarlar-raporlar",title:"Ayarlar & Raporlar",icon:"⚙️",description:"Sistem ayarları ve raporlar",color:"#d4af37",adminOnly:!0,action:()=>w("admin")}],P=y=>{console.log(`${y} kartına tıklandı`);const E=I.find(N=>N.id===y);if(E!=null&&E.adminOnly&&(s==null?void 0:s.role)!=="admin"){alert("Bu alana sadece adminler erişebilir.");return}if(E!=null&&E.action){E.action();return}y==="personel-takibi"&&w("personel-takip")};M.useEffect(()=>{!((s==null?void 0:s.role)==="admin")&&["admin","admin-users","admin-notifications","reports"].includes(j)&&(console.warn("Yetkisiz admin görünümü algılandı, ana panele yönlendiriliyor:",j),w("dashboard"))},[s==null?void 0:s.role,j]);const U=y=>({yonetim:"Yönetim",mudur:"Müdür",koordinatorler:"Koordinatörler","servis-personeli":"Servis Personeli","bar-personeli":"Bar Personeli","mutfak-personeli":"Mutfak Personeli","tedarik-sorumlusu":"Tedarik Sorumlusu","imalat-personeli":"İmalat Personeli"})[y]||y;return a?c.jsx("div",{className:"dashboard-container",children:c.jsxs("div",{className:"loading-wrapper",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Yükleniyor..."})]})}):j==="gorevler"?c.jsxs(c.Fragment,{children:[c.jsx(pP,{userProfile:s,onBack:()=>w("personel-takip")}),c.jsx(zl,{isOpen:u,onClose:()=>d(!1),userProfile:s,onUpdateProfile:async y=>{try{console.log("Profil güncelleniyor:",y);const E=await Bl(t.uid,y);if(E.success){console.log("✅ Profil başarıyla güncellendi");const N=await mi(t.uid);N.success&&(i(N.user),r(S=>S+1),console.log("✅ Kullanıcı profili yenilendi"),console.log("✅ Personel kartları yenilenecek"))}else throw console.error("❌ Güncelleme başarısız:",E.message),new Error(E.message||"Güncelleme başarısız")}catch(E){throw console.error("❌ Profile update error:",E),E}}})]}):j==="mesai-takip"?c.jsxs(c.Fragment,{children:[c.jsx(_P,{userProfile:s,onBack:()=>w("personel-takip")}),c.jsx(zl,{isOpen:u,onClose:()=>d(!1),userProfile:s,onUpdateProfile:async y=>{try{console.log("Profil güncelleniyor:",y);const E=await Bl(t.uid,y);if(E.success){console.log("✅ Profil başarıyla güncellendi");const N=await mi(t.uid);N.success&&(i(N.user),r(S=>S+1),console.log("✅ Kullanıcı profili yenilendi"),console.log("✅ Personel kartları yenilenecek"))}else throw console.error("❌ Güncelleme başarısız:",E.message),new Error(E.message||"Güncelleme başarısız")}catch(E){throw console.error("❌ Profile update error:",E),E}}})]}):j==="reports"?c.jsx(c.Fragment,{children:c.jsx(wP,{userProfile:s,onBack:()=>w("dashboard")})}):j==="admin"?c.jsx(c.Fragment,{children:c.jsx(EP,{userProfile:s,onBack:()=>w("dashboard"),onOpenReports:()=>w("reports"),onOpenMola:()=>w("mola"),onOpenPersonel:()=>w("personel-takip"),onOpenUsers:()=>w("admin-users"),onOpenNotifications:()=>w("admin-notifications")})}):j==="mola"?c.jsx(c.Fragment,{children:c.jsx(kP,{userProfile:s,onBack:()=>w("personel-takip")})}):j==="admin-users"?c.jsx(c.Fragment,{children:c.jsx(IP,{userProfile:s,onBack:()=>w("admin")})}):j==="admin-notifications"?c.jsx(c.Fragment,{children:c.jsx(SP,{userProfile:s,onBack:()=>w("admin")})}):j==="personel-takip"?c.jsxs(c.Fragment,{children:[c.jsx(fP,{isOpen:!0,onClose:()=>w("dashboard"),userProfile:s,onOpenGorevler:()=>w("gorevler"),onOpenMesaiTakip:()=>w("mesai-takip"),onOpenMola:()=>w("mola")}),c.jsx(zl,{isOpen:u,onClose:()=>d(!1),userProfile:s,onUpdate:async y=>{try{console.log("Profil güncelleniyor:",y);const E=await Bl(t.uid,y);if(E.success){console.log("✅ Profil başarıyla güncellendi");const N=await mi(t.uid);N.success&&(i(N.user),r(S=>S+1),console.log("✅ Kullanıcı profili yenilendi"),console.log("✅ Personel kartları yenilenecek"))}else throw console.error("❌ Güncelleme başarısız:",E.message),new Error(E.message||"Güncelleme başarısız")}catch(E){throw console.error("❌ Profile update error:",E),E}}})]}):c.jsxs("div",{className:"dashboard-container",children:[c.jsxs("header",{className:"dashboard-header",children:[c.jsx("div",{className:"header-left",children:c.jsx("div",{className:"brand-section",children:c.jsxs("div",{className:"brand-text",children:[c.jsx("h1",{children:"Glow Chocolate"}),c.jsx("p",{children:"İşletme Yönetim Sistemi"})]})})}),c.jsxs("div",{className:"header-right",children:[c.jsxs("div",{className:"user-info",children:[c.jsx("div",{className:"user-avatar",onClick:()=>d(!0),style:{cursor:"pointer"},children:(A=(B=(s==null?void 0:s.fullName)||t.name)==null?void 0:B.charAt(0))==null?void 0:A.toUpperCase()}),c.jsxs("div",{className:"user-details",children:[c.jsxs("span",{className:"user-name",children:["Hoş geldin, ",(s==null?void 0:s.fullName)||t.name,(s==null?void 0:s.role)==="admin"&&c.jsx("span",{className:"admin-badge",onClick:()=>d(!0),style:{cursor:"pointer"},children:"⬇️"})]}),c.jsx("span",{className:"user-department",children:(s==null?void 0:s.department)&&U(s.department)})]})]}),c.jsx("button",{onClick:e,className:"logout-btn",children:"Çıkış Yap"})]})]}),c.jsxs("main",{className:"dashboard-main",children:[c.jsxs("div",{className:"welcome-section",children:[c.jsx("h2",{children:" İşletme Kontrol Merkezi"}),c.jsx("p",{children:"Üst düzey yönetim paneline hoş geldiniz. Tüm işletme süreçlerinizi buradan izleyebilir ve yönetebilirsiniz."})]}),c.jsx("div",{className:"cards-grid",children:I.filter(y=>!y.adminOnly||(s==null?void 0:s.role)==="admin").map(y=>c.jsxs("div",{className:"dashboard-card",onClick:()=>P(y.id),style:{"--card-color":y.color},children:[c.jsx("div",{className:"card-icon",children:y.icon}),c.jsxs("div",{className:"card-content",children:[c.jsx("h3",{children:y.title}),c.jsx("p",{children:y.description})]}),c.jsx("div",{className:"card-arrow",children:"→"})]},y.id))})]}),c.jsx(zl,{isOpen:u,onClose:()=>d(!1),userProfile:s,onUpdateProfile:async y=>{try{console.log("Profil güncelleniyor:",y);const E=await Bl(t.uid,y);if(E.success){console.log("✅ Profil başarıyla güncellendi");const N=await mi(t.uid);N.success&&(i(N.user),r(S=>S+1),console.log("✅ Kullanıcı profili yenilendi"),console.log("✅ Personel kartları yenilenecek"))}else throw console.error("❌ Güncelleme başarısız:",E.message),new Error(E.message||"Güncelleme başarısız")}catch(E){throw console.error("❌ Profile update error:",E),E}}}),c.jsx(mP,{isOpen:C,onClose:()=>R(!1),userProfile:s})]})};function NP(){const[t,e]=M.useState(!1),[n,r]=M.useState(!1),[s,i]=M.useState(null),[a,l]=M.useState(!0),[u,d]=M.useState("dashboard"),[m,p]=M.useState(0);M.useEffect(()=>{const C=LD(R=>{R?(i({uid:R.uid,email:R.email,name:R.email.split("@")[0]}),r(!0)):(i(null),r(!1)),l(!1)});return()=>C()},[]);const g=C=>{e(!0),setTimeout(()=>{i(C),r(!0),e(!1)},3e3)},k=async()=>{try{await VD(),i(null),r(!1)}catch(C){console.error("Logout error:",C)}};return a?c.jsx(Jv,{}):t?c.jsx(Jv,{}):n?c.jsx("div",{className:"app-container",children:c.jsx("main",{className:"app-main",children:c.jsx(AP,{user:s,onLogout:k,refreshKey:m,setRefreshKey:p})})}):c.jsx(hP,{onLogin:g})}eh.createRoot(document.getElementById("root")).render(c.jsx(u_.StrictMode,{children:c.jsx(NP,{})}));
